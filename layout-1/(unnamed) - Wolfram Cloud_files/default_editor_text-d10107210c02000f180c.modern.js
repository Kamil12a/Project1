(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"+fbQp0":function(t,e,n){"use strict";n.d(e,"a",function(){return w});var o=n("MVZn7m"),i=n.n(o),r=n("F/us1n"),l=n.n(r),s=n("3n9vtm"),c=n("aEFwcg"),a=n("W/ttjn"),u=n("+PQVfF"),h=n("Cmf6vw"),f=n("qvtAvJ"),d=n("9mIgL/"),p=n("fqtNJs");const g=s.a("editor");function m(t){const{content:e,type:n}=t;return"operator-binary"===n&&["=","^="].indexOf(e)>=0||y(t)}function y(t){let{content:e,type:n}=t;return"operator-binary"===n&&[":=","^:="].indexOf(e)>=0}function v(t,e,n){const{enableTextTransformations:o,isMobileView:r,symdata:s}=n.options;function v(t,e){const n={isTraditionalForm:()=>!1},{state:o}=Object(p.tokenize)("\n",n,e.lexerState);return e.pos={line:e.pos.line+1,ch:0},e.lexerState=o,null}function w(t,e){let n=e?e.prevParentLevel:t.length,o=t[0];do{--n>=0&&(o=t[n])}while(n>0&&!o.op&&1===o.args.length);return o&&(o.prevParentLevel=n),o}function b(t,e){const o=e.lexerState,i={isTraditionalForm:()=>!1},r=t.string.substr(t.pos),{token:l,style:s,len:c,state:a}=Object(p.tokenize)(r,i,o);t.pos+=c,e.lexerState=a;const u=r.substr(0,c),g={line:e.pos.line,ch:e.pos.ch};let m=u;if("operator-binary"===s){const t=h.a.get(m);t&&(m=t)}d.a.advancePosStr(e.pos,m);const y={line:e.pos.line,ch:e.pos.ch};if(t.eol()){const{state:t}=Object(p.tokenize)("\n",i,a);e.lexerState=t,e.pos={line:e.pos.line+1,ch:0}}const v=a.insideString&&(!o||!o.insideString),w=!a.insideString&&o&&o.insideString,b=a.insideString||w,x=a.commentDepth>(o?o.commentDepth:0),C=a.commentDepth<(o?o.commentDepth:0),k=a.commentDepth>0||C;return new f.a(n,s,t,{content:m,indentation:e.indentation,lexerToken:l,startPos:g,endPos:y,startOfString:v,endOfString:w,partOfString:b,startOfComment:x,endOfComment:C,partOfComment:k})}function x(t,e){const o=b(t,e),{content:i,type:r,lexerToken:c}=o;if(o.pos=t.start,c.isOpening()?++e.indentation:c.isClosing()&&(--e.indentation,--o.indentation),"comment"===r||"error"===r||"space"===r)return o;const h=n.getCursor(),p=n.getLineHandle(h.line),v=t=>t.line===p&&t.pos<h.ch&&t.pos+t.content.length>=h.ch,x=e.expr.getCursor();let C,k=x[x.length-1];if("string"!==r&&c.isClosing()){o.addClass("needs-match");do{C=x.pop()}while(!C.isOpening()&&!C.isRoot());if(C.isRoot()?x.push(C):!C.openingToken&&C.token&&(C.openingToken=C.token,o.addMatching(C.openingToken,v)),"]"===i&&C.syntaxInfo&&null!==C.syntaxInfo.minArguments){let t=C.args.length;t&&C.args[t-1].isEmpty()&&--t,t<C.syntaxInfo.minArguments&&(o.addClass("syntax-error"),o.addClass("error-minargs"),o.addClass("head-".concat(C.getHeadName())))}C.close()}else{if("string"!==r&&c.isOpening()){o.addClass("needs-match");let t=null;"bracket-left"===r&&(t=k.args.pop());const e=(C=new a.b(i,t,[new a.b])).getHeadName();C.syntaxInfo=e&&s&&s.getInfo(e)}else if(/operator-binary|operator-postfix|comma|semicolon/.test(r)){const t=u.p(i);for(;x[x.length-1].precedence()>t;)x.pop();if(k=x[x.length-1],"comma"===r)k.args.length&&(k.args[k.args.length-1]=k.args[k.args.length-1].close()),C=new a.b;else{let t=null;if(k.args.length>1?k.op?t=k.args.pop():(t=new a.b(null,null,k.args),k.args=[]):1===k.args.length?(t=k.args[0],k.args=[]):"operator-binary"!==r||t||(t=new a.b),u.b.test(i)&&u.b.test(t.op))C=new a.b(t.op,null,[t.args[0],new a.b(i,null,[t.args[1],new a.b])]);else if(C=new a.b(i,null,t?[t]:[]),"operator-postfix"===r)C.closed=!0;else{const t=new a.b;t.parent=C,C.args.push(t)}}}else"operator-prefix"===r?C=new a.b(i,null,[new a.b]):"named-blank"===r?(C=new a.a(r,i)).name=i.replace(/_.*$/,""):/identifier|message-name-part|filename|int|float.*|slot|out|unnamed-blank|string|char-.*/.test(r)?C=new a.a("filename"===r?"string":r,i):g.error("Unimplemented token type",r);if("operator-postfix"===r){const t=new a.b(null,null,[C]);t.parent=k,k.args.push(t)}else k.args.push(C),C.parent=k}o.expr=C,C.token=o;const L={};let S=null,T=!1;l.a.each(x,t=>{if(t.localsPos&&!l.a.contains(t.localsPos,t.cursorArgCount)||d.a.updateMap(L,t.locals||{}),"["===t.op){S=t;const e=t.syntaxInfo;e&&null!==e.maxArguments&&S.args.length>e.maxArguments&&(T=!0)}});const M=x.length>1?x[x.length-2]:null;T&&(o.addClass("syntax-error"),o.addClass("error-maxargs"),o.addClass("head-".concat(S.getHeadName()))),o.funcExpr=S,S&&(o.funcIndex=S.args.length);const N=S&&S.syntaxInfo;if("operator-binary"===r&&("->"===i||""===i)&&N&&null!==N.optionsStart&&N.options.size>0&&S.args.length>=N.optionsStart&&M===S){const t=C.args[0];"identifier"===t.type&&(N.options.has(t.value)||o.addLocal(t,t.value,"syntax-error cm-error-optionname cm-head-".concat(S.getHeadName()),L))}"identifier"!==C.type&&"slot"!==C.type||("identifier"===C.type&&C.token&&s&&s.isSystemSymbol(C.value)&&C.token.addClass("keyword"),Object(f.c)(C,L));const O=w(x,null),A=O.getHeadName();if(m(o)&&(y(o)&&C.args[0].walk(t=>{"named-blank"===t.type&&t.name&&t.token.addLocal(C,t.name,"func",L)}),o.addLocal(C,"_","func",L,[1])),"bracket-left"===r&&"Function"===C.getHeadName()&&o.addLocal(C,"#","func",L,[0]),"comma"===r){if("{"===O.op&&O.args.length>1){const t=w(x,O);u.h.test(t.getHeadName())&&"identifier"===O.args[0].type&&o.addLocal(t,O.args[0].value,"iterator",L,[0])}"Function"===A&&(o.removeLocal(O,"#",L),O.args[0].walk(t=>{"identifier"===t.type&&o.addLocal(O,t.value,"func",L,[1,2])}))}function W(t){if(u.m.test(t.getHeadName())&&1===t.args.length){const e=t.args[0].walk(t=>t instanceof a.b&&"{"===t.op?t:null);if(e)for(const n of e.args)for(let e=n;e;e=e.args&&e.args[0])if(e instanceof a.a&&"identifier"===e.type){o.addLocal(t,e.value,"module",L);break}}else if(u.k.test(t.getHeadName())&&2===t.args.length){let e=t.args[1].normalized();e="{"===e.op?e.args:[e],Object(f.b)(t,L);for(const n of e){const{type:e,value:i}=n;"identifier"===e&&o.addLocal(t,i,"iterator",L)}}}"operator-postfix"===r&&"&"===i&&o.addLocal(C,"#","func",L);for(let t=x.length-1;t>0;--t)W(x[t]);return o}function C(t){return{pos:{line:t.pos.line,ch:t.pos.ch},lastToken:t.lastToken,lastTokenAny:t.lastTokenAny,expr:t.expr&&t.expr.copy(),currentExpr:t.currentExpr.copy(),commentDepth:t.commentDepth,lexerState:t.lexerState?i()({},t.lexerState):void 0,indentation:t.indentation}}function k(t){const e=t.getCursor();let n;for(n=0;n<e.length;++n)if(u.q.test(e[n].op)&&!e[n].closed)return!0;return!1}const L=o?{transformInput:t=>Object(h.j)(t,r)}:null;return i()({},L,{startState:function(){return{pos:{line:0,ch:0},lastToken:null,lastTokenAny:null,expr:a.b.root(),currentExpr:a.b.root(),lexerState:void 0,continuedLine:!1,indentation:0}},blankLine:v,copyState:C,isMath:!0,token:function(t,e){const o=x(t,e);if(o&&!o.expr&&e.lastTokenAny){const t=new a.b;e.lastTokenAny.expr&&("["===e.lastTokenAny.content?t.parent=e.lastTokenAny.expr:t.parent=e.lastTokenAny.expr.parent),o.expr=t}if(o&&(e.lastTokenAny=o,"comment"!==o.type&&"error"!==o.type&&"space"!==o.type&&(e.lastToken=o)),e.currentExpr=e.expr,t.eol()){const t=e.lastToken&&u.l.test(e.lastToken.type)||e.commentDepth||e.insideString||k(e.expr);e.continuedLine=t,t||(e.expr=a.b.root(),e.lastToken=null),setTimeout(()=>{c.a.signal(n,"lineparsed",n)},10)}return o}})}function w(t,e){let n=null;const o=Math.max(t.view.frontier-1,0);let i=e;do{n=t.lineInfo(i).handle.stateAfter,++i}while(i<=o&&n&&n.continuedLine);return n&&n.currentExpr}c.a.defineMode("mathematica",v),c.a.defineMIME("text/x-mathematica","mathematica")},"4GILXw":function(t,e,n){},KdFbCq:function(t,e,n){},MFYXOd:function(t,e,n){"use strict";n.d(e,"a",function(){return TokenInterval});var o=n("9mIgL/");function i(t,e,n){const o=t.getTokenAtWithoutState({line:e,ch:n}),i=o&&o.token;if(i){const{tokens:n}=t.getLineHandle(e);return n.indexOf(i)}return-1}function*r(t,e){const n=t<e?1:-1;for(let o=t;n*o<n*e;o+=n)yield o}function*l(t,e,n,o){const i=r(e,o?-1:t.lineCount());for(const l of i){const{tokens:i}=t.getLineHandle(l),s=o?r(e===l?n:i.length-1,-1):r(e===l?n:0,i.length);for(const t of s){const e=i[t];yield{lineNo:l,offset:o?0:e.content.length,token:e,tokenIndex:t}}}}function s(t){let e=null,n=null;for(const o of t){const{lineNo:t,token:i,tokenIndex:r}=o;if(n){e={lineNo:t,tokenIndex:r};break}n=i}return[e,n]}class TokenInterval{constructor(t,e,n){if(this.dataLeft=-1,this.dataRight=0,this.posLeft=null,this.posRight=null,Array.isArray(t)){this.data=[...t],this.editor=null;const i=this.data.length,r={line:e,ch:n};for(let t=0;t<i;t++){const e=this.data[t];if(e&&o.a.cmpPos(e.startPos,r)<=0&&o.a.cmpPos(r,e.endPos)<0){this.dataLeft=t,this.dataRight=t+1;break}}}else{this.data=[],this.editor=t;const o=i(this.editor,e,n);if(o>=0){const t=l(this.editor,e,o,!0),n=l(this.editor,e,o,!1),[i]=s(t),[r,c]=s(n);this.posLeft=i,this.posRight=r,c&&(this.data.unshift(c),this.dataLeft=0,this.dataRight++)}}}left(){if(this.dataLeft<0&&this.editor&&this.posLeft){const{lineNo:t,tokenIndex:e}=this.posLeft,n=l(this.editor,t,e,!0),[o,i]=s(n);this.data.unshift(i),this.dataLeft=0,this.dataRight++,this.posLeft=o}return this.dataLeft>=0?this.data[this.dataLeft--]:null}leftWhile(t,e){for(;;){const n=this.left();if(!n||!t(n,e))break}return e}rewind(t){t<0?this.dataLeft=Math.min(this.dataLeft-t,this.dataRight-1):this.dataRight=Math.max(this.dataRight-t,this.dataLeft+1)}right(){if(this.data.length<=this.dataRight&&this.editor&&this.posRight){const{lineNo:t,tokenIndex:e}=this.posRight,n=l(this.editor,t,e,!1),[o,i]=s(n);this.data.push(i),this.posRight=o}return this.dataRight<this.data.length?this.data[this.dataRight++]:null}rightWhile(t,e){for(;;){const n=this.right();if(!n||!t(n,e))break}return e}}},"W/ttjn":function(t,e,n){"use strict";n.d(e,"a",function(){return Atom}),n.d(e,"b",function(){return Expr});var o=n("F/us1n"),i=n.n(o),r=n("+PQVfF"),l=n("9mIgL/");const s=(()=>{let t=1;return()=>t++})();class AbstractExpr{find(t,e){return t?this.walk(n=>n.id===t.id||e&&t.token&&(n.token&&n.token.line===t.token.line&&n.token.pos===t.token.pos||n.openingToken&&n.openingToken.line===t.token.line&&n.openingToken.pos===t.token.pos)?n:null)||t:null}getCursor(){const t=[];let e=this,n=1;do{e.cursorArgCount=n,t.push(e),n=e.args.length,e=e.args[e.args.length-1]}while(e&&e.args&&!e.closed);return t}visit(t){this.head&&t(this.head,0),this.args&&i.a.each(this.args,(e,n)=>t(e,n+1))}walk(t){let e=t(this);if(e)return e;if(this.head&&(e=this.head.walk(t)))return e;if(this.args)for(const n of this.args){if(!n)break;if(e=n.walk(t))break}return e}}class Atom extends AbstractExpr{constructor(t,e){super(),this.id=s(),this.type=t,this.value=e,this.token=null,this.name=null,this.locals={},this.localsPos=null,this.parent=null}close(){return this}copy(t){return this}getHeadName(){return""}isEmpty(){return!1}normalized(){return this}rep(t){return this.value}walkTokens(t){this.token&&t(this.token)}}class Expr extends AbstractExpr{static root(){return new Expr("root",null,[new Expr])}constructor(t,e,n,o){super(),this.op=t||null,this.head=e,this.args=n||[],i.a.each(this.args,t=>t.parent=this),this.closed=!1,this.id=o||s(),this.locals={},this.localsPos=null,this.openingToken=null,this.parent=null,this.syntaxInfo=null,this.token=null}close(){return this.isRoot()||(this.closed=!0),this.op||1!==this.args.length?this:this.args[0]}copy(t){const e=this;if(!e)return e;const n=new Expr(e.op,e.head,[],e.id);if(t)n.args=i.a.map(e.args,e=>{const o=e.copy(t);return o.parent=n,o});else if(n.args=e.args.slice(0,-1),i.a.each(n.args,t=>t.parent=n),e.args.length){let o=e.args[e.args.length-1];(o=o.copy(t)).parent=n,n.args.push(o)}return n.closed=e.closed,n.token=e.token,n.openingToken=e.openingToken,n.locals=l.a.copyMap(e.locals),n.localsPos=e.localsPos,n.syntaxInfo=e.syntaxInfo,n}getHeadName(){return this.head&&"identifier"===this.head.type?this.head.value:""}isEmpty(){return!this.op&&0===this.args.length}isOpening(){return r.q.test(this.op)}isRoot(){return"root"===this.op}lastArg(){return this.args.length>0?this.args[this.args.length-1]:null}normalized(){return this.op||1!==this.args.length?new Expr(this.op,this.head?this.head.normalized():null,i.a.map(this.args,t=>t.normalized()),this.id):this.args[0].normalized()}precedence(){return r.p(this.op)}repr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"  ";const e=this;let n=e.op;return e.head&&(n+=" (".concat(e.head.repr(),")")),e.closed&&(n+=" (closed)"),i.a.isEmpty(e.locals)||(n+=" (locals: ",i.a.each(e.locals,(t,e)=>{n+="".concat(e,":").concat(t,", ")}),n=n.substr(0,n.length-2),n+=")"),i.a.each(e.args,(e,o)=>{n+="\n".concat(t).concat(o,": ").concat(e.repr("".concat(t,"  ")))}),n}walkTokens(t){this.head&&this.head.walkTokens(t),this.openingToken&&t(this.openingToken),i.a.each(this.args,e=>e.walkTokens(t)),this.token&&t(this.token)}}},aEFwcg:function(t,e,n){"use strict";var o=n("F/us1n"),i=n.n(o),r=n("EVdnBj"),l=n.n(r),s=n("z3Bmnx"),c=n("3n9vtm"),a=n("MFYXOd"),u=n("9mIgL/");function h(t,e,n){const o=new a.a(t,e,n),i=o.left();if(i){const t=[i.startPos,i.endPos],e=[];if(i.partOfComment)e.push(w,t=>v(t,!1),t=>x(t,i));else if(i.partOfString)e.push(w,k,t=>C(t,i));else{const t=i.lexerToken.isComma();e.push(e=>w(e,t),t=>b(t,i))}return{endpoints:t,tokens:o,ops:e}}return null}function f(t){const{ops:e}=t;for(;e.length>0;){const n=e.pop();if(!n)break;const o=n(t);if(o&&u.a.properSubset(t.endpoints,o)){t.endpoints=o;break}}}function d(t,e){e&&t.setSelection(...e.endpoints)}function p(t){const{endpoints:e,tokens:n}=t,o=n.left();if(o&&o.lexerToken.isOpening()){const e=o.lexerToken.getMatching();if(e){const{last:i}=n.rightWhile(L,{isClosing:t=>{let{lexerToken:e}=t;return e.isClosing()},isOpening:t=>{let{lexerToken:e}=t;return e.isOpening()},last:null,nested:[e]});if(i)return t.ops.push(w),[o.startPos,i.endPos]}}const i=n.right();if(i&&i.lexerToken.isClosing()){const e=i.lexerToken.getMatching();if(e){const{last:o}=n.leftWhile(L,{isClosing:t=>{let{lexerToken:e}=t;return e.isOpening()},isOpening:t=>{let{lexerToken:e}=t;return e.isClosing()},last:null,nested:[e]});if(o)return t.ops.push(w),[o.startPos,i.endPos]}}return o||i?(o&&(e[0]=o.startPos),i&&(e[1]=i.endPos),w(t)):null}function g(t,e){if(t.partOfComment){const{isClosing:n,isOpening:o,last:i}=e;if(i&&/\S/.test(i.content)&&(e.lastNonSpace=i,e.rewind=0),e.last=t,e.rewind++,o(t))e.nested++;else if(n(t)){if(!(e.nested>0))return!1;e.nested--}return!0}return!1}function m(t,e){return!!t.partOfString&&(e.last=t,!e.isClosing(t))}function y(t,e){const{lexerToken:n}=t,{isClosing:o,isOpening:i,nested:r,skipCommas:l}=e;if(e.last=t,n.isComma()){if(!l&&0===r.length)return!1}else if(i(t)){const t=n.getMatching();t&&r.push(t)}else if(o(t)){const t=r.pop();if(!t)return!1;n!==t&&r.push(t)}return e.prev=t,!0}function v(t,e){const[n,o]=t.endpoints,{tokens:i}=t,{last:r,lastNonSpace:l,nested:s,rewind:c}=i.leftWhile(g,{isClosing:t=>t.startOfComment,isOpening:t=>t.endOfComment,last:null,lastNonSpace:null,nested:0,rewind:0}),{last:a,lastNonSpace:u,nested:h,rewind:f}=i.rightWhile(g,{isClosing:t=>t.endOfComment,isOpening:t=>t.startOfComment,last:null,lastNonSpace:null,nested:0,rewind:0});if((r||a)&&t.ops.push(t=>v(t,!e)),e)return[r?r.startPos:n,a?a.endPos:o];const d=r&&r.startOfComment&&0===s?l:r,p=a&&a.endOfComment&&0===h?u:a;return i.rewind(-c),i.rewind(f),[d?d.startPos:n,p?p.endPos:o]}function w(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[n,o]=t.endpoints,{tokens:i}=t,{last:r,prev:l}=i.rightWhile(y,{isClosing:t=>{let{lexerToken:e}=t;return e.isClosing()},isOpening:t=>{let{lexerToken:e}=t;return e.isOpening()},last:null,nested:[],prev:null,skipCommas:e}),{last:s,prev:c}=i.leftWhile(y,{isClosing:t=>{let{lexerToken:e}=t;return e.isOpening()},isOpening:t=>{let{lexerToken:e}=t;return e.isClosing()},last:null,nested:[],prev:null,skipCommas:e});return s&&i.rewind(-1),r&&i.rewind(1),t.ops.push(p),[c?c.startPos:n,l?l.endPos:o]}function b(t,e){const{lexerToken:n,startPos:o,endPos:i}=e,{tokens:r}=t;if(n.isOpening()){const t=n.getMatching();if(t){const{last:e}=r.rightWhile(L,{isClosing:t=>{let{lexerToken:e}=t;return e.isClosing()},isOpening:t=>{let{lexerToken:e}=t;return e.isOpening()},last:null,nested:[t]});if(e)return[o,e.endPos]}}else if(n.isClosing()){const t=n.getMatching();if(t){const{last:e}=r.leftWhile(L,{isClosing:t=>{let{lexerToken:e}=t;return e.isOpening()},isOpening:t=>{let{lexerToken:e}=t;return e.isClosing()},last:null,nested:[t]});if(e)return[e.startPos,i]}}return null}function x(t,e){const{startPos:n,endPos:o}=e,{tokens:i}=t;if(e.startOfComment){const t=e.lexerToken.getMatching();if(t){const{last:e}=i.rightWhile(L,{isClosing:t=>t.endOfComment,isOpening:t=>t.startOfComment,last:null,nested:[t]});if(e)return[n,e.endPos]}}else if(e.endOfComment){const t=e.lexerToken.getMatching();if(t){const{last:e}=i.leftWhile(L,{isClosing:t=>t.startOfComment,isOpening:t=>t.endOfComment,last:null,nested:[t]});if(e)return[e.startPos,o]}}return null}function C(t,e){const[n,o]=t.endpoints,{tokens:i}=t;if(e.startOfString){const{last:t}=i.rightWhile(m,{isClosing:t=>t.endOfString,last:null});if(t)return[n,t.endPos]}else if(e.endOfString){const{last:t}=i.leftWhile(m,{isClosing:t=>t.startOfString,last:null});if(t)return[t.startPos,o]}return null}function k(t){const[e,n]=t.endpoints,{tokens:o}=t,{last:i}=o.leftWhile(m,{isClosing:t=>t.startOfString,last:null}),{last:r}=o.rightWhile(m,{isClosing:t=>t.endOfString,last:null});return[i?i.startPos:e,r?r.endPos:n]}function L(t,e){const{isClosing:n,isOpening:o,nested:i}=e,{lexerToken:r}=t;if(e.last=t,o(t)){const t=r.getMatching();t&&i.push(t)}else if(n(t)){const t=i.pop();if(r===t||!t)return i.length>0;t&&i.push(t)}return!0}var S=n("NVvJdV"),T=n("qvtAvJ");function M(t,e,n,o){const i=e+t+n,r=o(i);if(r===i)return{text:t,eatenPrefix:0,eatenSuffix:0};let l=0;for(let t=0;t<e.length;++t)if(r.charAt(t)!==e.charAt(t)){l=e.length-t;break}let s=0;for(let t=0;t<n.length;++t)if(r.charAt(r.length-1-t)!==n.charAt(n.length-1-t)){s=n.length-t;break}return{text:r.substring(e.length-l,r.length-n.length+s),eatenPrefix:l,eatenSuffix:s}}const N=0,O=1,A=2,W=c.a("codemirror"),E=/gecko\/\d/i.test(s.d.userAgent),H=/MSIE \d/.test(s.d.userAgent)||/Trident\//.test(s.d.userAgent),D=/MSIE [1-7]\b/.test(s.d.userAgent),P=/MSIE [1-8]\b/.test(s.d.userAgent),I=/WebKit\//.test(s.d.userAgent),z=I&&/Qt\/\d+\.\d+/.test(s.d.userAgent),R=/Chrome\//.test(s.d.userAgent),F=/Opera\//.test(s.d.userAgent),B=/Apple Computer/.test(s.d.vendor),V=/KHTML\//.test(s.d.userAgent),K=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(s.d.userAgent),_=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(s.d.userAgent),j=/PhantomJS/.test(s.d.userAgent),U=/AppleWebKit/.test(s.d.userAgent)&&/Mobile\/\w+/.test(s.d.userAgent),X=U||/Android|webOS|BlackBerry|Opera Mini|IEMobile/i.test(s.d.userAgent),Y=U||/Mac/.test(s.d.platform),G=/windows/i.test(s.d.platform)||/win/i.test(s.d.platform);let J=F&&s.d.userAgent.match(/Version\/(\d*\.\d*)/);J&&(J=Number(J[1]));let $=!1,q=!1;const Z=500,Q=200,tt={};function et(t,e){if(!(this instanceof et))return new et(t,e);this.options=e=e||{};for(const t in yn)!e.hasOwnProperty(t)&&yn.hasOwnProperty(t)&&(e[t]=yn[t]);ft(e),this.shouldIgnoreEvent=e.shouldIgnoreEvent||(()=>!1);const n=this.display=nt(t,e);n.wrapper.CodeMirror=this,at(this,!0);const o=e.avoidMeasurement?0:Qt(n);let i;this.view=ot(new wo([new vo([Zn(null,"",null,o)])])),this.nextOpId=0,it(this),st(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),e.autofocus&&!X&&ae(this),e.markers?this.setValueAndMarkers(e.value||"",e.markers):this.setValue(e.value||""),H&&setTimeout(Zo(ce,this,!0),20),this.view.history=To(),he(this);try{i=document.activeElement==n.input}catch(t){}i||e.autofocus&&!X?this.autoFocusTimeout=setTimeout(()=>{this.autoFocusTimeout=null,Ke(this)},20):_e(this),this.remove=function(){l()(this.display.lineDiv).remove()},oe(this,function(){for(const t in mn)mn.propertyIsEnumerable(t)&&mn[t](this,e[t],wn);for(let t=0;t<kn.length;++t)kn[t](this)})()}function nt(t,e){const n={},o=n.input=oi("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; left: -10000px;");I||o.setAttribute("wrap","off"),o.setAttribute("autocorrect","off"),o.setAttribute("autocapitalize","off"),n.inputDiv=oi("div",[o],null,"overflow: hidden; position: absolute; width: 3px; height: 0px;"),n.scrollbarH=oi("div",[oi("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=oi("div",[oi("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=oi("div",null,"CodeMirror-scrollbar-filler"),n.lineDiv=oi("div"),n.selectionDiv=oi("div",null,"CodeMirror-selection-container"),n.selectionElements=[],n.cursor=oi("pre"," ","CodeMirror-cursor"),n.otherCursor=oi("pre"," ","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=oi("div",null,"CodeMirror-measure"),n.lineSpace=oi("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=oi("div",[oi("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=oi("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=oi("div"," ",null,"position: absolute; height: ".concat(e.disableScroll?0:Ko,"px"),"CodeMirror-height-forcer"),n.gutters=oi("div",null,"CodeMirror-gutters"),n.lineGutter=null;const i=oi("div",[n.sizer,n.heightForcer,n.gutters],null,"position: relative; min-height: 100%");n.scroller=oi("div",[i],"CodeMirror-scroll CodeMirror-not-focused"),n.scroller.setAttribute("tabIndex","-1");let r="CodeMirror";H?r+=" CodeMirror-IE":G&&R&&(r+=" CodeMirror-Windows-Chrome"),n.wrapper=oi("div",[n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.scroller],r),D&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0);let s=n.wrapper;return e&&e.inputParent&&(s=e.inputParent),n.$inputParent=l()(s),s.appendChild(n.inputDiv),t.appendChild?t.appendChild(n.wrapper):t(n.wrapper),U&&(o.style.width="0px"),I||(n.scroller.draggable=!0),V?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):D&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px"),n.viewOffset=n.showingFrom=n.showingTo=n.lastSizeC=0,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new jo,n.draggingText=!1,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.pasteIncoming=!1,n}function ot(t){const e={line:0,ch:0};return{doc:t,frontier:0,highlight:new jo,sel:{from:e,to:e,head:e,anchor:e,shift:!1,extend:!1},scrollTop:0,scrollLeft:0,overwrite:!1,focused:!1,maxLine:bo(t,0),maxLineLength:0,maxLineChanged:!1,suppressEdits:!1,goalColumn:null,cantEdit:!1,keyMaps:[]}}function it(t){const e=t.view.doc;t.view.mode=et.getMode(t.options,t.options.mode,t),e.iter(0,e.size,t=>{t.stateAfter=null,t.frontier=-1}),t.view.frontier=0,Ht(t,100)}function rt(t){let e=t.view.doc,n=Qt(t.display);if(t.options.lineWrapping){t.display.wrapper.className+=" CodeMirror-wrap";const o=t.display.scroller.clientWidth/te(t.display)-3;e.iter(0,e.size,t=>{if(0===t.height)return;const e=Math.ceil(t.text.length/o)||1;1!=e&&xo(t,e*n)}),t.display.sizer.style.minWidth=""}else t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),ht(t.view),e.iter(0,e.size,t=>{0!==t.height&&xo(t,n)});ie(t,0,e.size),Ut(t),setTimeout(()=>{dt(t,t.view.doc.height)},100)}function lt(t){const e=Mn[t.options.keyMap].style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-".concat(e):"")}function st(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ut(t)}function ct(t){at(t),bt(t,!0)}function at(t,e){let n=t.display.gutters,o=t.options.gutters;e||ii(n);for(var i=0;i<o.length;++i){const e=o[i],r=n.appendChild(oi("div",null,"CodeMirror-gutter ".concat(e)));"CodeMirror-linenumbers"==e&&(t.display.lineGutter=r,r.style.width="".concat(t.display.lineNumWidth||1,"px"))}n.style.display=i?"":"none"}function ut(t,e){if(0===e.height)return 0;let n,o,i=e.text.length,r=e;for(;n=Kn(r);)r=bo(t,(o=n.find()).from.line),i+=o.from.ch-o.to.ch;for(r=e;n=_n(r);)o=n.find(),i-=r.text.length-o.from.ch,i+=(r=bo(t,o.to.line)).text.length-o.to.ch;return i}function ht(t){t.maxLine=bo(t.doc,0),t.maxLineLength=ut(t.doc,t.maxLine),t.maxLineChanged=!0,t.doc.iter(1,t.doc.size,e=>{const n=ut(t.doc,e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function ft(t){let e=!1;for(let n=0;n<t.gutters.length;++n)"CodeMirror-linenumbers"==t.gutters[n]&&(t.lineNumbers?e=!0:t.gutters.splice(n--,1));!e&&t.lineNumbers&&t.gutters.push("CodeMirror-linenumbers")}function dt(t,e){if(t.options.disableScroll)return;const n=t.display,o=e+2*Ft(n);n.sizer.style.minHeight=n.heightForcer.style.top="".concat(o,"px");const i=Math.max(o,n.scroller.scrollHeight),r=n.scroller.scrollWidth>n.scroller.clientWidth,l=i>n.scroller.clientHeight;l?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=r?"".concat(hi(n.measure),"px"):"0",n.scrollbarV.firstChild.style.height="".concat(i-n.scroller.clientHeight+n.scrollbarV.clientHeight,"px")):n.scrollbarV.style.display="",r?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=l?"".concat(hi(n.measure),"px"):"0",n.scrollbarH.firstChild.style.width="".concat(n.scroller.scrollWidth-n.scroller.clientWidth+n.scrollbarH.clientWidth,"px")):n.scrollbarH.style.display="",r&&l?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width="".concat(hi(n.measure),"px")):n.scrollbarFiller.style.display="",K&&0===hi(n.measure)&&(n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=_?"18px":"12px")}function pt(t,e,n,o){if(t.options.disableScroll)return{from:0,to:t.lineCount()};let i=e.scroller.scrollTop,r=e.wrapper.clientHeight;"number"==typeof o?i=o:o&&(i=o.top,r=o.bottom-o.top),i=Math.floor(i-Ft(e));const l=Math.ceil(i+r);return{from:ko(n,i),to:ko(n,l)}}function gt(t){const e=t.display;if(!e.alignWidgets&&!e.gutters.firstChild)return;const n=vt(t)-e.scroller.scrollLeft+t.view.scrollLeft;let o=e.gutters.offsetWidth,i="".concat(n,"px");for(let t=e.lineDiv.firstChild;t;t=t.nextSibling)if(t.alignable)for(let e=0,n=t.alignable;e<n.length;++e)n[e].style.left=i;e.gutters.style.left="".concat(n+o,"px")}function mt(t){if(!t.options.lineNumbers)return!1;let e=t.view.doc,n=yt(t.options,e.size-1),o=t.display;if(n.length!=o.lineNumChars){const t=o.measure.appendChild(oi("div",[oi("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt"));let e=t.firstChild.offsetWidth,i=t.offsetWidth-e;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(e,o.lineGutter.offsetWidth-i),o.lineNumWidth=o.lineNumInnerWidth+i,o.lineNumChars=o.lineNumInnerWidth?n.length:-1,o.lineGutter.style.width="".concat(o.lineNumWidth,"px"),!0}return!1}function yt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function vt(t){if(!t.options.disableScroll){const e=t.display;return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}return 0}function wt(t,e){let n=t.view,o=t.view.doc;o.iter(n.frontier,Math.min(o.size,t.display.showingTo+500),t=>{t.frontier=-1});const i=Dt(t,!0);return i&&!0!==e&&(!0===i?e=!0:l.a.each(i,(t,n)=>{e.push({from:n.start,to:n.end})})),e}function bt(t,e,n,o){let i=t.display.showingFrom,r=t.display.showingTo;return e=wt(t,e),Ct(t,e,n,e=>{e&&(Bo(t,t,"update",t),t.display.showingFrom==i&&t.display.showingTo==r||Bo(t,t,"viewportChange",t,t.display.showingFrom,t.display.showingTo)),t.options.renderLine||(Nt(t),dt(t,t.view.doc.height)),o&&o()})}function xt(t){t.view.doc.iter(t.display.showingFrom,t.display.showingTo,t=>{const e=t.backgroundNodes;if(e)for(let t=0;t<e.length;++t){let n=e[t];const o=n.forElement;n=l()(n);const i=o.getBoundingClientRect();n.offset({left:i.left,top:i.top}),n.width(i.right-i.left),n.height(i.bottom-i.top)}})}function Ct(t,e,n,o){let i=t.display,r=t.view.doc;if(!i.wrapper.clientWidth&&!t.options.disableScroll)return i.showingFrom=i.showingTo=i.viewOffset=0,o(!1),!1;const l=pt(t,i,r,n);if(!0!==e&&0===e.length&&l.from>i.showingFrom&&l.to<i.showingTo)return o(!1),!1;let s,c;if(e&&mt(t)&&(e=!0),i.sizer.style.marginLeft=i.scrollbarH.style.left="".concat(i.gutters.offsetWidth,"px"),!0!==e&&q)for(c=0;c<e.length;++c)for(var a,u=e[c];a=Kn(bo(r,u.from));)s=a.find().from.line,u.diff&&(u.diff-=u.from-s),u.from=s;let h=!0===e?0:1/0;if(t.options.lineNumbers&&e&&!0!==e)for(c=0;c<e.length;++c)if(e[c].diff){h=e[c].from;break}s=Math.max(l.from-t.options.viewportMargin,0);let f=Math.min(r.size,l.to+t.options.viewportMargin);if(i.showingFrom<s&&s-i.showingFrom<20&&(s=i.showingFrom),i.showingTo>f&&i.showingTo-f<20&&(f=Math.min(r.size,i.showingTo)),q)for(s=Co(jn(r,bo(r,s)));f<r.size&&Un(bo(r,f));)++f;const d=!0===e?[]:kt([{from:i.showingFrom,to:i.showingTo}],e);let p=0;for(c=0;c<d.length;++c){const t=d[c];t.from<s&&(t.from=s),t.to>f&&(t.to=f),t.from>=t.to?d.splice(c--,1):p+=t.to-t.from}return p==f-s&&s==i.showingFrom&&f==i.showingTo?(o(!1),!1):(d.sort((t,e)=>t.from-e.from),p<.7*(f-s)&&(i.lineDiv.style.display="none"),t.options.disableScroll?(i.showingFrom=0,i.showingTo=t.lineCount()):(i.showingFrom=s,i.showingTo=f),St(t,s,f,d,h,()=>{if(i.lineDiv.style.display="",!t.options.renderLine){const t=i.wrapper.clientHeight;(s!=i.showingFrom||f!=i.showingTo||i.lastSizeC!=t)&&(i.lastSizeC=t||i.wrapper.clientHeight);let o=i.lineDiv.offsetTop;for(var e,n=i.lineDiv.firstChild;n;n=n.nextSibling)if(n.lineObj){if(D){const t=n.offsetTop+n.offsetHeight;e=t-o,o=t}else{const t=n.getBoundingClientRect();e=t.bottom-t.top}const t=n.lineObj.height-e;e<2&&(e=Qt(i)),(t>.001||t<-.001)&&xo(n.lineObj,e)}}i.viewOffset=Lo(t,bo(r,s)),i.mover.style.top="".concat(i.viewOffset,"px"),o(!0)}),Ht(t,100),!0)}function kt(t,e){for(let n=0,o=e.length||0;n<o;++n){let o=e[n],i=[],r=o.diff||0;for(let e=0,n=t.length;e<n;++e){const n=t[e];o.to<=n.from&&o.diff?i.push({from:n.from+r,to:n.to+r}):o.to<=n.from||o.from>=n.to?i.push(n):(o.from>n.from&&i.push({from:n.from,to:o.from}),o.to<n.to&&i.push({from:o.to+r,to:n.to+r}))}t=i}return t}function Lt(t){let e=t.display,n={},o={};for(let i=e.gutters.firstChild,r=0;i;i=i.nextSibling,++r)n[t.options.gutters[r]]=i.offsetLeft,o[t.options.gutters[r]]=i.offsetWidth;return{fixedPos:vt(t),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:o,wrapperWidth:e.wrapper.clientWidth}}function St(t,e,n,o,i,r){const l=t.options.renderLine?{fixedPos:0,gutterTotalWidth:0,gutterLeft:0,gutterWidth:0,wrapperWidth:0}:Lt(t);let s=t.display,c=t.options.lineNumbers;t.options.renderLine||o.length||H||I&&t.display.currentWheelTarget||ii(s.lineDiv);let a=s.lineDiv,u=a.firstChild;function h(e){const n=e.nextSibling;return I&&Y&&t.display.currentWheelTarget==e?(e.style.display="none",e.lineObj=null):a.removeChild(e),n}let f=o.shift(),d=e,p=0,g=0;function m(){p===g&&(t.options.onRender&&t.options.onRender(t),r())}for(t.view.doc.iter(e,n,e=>{if(f&&f.to==d&&(f=o.shift()),Un(e))0!==e.height&&xo(e,0);else if(f&&f.from<=d&&f.to>d){for(;u.lineObj!=e;)u=h(u);c&&i<=d&&u.lineNumber&&li(u.lineNumber,yt(t.options,d)),u=u.nextSibling}else{++g;const n=Tt(t,e,d,l,t=>{t.lineObj=e,++p,m()});n===u?u=u.nextSibling:a.insertBefore(n,u),n.lineObj=e}++d});u;)u=h(u);m()}function Tt(t,e,n,o,i){e.backgroundNodes=[],t.options.renderLine||(e.wrap=null);const r=e.wrap||(e.wrap=oi("div",null,e.wrapClass,"position: relative"));return io(t,e,null,l=>{let s,c,a=e.gutterMarkers,u=t.display;if(!(t.options.lineNumbers||a||e.bgClass||e.wrapClass||e.widgets&&e.widgets.length||e.backgroundNodes.length))return l.parentNode!==r&&r.appendChild(l),void i(r);if((t.options.lineNumbers||a)&&(c=r.appendChild(oi("div",null,null,"position: absolute; left: ".concat(o.fixedPos,"px"))),r.alignable=[c],!t.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(r.lineNumber=c.appendChild(oi("div",yt(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: ".concat(o.gutterLeft["CodeMirror-linenumbers"],"px; width: ").concat(u.lineNumInnerWidth,"px")))),a))for(let e=0;e<t.options.gutters.length;++e){let n=t.options.gutters[e],i=a.hasOwnProperty(n)&&a[n];i&&c.appendChild(oi("div",[i],"CodeMirror-gutter-elt","left: ".concat(o.gutterLeft[n],"px; width: ").concat(o.gutterWidth[n],"px")))}if(e.bgClass&&r.appendChild(oi("div"," ","".concat(e.bgClass," CodeMirror-linebackground"))),e.backgroundNodes){const t=oi("div",[],"CodeMirror-backgroundelements");for(s=0;s<e.backgroundNodes.length;++s)t.appendChild(e.backgroundNodes[s]);r.appendChild(t)}if(r.appendChild(l),e.widgets){let n;for(s=0,n=e.widgets;s<n.length;++s){let i=n[s],a=oi("div",[i.node],"CodeMirror-linewidget");if(a.widget=i,i.noHScroll){(r.alignable||(r.alignable=[])).push(a);let t=o.wrapperWidth;a.style.left="".concat(o.fixedPos,"px"),i.coverGutter||(t-=o.gutterTotalWidth,a.style.paddingLeft="".concat(o.gutterTotalWidth,"px")),a.style.width="".concat(t,"px")}i.coverGutter&&(a.style.zIndex=5,a.style.position="relative",i.noHScroll||(a.style.marginLeft="".concat(-o.gutterTotalWidth,"px"))),i.above?r.insertBefore(a,t.options.lineNumbers&&0!==e.height?c:l):r.appendChild(a),Bo(i,"redraw")}}D&&(r.style.zIndex=2),i(r)}),r}function Mt(t,e){const n=t.display;for(let t=0;t<n.selectionElements.length;++t){const o=n.selectionElements[t];e?o.addExtraClassName("cm-selected"):o.removeExtraClassName("cm-selected")}}function Nt(t){const e=t.display,n=$e(t.view.sel.from,t.view.sel.to);n||t.options.showCursorWhenSelecting?At(t):e.cursor.style.display=e.otherCursor.style.display="none",n?(e.selectionDiv.style.display="none",Mt(t,!1),e.selectionElements=[]):Wt(t),Ot(t)}function Ot(t){const e=t.display,n=Gt(t,t.view.sel.head,"div");if(t.options.renderLine){const o=t.getOffsetPos();e.inputDiv.style.top="".concat(o.top+n.top,"px"),e.inputDiv.style.left="".concat(o.left+n.left,"px")}else if(l.a.contains(document.body,e.wrapper)){const t=e.wrapper.getBoundingClientRect(),o=e.lineDiv.getBoundingClientRect(),i=l()(e.wrapper).offset(),r=Math.max(0,Math.min(e.wrapper.clientHeight-10,n.top+o.top-t.top)),s=Math.max(0,Math.min(e.wrapper.clientWidth-10,n.left+o.left-t.left));l()(e.inputDiv).offset({left:i.left+s,top:i.top+r})}}function At(t){let e=t.display,n=Gt(t,t.view.sel.head,"div",null,null,!0);e.cursor.style.left="".concat(n.left,"px"),e.cursor.style.top="".concat(n.top,"px"),e.cursor.style.height="".concat(Math.max(0,n.bottom-n.top)*t.options.cursorHeight,"px"),e.cursor.style.display="",n.other?(e.otherCursor.style.display="",e.otherCursor.style.left="".concat(n.other.left,"px"),e.otherCursor.style.top="".concat(n.other.top,"px"),e.otherCursor.style.height="".concat(.85*(n.other.bottom-n.other.top),"px")):e.otherCursor.style.display="none"}function Wt(t){let e=t.display,n=t.view.doc,o=t.view.sel;const i=document.createDocumentFragment();let r=e.lineSpace.offsetWidth,l=Bt(t.display,!0),s=null,c=!1;const a=[];function u(t,e,n,o){c||(e<0&&(e=0),a.push({left:t,top:e,width:n,bottom:o}))}function h(t){return t.descenderBottom||t.bottom}function f(){a.sort((t,e)=>t.top-e.top);for(let t=0;t<a.length;++t){const e=a[t];let n=e.left,o=e.top,l=e.width,c=e.bottom;s&&o<s&&(o=s),i.appendChild(oi("div",null,"CodeMirror-selected","position: absolute; left: ".concat(n,"px; top: ").concat(o,"px; width: ").concat(null==l?r-n:l,"px; height: ").concat(c-o,"px"))),(!s||c>s)&&(s=c)}}const d=[];function p(e,o,i,s){const a=bo(n,e);let f=a.text.length,p=s?1/0:-1/0;function g(n){return n<0&&(n=0),Yt(t,{line:e,ch:n},"div",a)}const m=So(a),y=o||0,v=null==i?f:i;if(c=!1,a.elements)for(let t=0;t<a.elements.length;++t){const e=a.elements[t];e.isWidget&&e.from>=y&&e.to<=v&&(d.push(e),e.from===y&&e.to===v&&(c=!0))}return yi(m,y,v,(t,e,n)=>{const c=g("rtl"==n?e-1:t),a=g("rtl"==n?t:e-1);let d=c.left,m=a.right;if(a.top-c.top>3){const t=c.bottom;u(d,c.top,null,t),d=l,t<a.top&&u(d,t,null,a.top)}let y=!1;null==i&&e==f&&(m=r,y=!0),null==o&&0===t&&(d=l),p=s?Math.min(a.top,p):Math.max(a.bottom,p),d<l+1&&(d=l),u(d,a.top,m-d,y?a.bottom:h(a))}),p}if(o.from.line==o.to.line)p(o.from.line,o.from.ch,o.to.ch);else{const i=bo(n,o.from.line);let r,s,c=i,a=[o.from.line,o.from.ch];for(;r=_n(c);){const t=r.find();if(a.push(t.from.ch,t.to.line,t.to.ch),t.to.line==o.to.line){a.push(o.to.ch),s=!0;break}c=bo(n,t.to.line)}if(s)for(let t=0;t<a.length;t+=3)p(a[t],a[t+1],a[t+2]);else{let r,s,c=bo(n,o.to.line);(r=o.from.ch||0===o.from.ch?p(o.from.line,o.from.ch,null,!1):Lo(t,i)-e.viewOffset)<(s=o.to.ch?p(o.to.line,null,o.to.ch,!0):Lo(t,c)-e.viewOffset)&&u(l,r,null,s)}}f(),ri(e.selectionDiv,i),Mt(t,!1),e.selectionElements=d,Mt(t,!0),e.selectionDiv.style.display=""}function Et(t){const e=t.display;clearInterval(e.blinker);let n=!0;e.cursor.style.visibility=e.otherCursor.style.visibility="",e.blinker=setInterval(()=>{e.cursor.offsetHeight&&(e.cursor.style.visibility=e.otherCursor.style.visibility=(n=!n)?"":"hidden")},t.options.cursorBlinkRate)}function Ht(t,e){if(t.view.frontier<t.display.showingTo){let n=t.view,o=n.doc;o.iter(n.frontier+1,Math.min(o.size,t.display.showingTo+500),t=>{t.frontier=-1}),t.view.highlight.set(e,Zo(Pt,t))}}function Dt(t,e){let n=t.view,o=n.doc;if(n.frontier>=t.display.showingTo)return!1;const i=+new Date+t.options.workTime;let r,l=n.frontier,s=null,c=[];return o.iter(n.frontier,Math.min(o.size,t.display.showingTo+500),o=>{let a=!1;for(;o.frontier<o.text.length;){if(+new Date>i)return e||Ht(t,t.options.workDelay),!0;s||(s=Ln(n.mode,zt(t,l))),n.frontier>=t.display.showingFrom?eo(t,o,s)&&(r&&r.end==n.frontier?r.end++:c.push(r={start:n.frontier,end:n.frontier+1})):oo(t,o,s),a=!0}o.frontier==o.text.length&&++n.frontier,a||(s=null),l++}),c}function Pt(t){const e=Dt(t);e&&e.length&&(oe(t,function(){for(let t=0;t<e.length;++t)ie(this,e[t].start,e[t].end)})(),Fo(t,"linesprocessed",e))}function It(t,e){let n,o,i=t.view.doc;for(let r=e,l=e-100;r>l;--r){if(0===r)return 0;const e=bo(i,r-1);if(e.stateAfter)return r;const l=Uo(e.text,null,t.options.tabSize);(null==o||n>l)&&(o=r-1,n=l)}return o}function zt(t,e){const n=t.view;let o=It(t,e),i=o&&bo(n.doc,o-1).stateAfter;return i=i?Ln(n.mode,i):Sn(n.mode),n.doc.iter(o,e,r=>{oo(t,r,i);const l=o==e-1||o%5==0||o>=n.showingFrom&&o<n.showingTo;r.stateAfter=l?Ln(n.mode,i):null,++o}),i}function Rt(t,e){return zt(t,Co(e))}function Ft(t){return t.lineSpace.offsetTop}function Bt(t,e){const n=ri(t.measure,oi("pre"));return e&&(n.style["text-align"]="left"),n.appendChild(oi("span","x")).offsetLeft}function Vt(t,e,n,o){o=o||_t(t,e);let i,r=-1;for(var l=n;;l+=r){if(l>=o.length&&r>0)return{left:0,right:0,top:0,bottom:0,charTop:0,charBottom:0,lineIndex:0};if(i=o[l])break;r<0&&0===l&&(r=1)}return{left:l<n?i.right:i.left,right:l>n?i.left:i.right,top:i.top,bottom:i.bottom,charTop:i.charTop,charBottom:i.charBottom,descenderBottom:i.descenderBottom,lineIndex:i.lineIndex}}function Kt(t){return!!t&&(t===document.documentElement||Kt(t.parentElement))}function _t(t,e){if(!e.measureCache){const n=jt(t,e);return Kt(t.display.lineDiv)&&i.a.all(n,t=>t&&t.bottom!==t.top)&&n.length&&(e.measureCache=n),n}return e.measureCache}function jt(t,e){if(t.options.renderLine)return[];let n,o,i=t.display,r=qo(e.text.length),s=null;if(io(t,e,r,t=>{s=t}),!s)return[];if(e.text&&e.text.length<r.length&&r.splice(e.text.length),H&&!D&&!t.options.lineWrapping&&s.childNodes.length>100){const t=document.createDocumentFragment();let e,i=10,r=s.childNodes.length;for(n=0,e=Math.ceil(r/i);n<e;++n){const e=oi("div",null,null,"display: inline-block");for(o=0;o<i&&r;++o)e.appendChild(s.firstChild),--r;t.appendChild(e)}s.appendChild(t)}function c(t){let e=!0,n=!0;l()(t).hasClass("cm-character")&&(e=n=!1,t.parentNode.firstChild==t&&(e=!0),t.parentNode.lastChild==t&&(n=!0),t=t.parentNode);const o=parseInt(t.style["margin-left"]||"0",10),i=parseInt(t.style["margin-right"]||"0",10);return{left:e?o:0,right:n?i:0}}ri(i.measure,s);const a=i.lineDiv.getBoundingClientRect();let u,h=[],f=qo(e.text.length),d=s.offsetHeight,p=0;for(n=0;n<r.length;++n)if(u=r[n]){const t=u.getBoundingClientRect(),e=c(u,t);let i=Math.max(0,t.top-a.top),r=Math.min(t.bottom-a.top,d);for(o=0;o<h.length;o+=2){let t=h[o],e=h[o+1];if(!(t>r||e<i)&&(t<=i&&e>=r||i<=t&&r>=e||Math.min(r,e)-Math.max(i,t)>=r-i>>1)){h[o]=Math.min(i,t),h[o+1]=Math.max(r,e);break}}o==h.length&&h.push(i,r),f[n]={left:t.left-a.left-Math.ceil((e.left+p)/2),right:t.right-a.left+e.right/2,top:o,charTop:i,charBottom:r,lineIndex:u.lineIndex},f.length&&f[n-1]&&(f[n-1].right=Math.ceil(f[n-1].right+e.left/2)),p=e.right}for(r.length&&f[r.length-1]&&(f[r.length-1].right=Math.ceil(f[r.length-1].right)),n=0;n<f.length;++n)if(u=f[n]){const t=u.top;u.top=h[t],u.bottom=h[t+1]}return f}function Ut(t){const e=t.view.doc;t.measureNodeCache={},t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.view.maxLineChanged=!0,e.iter(0,e.size,t=>{t.measureCache=null})}function Xt(t,e,n,o){if(e.widgets)for(let t=0;t<e.widgets.length;++t)if(e.widgets[t].above){const o=e.widgets[t].node.offsetHeight;n.top+=o,n.bottom+=o,n.charTop+=o,n.charBottom+=o,null!=n.descenderBottom&&(n.descenderBottom+=o)}if("line"===o)return n;o||(o="local");let i=Lo(t,e);if("local"!==o&&(i-=t.display.viewOffset),"page"===o){const e=t.display.lineSpace.getBoundingClientRect();i+=e.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);const o=e.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);n.left+=o,n.right+=o}return n.top+=i,n.bottom+=i,n.charTop+=i,n.charBottom+=i,null!=n.descenderBottom&&(n.descenderBottom+=i),n}function Yt(t,e,n,o){return o||(o=bo(t.view.doc,e.line)),Xt(t,o,Vt(t,o,e.ch),n)}function Gt(t,e,n,o,i,r){function l(e,l){const s=Vt(t,o,e,i);if(l?s.left=s.right:s.right=s.left,r){const n=e>0&&s.left>0?Vt(t,o,e-1,i):s;n.lineIndex===s.lineIndex?(s.top=n.charTop,s.bottom=n.charBottom):(s.top=s.charTop,s.bottom=s.charBottom)}return Xt(t,o,s,n)}o=o||bo(t.view.doc,e.line),i||(i=_t(t,o));let s=So(o),c=e.ch;if(!s)return l(c);let a,u,h=s[0].level;for(let t=0;t<s.length;++t){var f,d,p=s[t],g=p.level%2;if(p.from<c&&p.to>c)return l(c,g);let e=g?p.to:p.from,n=g?p.from:p.to;if(e==c)d=t&&p.level<(f=s[t-1]).level?l(f.level%2?f.from:f.to-1,!0):l(g&&p.from!=p.to?c-1:c),g==h?a=d:u=d;else if(n==c){if(f=t<s.length-1&&s[t+1],!g&&f&&f.from==f.to)continue;d=f&&p.level<f.level?l(f.level%2?f.to-1:f.from):l(g?c:c-1,!0),g==h?a=d:u=d}}return h&&!c&&(u=l(s[0].to-1)),a?(u&&(a.other=u),a):u}function Jt(t,e,n){const o=t.view.doc;if((n+=t.display.viewOffset)<0)return{line:0,ch:0,outside:!0};let i=ko(o,n);if(i>=o.size)return{line:o.size-1,ch:bo(o,o.size-1).text.length};for(e<0&&(e=0);;){const r=bo(o,i),l=qt(t,r,i,e,n),s=_n(r);if(!s||l.ch!=xi(r))return l;i=s.find().to.line}}function $t(t,e,n,o){if(n&&n.measureCache&&n.measureCache.length){const t=n.measureCache,r=i.a.sortedIndex(t,{left:e,lineIndex:o},t=>1e6*t.lineIndex+t.left);let l;for(l=0;l>=(r>0?-1:0);--l){const e=r+l;if((e<t.length?t[e]:i.a.last(t)).lineIndex===o)return{line:Co(n),ch:e}}}return null}function qt(t,e,n,o,i){const r=i-Lo(t,e);let l=!1,s=t.display.wrapper.clientWidth;const c=_t(t,e);function a(o){const i=Gt(t,{line:n,ch:o},"line",e,c);return l=!0,r>i.bottom?Math.max(0,i.left-s):r<i.top?i.left+s:(l=!1,i.left)}let u=So(e),h=e.text.length,f=bi(e),d=xi(e);const p=c[0]&&c[0].left||0;let g=Bt(t.display,!1)+p,m=a(d);if(o>m)return{line:n,ch:d,outside:l};for(;;){if(u?d==f||d==Li(e,f,1):d-f<=1){const i=o-g<m-o;let s=i?f:d;const a=Gt(t,{line:n,ch:s},"line",e,c);for((r<a.top||r>a.bottom)&&(s=i?d:f);ni.test(e.text.charAt(s));)++s;return{line:n,ch:s,after:i,outside:l}}let i=Math.ceil(h/2),s=f+i;if(u){s=f;for(let t=0;t<i;++t)s=Li(e,s,1)}const p=a(s);p>o?(d=s,m=p,l&&(m+=1e3),h-=i):(f=s,g=p,h=i)}}let Zt;function Qt(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Zt){Zt=oi("pre");for(let t=0;t<49;++t)Zt.appendChild(document.createTextNode("x")),Zt.appendChild(oi("br"));Zt.appendChild(document.createTextNode("x"))}ri(t.measure,Zt);const e=Zt.offsetHeight/50;return e>3&&(t.cachedTextHeight=e),ii(t.measure),e||1}function te(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;const e=oi("span","x"),n=oi("pre",[e]);ri(t.measure,n);const o=e.offsetWidth;return o>2&&(t.cachedCharWidth=o),o||10}function ee(t){t.curOp?++t.curOp.depth:t.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,id:++t.nextOpId}}function ne(t){const e=t.curOp;if(!e||--e.depth)return;t.curOp=null;let n=t.view,o=t.display;if(e.updateMaxLine&&ht(n),n.maxLineChanged&&!t.options.lineWrapping){const e=Vt(t,n.maxLine,n.maxLine.text.length).right;let i=t.options.extraScrollerWidth;void 0!==i&&null!==i||(i=Ko),o.sizer.style.minWidth="".concat(e+3+i,"px"),n.maxLineChanged=!1;const r=Math.max(0,o.sizer.offsetLeft+o.sizer.offsetWidth-o.scroller.clientWidth);r<n.scrollLeft&&Se(t,Math.min(o.scroller.scrollLeft,r),!0)}let i,r,l=0,s=0;function c(){if(++s>=l){!r&&e.selectionChanged&&Nt(t),i&&sn(t),e.selectionChanged&&Et(t),n.focused&&e.updateInput&&ce(t,e.userSelChange),e.textChanged&&Fo(t,"change",t,e.textChanged),e.selectionChanged&&Fo(t,"cursorActivity",t,e.textChanged);for(let n=0;n<e.delayedCallbacks.length;++n)e.delayedCallbacks[n](t)}}if(t.options.disableScroll&&e.changes.length&&(s>=++l-1&&e.textChanged&&Fo(t,"pre-change",t,e.textChanged),r=bt(t,e.changes,i&&i.scrollTop,c)),e.selectionChanged){const e=Gt(t,n.sel.head);i=un(t,e.left,e.top,e.left,e.bottom)}t.options.disableScroll||(e.changes.length||i&&null!=i.scrollTop)&&(++l,r=bt(t,e.changes,i&&i.scrollTop,c)),++l,c()}function oe(t,e){return function(){const n=t||this;ee(n);let o=null;try{o=e.apply(n,arguments)}finally{ne(n)}return o}}function ie(t,e,n,o){t.curOp.changes.push({from:e,to:n,diff:o})}function re(t){t.view.pollingFast||t.display.poll.set(t.options.pollInterval,()=>{se(t),t.view.focused&&re(t)})}function le(t){let e=!1;function n(){se(t)||e?(t.display.pollingFast=!1,re(t)):(e=!0,t.display.poll.set(60,n))}t.display.pollingFast=!0,t.display.poll.set(20,n)}function se(t){let e=t.display.input,n=t.display.prevInput,o=t.view,i=o.sel;if(!o.focused||pi(e)||ue(t))return!1;const r=e.value;if(r==n&&$e(i.from,i.to))return!1;const l=Math.min(n.length,r.length);let s=0;for(;s<l&&n[s]===r[s];)++s;ee(t),o.sel.shift=!1;let c=i.from,a=i.to;s<n.length?c={line:c.line,ch:c.ch-(n.length-s)}:o.overwrite&&$e(c,a)&&!t.display.pasteIncoming&&(a={line:a.line,ch:Math.min(bo(t.view.doc,a.line).text.length,a.ch+(r.length-s))});const u=r.slice(s),h=t.curOp.updateInput,f=Ue(t,c,a,di(u),"end",t.display.pasteIncoming?"paste":"input",{from:c,to:a});return t.curOp.updateInput=h,t.curOp.textTransformed&&(t.curOp.updateInput=!0),!f||r.length>1e3?e.value=t.display.prevInput="":t.display.prevInput=r,ne(t),t.display.pasteIncoming=!1,f}function ce(t,e){let n,o,i=t.view;$e(i.sel.from,i.sel.to)?e&&(t.display.prevInput=t.display.input.value=""):(t.display.prevInput="",n=gi&&(i.sel.to.line-i.sel.from.line>100||(o=t.getSelection()).length>1e3),t.display.input.value=n?"-":o||t.getSelection(),i.focused&&Jo(t.display.input)),t.display.inaccurateSelection=n}function ae(t){"nocursor"==t.options.readOnly||!H&&document.activeElement==t.display.input||(Ot(t),t.display.input.focus())}function ue(t){return t.options.readOnly||t.view.cantEdit}function he(t){const e=t.display;function n(){t.view.focused&&setTimeout(Zo(ae,t),0)}function o(e){t.options.onDragEvent&&t.options.onDragEvent(t,Oo(e))||Eo(e)}function i(){e.inaccurateSelection&&(e.prevInput="",e.inaccurateSelection=!1,e.input.value=t.getSelection(),Jo(e.input))}zo(e.scroller,"touchstart",oe(t,ye)),zo(e.scroller,"touchend",oe(t,we)),zo(e.scroller,"mousedown",e=>oe(t,be)(e)),zo(e.scroller,"dblclick",oe(t,Ao)),zo(e.lineSpace,"selectstart",t=>{fe(e,t)||Ao(t)}),E||zo(e.scroller,"contextmenu",e=>{je(t,e)}),t.options.disableScroll||(zo(e.scroller,"scroll",()=>{Le(t,e.scroller.scrollTop),Se(t,e.scroller.scrollLeft,!0),Fo(t,"scroll",t)}),zo(e.scrollbarV,"scroll",()=>{Le(t,e.scrollbarV.scrollTop)}),zo(e.scrollbarH,"scroll",()=>{Se(t,e.scrollbarH.scrollLeft)}),zo(e.scroller,"mousewheel",e=>{He(t,e)}),zo(e.scroller,"DOMMouseScroll",e=>{He(t,e)})),zo(e.scrollbarH,"mousedown",n),zo(e.scrollbarV,"mousedown",n),zo(e.wrapper,"scroll",()=>{e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),zo(window,"resize",function n(){e.cachedCharWidth=e.cachedTextHeight=null,Ut(t),e.wrapper.parentNode?bt(t,!0):Ro(window,"resize",n)}),zo(e.input,"keyup",oe(t,e=>{t.options.onKeyEvent&&t.options.onKeyEvent(t,Oo(e))||16==Po(e,"keyCode")&&(t.view.sel.shift=!1)})),zo(e.input,"input",Zo(le,t)),zo(e.input,"keydown",oe(t,Be)),zo(e.input,"keypress",oe(t,Ve)),zo(e.input,"focus",Zo(Ke,t)),zo(e.input,"blur",Zo(_e,t)),zo(e.input,"focusin",e=>Fo(t,"focusin",e)),zo(e.input,"focusout",e=>Fo(t,"focusout",e)),t.options.dragDrop&&(zo(e.scroller,"dragstart",e=>{ke(t,e)}),zo(e.scroller,"dragenter",o),zo(e.scroller,"dragover",o),zo(e.scroller,"drop",oe(t,xe))),t.options.customCopyPaste?(t.options.onPaste&&zo(e.input,"paste",t.options.onPaste),t.options.onCut&&zo(e.input,"cut",t.options.onCut),t.options.onCopy&&zo(e.input,"copy",t.options.onCopy)):(zo(e.scroller,"paste",()=>{ae(t),le(t)}),zo(e.input,"paste",()=>{e.pasteIncoming=!0,le(t)}),zo(e.input,"cut",i),zo(e.input,"copy",i)),V&&zo(e.sizer,"mouseup",()=>{document.activeElement==e.input&&e.input.blur(),ae(t)})}function fe(t,e){for(let n=Ho(e);n&&n!==t.wrapper;n=n.parentNode)if(/\bCodeMirror-(?:line)?widget\b/.test(n.className)||n.parentNode===t.sizer&&n!==t.mover)return!0}function de(t,e,n){const o=t.display;if(!n){const t=Ho(e);if(t==o.scrollbarH||t==o.scrollbarH.firstChild||t==o.scrollbarV||t==o.scrollbarV.firstChild||t==o.scrollbarFiller)return null}let i,r,l=o.lineSpace.getBoundingClientRect();try{i=e.clientX,r=e.clientY}catch(t){return null}return!i&&!r&&e.touches&&e.touches[0]&&(i=e.touches[0].clientX,r=e.touches[0].clientY),Jt(t,i-l.left,r-l.top)}let pe=!1,ge=null,me=null;function ye(t){if(this.shouldIgnoreEvent(t,this))return;const e=this,n=t.targetTouches[0];if(Wo(t),me={x:n.pageX,y:n.pageY},ge=Date.now(),e.view.focused)return Ao(t),void ve(e,n);pe=!0}function ve(t,e){if(t.shouldIgnoreEvent(e))return;t.display;let n=t.view;n.sel;nn(t,tn(n.doc,de(t,e))),n.focused||Ke(t)}function we(t){if(this.shouldIgnoreEvent(t))return;const e=this,n=t.changedTouches[0],o=Math.abs(n.pageX-me.x)<5&&Math.abs(n.pageY-me.y)<5,i=Date.now()-ge<Q;o&&i&&ve(e,n)}function be(t){if(this.shouldIgnoreEvent(t,this))return;if(pe)return pe=!1,Wo(t),void Ao(t);let e=this,n=e.display,o=e.view,i=o.sel,r=o.doc;if(i.shift=Po(t,"shiftKey"),fe(n,t))return void(I||(n.scroller.draggable=!1,setTimeout(()=>{n.scroller.draggable=!0},100)));if(Ce(e,t))return;const l=de(e,t);switch(e.selecting=!0,Do(t)){case 3:return void(E&&je.call(e,e,t));case 2:return l&&nn(e,l),setTimeout(Zo(ae,e),20),void Ao(t)}if(!l)return void(Ho(t)==n.scroller&&Ao(t));const s=+new Date,{pos:c}=tt;if(tt.count>0&&s<tt.time+Z&&$e(c,l)||(tt.count=0,tt.selection=null),tt.count++,tt.mode=null,tt.pos=l,tt.time=s,setTimeout(()=>ae(this),20),e.getMode().isMath&&c&&$e(c,l)){if(tt.mode=null,tt.count>1)return tt.selection?f(tt.selection):tt.selection=h(e,c.line,c.after?c.ch+1:c.ch),void d(e,tt.selection)}else if(tt.count>2)tt.mode=O,gn(e,l.line);else if(tt.count>1){tt.mode=A;const t=pn(bo(r,l.line).text,l);nn(e,t.from,t.to)}Ao(t);let a=l;if(e.options.dragDrop&&e.options.dragDropText&&si&&!ue(e)&&!$e(i.from,i.to)&&!qe(l,i.from)&&!qe(i.to,l)&&1==tt.count){var u=oe(e,i=>{I&&(n.scroller.draggable=!1),o.draggingText=!1,Ro(document,"mouseup",u),Ro(n.scroller,"drop",u),Math.abs(t.clientX-i.clientX)+Math.abs(t.clientY-i.clientY)<10&&(Ao(i),nn(e,l),ae(e))});return I&&(n.scroller.draggable=!0),o.draggingText=u,n.scroller.dragDrop&&n.scroller.dragDrop(),zo(document,"mouseup",u),void zo(n.scroller,"drop",u)}window.focus(),1==tt.count&&nn(e,tn(r,l)),o.focused||Ke(e);let p=i.from,g=i.to;function m(t){switch(tt.mode){case N:break;case O:p=tn(r,p),g=tn(r,g),qe(t,p)?nn(e,g,tn(r,{line:t.line,ch:0})):nn(e,p,tn(r,{line:t.line+1,ch:0}));break;case A:const n=pn(bo(r,t.line).text,t);p=tn(r,p),g=tn(r,g),qe(t,p)?nn(e,n.from,g):nn(e,p,n.to);break;default:nn(e,tn(r,l),t)}}const y=n.wrapper.getBoundingClientRect();let v=0;function w(t){const i=++v,l=de(e,t,!0);if(l)if($e(l,a)){const o=t.clientY<y.top?-20:t.clientY>y.bottom?20:0;o&&setTimeout(oe(e,()=>{v==i&&(n.scroller.scrollTop+=o,w(t))}),50)}else{o.focused||Ke(e),a=l,m(l);const s=pt(e,n,r);(l.line>=s.to||l.line<s.from)&&setTimeout(oe(e,()=>{v==i&&w(t)}),150)}}function b(t){v=1/0;const n=de(e,t);n&&m(n),Ao(t),ae(e),Ro(document,"mousemove",x),Ro(document,"mouseup",C),e.selecting=!1}var x=oe(e,t=>{H||Do(t)?w(t):b(t)}),C=oe(e,b);zo(document,"mousemove",x),zo(document,"mouseup",C)}function xe(t){const e=this;if(e.options.onDragEvent&&e.options.onDragEvent(e,Oo(t)))return;Ao(t);let n,o=de(e,t,!0),i=t.dataTransfer.files;if(o&&!ue(e))if(i&&i.length&&window.FileReader&&window.File){let t=i.length,r=0;n=new Array(t);const l=function(i,l){const s=new FileReader;s.onload=function(){n[l]=s.result,++r==t&&(o=tn(e.view.doc,o),oe(e,()=>{const t=Je(e,n.join(""),o,o,"paste");on(e,o,t)})())},s.readAsText(i)};for(let e=0;e<t;++e)l(i[e],e)}else{if(e.view.draggingText&&!qe(o,e.view.sel.from)&&!qe(e.view.sel.to,o))return e.view.draggingText(t),void(H&&setTimeout(Zo(ae,e),50));try{if(n=t.dataTransfer.getData("Text")){let t=e.view.sel.from,i=e.view.sel.to;on(e,o,o),e.view.draggingText&&Je(e,"",t,i,"paste"),e.replaceSelection(n,null,"paste"),ae(e),Ke(e)}}catch(t){}}}function Ce(t,e){const n=t.display;let o,i;try{o=e.clientX,i=e.clientY}catch(t){return!1}if(o>=Math.floor(n.gutters.getBoundingClientRect().right))return!1;if(Ao(e),!Vo(t,"gutterClick"))return!0;const r=n.lineDiv.getBoundingClientRect();if(i>r.bottom)return!0;i-=r.top-n.viewOffset;for(let r=0;r<t.options.gutters.length;++r){const l=n.gutters.childNodes[r];if(l&&l.getBoundingClientRect().right>=o){Bo(t,t,"gutterClick",t,ko(t.view.doc,i),t.options.gutters[r],e);break}}return!0}function ke(t,e){const n=t.getSelection();e.dataTransfer.setData("Text",n),e.dataTransfer.setDragImage&&!B&&e.dataTransfer.setDragImage(oi("img"),0,0)}function Le(t,e){Math.abs(t.view.scrollTop-e)<2||(t.view.scrollTop=e,E||bt(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),E&&bt(t,[]))}function Se(t,e,n){(n?e==t.view.scrollLeft:Math.abs(t.view.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.view.scrollLeft=e,gt(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}let Te,Me,Ne,Oe,Ae,We=0,Ee=null;function He(t,e){let n=e.wheelDeltaX,o=e.wheelDeltaY;null==n&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(n=e.detail),null==o&&e.detail&&e.axis==e.VERTICAL_AXIS?o=e.detail:null==o&&(o=e.wheelDelta);const i=t.display.scroller;if(o&&Y&&I)for(let n=e.target;n!=i;n=n.parentNode)if(n.lineObj){t.display.currentWheelTarget=n;break}if(n&&!E&&!F&&null!=Ee)return o&&Le(t,Math.max(0,Math.min(i.scrollTop+o*Ee,i.scrollHeight-i.clientHeight))),Se(t,Math.max(0,Math.min(i.scrollLeft+n*Ee,i.scrollWidth-i.clientWidth))),Ao(e),void(Ne=null);if(o&&null!=Ee){const e=o*Ee;let n=t.view.scrollTop,i=n+t.display.wrapper.clientHeight;e<0?n=Math.max(0,n+e-50):i=Math.min(t.view.doc.height,i+e+50),bt(t,[],{top:n,bottom:i})}We<20&&(null==Ne?(Ne=i.scrollLeft,Oe=i.scrollTop,Te=n,Me=o,setTimeout(()=>{if(null==Ne)return;const t=i.scrollLeft-Ne,e=i.scrollTop-Oe,n=e&&Me&&e/Me||t&&Te&&t/Te;Ne=Oe=null,n&&(Ee=(Ee*We+n)/(We+1),++We)},200)):(Te+=n,Me+=o))}function De(t,e,n){if("string"==typeof e&&!(e=Tn[e]))return!1;t.display.pollingFast&&se(t)&&(t.display.pollingFast=!1);let o=t.view,i=o.sel.shift;try{ue(t)&&(o.suppressEdits=!0),n&&(o.sel.shift=!1),e(t)}catch(t){if(t!=_o)throw t;return!1}finally{o.sel.shift=i,o.suppressEdits=!1}return!0}function Pe(t){const e=t.view.keyMaps.slice(0);return e.push(t.options.keyMap),t.options.extraKeys&&e.unshift(t.options.extraKeys),e}function Ie(t,e){let n=Nn(t.options.keyMap),o=n.auto;clearTimeout(Ae),o&&!An(e)&&(Ae=setTimeout(()=>{Nn(t.options.keyMap)==n&&(t.options.keyMap=o.call?o.call(null,t):o)},50));let i=mi[Po(e,"keyCode")],r=!1;const l=Y&&(F||z);if(null==i||e.altGraphKey)return!1;Po(e,"altKey")&&(i="Alt-".concat(i)),Po(e,l?"metaKey":"ctrlKey")&&(i="Ctrl-".concat(i)),Po(e,l?"ctrlKey":"metaKey")&&(i="Cmd-".concat(i));let s=!1;function c(){s=!0}const a=Pe(t);return r=Po(e,"shiftKey")?On("Shift-".concat(i),a,e=>De(t,e,!0),c)||On(i,a,e=>{if("string"==typeof e&&/^go[A-Z]/.test(e))return De(t,e)},c):On(i,a,e=>De(t,e),c),s&&(r=!1),r&&(Ao(e),Et(t),P&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),r}function ze(t,e,n){const o=On("'".concat(n,"'"),Pe(t),e=>De(t,e,!0));return o&&(Ao(e),Et(t)),o}H?Ee=-.53:E?Ee=15:R?Ee=-.7:B&&(Ee=-1/3);let Re,Fe=null;function Be(t){const e=this;if(e.view.focused||Ke(e),H&&27===t.keyCode&&Ao(t),e.options.onKeyEvent&&e.options.onKeyEvent(e,Oo(t)))return;const n=Po(t,"keyCode");e.view.sel.shift=16==n||Po(t,"shiftKey");const o=Ie(e,t);F&&(Fe=o?n:null,o||88!==n||gi||!Po(t,Y?"metaKey":"ctrlKey")||e.replaceSelection("")),o&&e.options.stopKeyEvents&&Eo(t)}function Ve(t){const e=this;if(e.options.stopKeyEvents&&t.stopPropagation&&t.stopPropagation(),e.options.onKeyEvent&&e.options.onKeyEvent(e,Oo(t)))return;let n=Po(t,"keyCode"),o=Po(t,"charCode");if(F&&n==Fe)return Fe=null,void Ao(t);if((F&&(!t.which||t.which<10)||V)&&Ie(e,t))return;const i=String.fromCharCode(null==o?n:o);this.options.electricChars&&this.view.mode.electricChars&&this.options.smartIndent&&!ue(this)&&this.view.mode.electricChars.indexOf(i)>-1&&setTimeout(oe(e,()=>{hn(e,e.view.sel.to.line,"smart")}),75),ze(e,t,i)||le(e)}function Ke(t,e){"nocursor"!=t.options.readOnly&&(t.view.focused&&!e||(Fo(t,"focus",t),t.view.focused=!0,t.display.scroller.className=t.display.scroller.className.replace(" CodeMirror-not-focused"," CodeMirror-focused"),ce(t,!0),Nt(t)),re(t),Et(t))}function _e(t){t.view.focused&&(Fo(t,"blur",t),t.view.focused=!1,t.display.scroller.className=t.display.scroller.className.replace(" CodeMirror-focused"," CodeMirror-not-focused")),clearInterval(t.display.blinker),setTimeout(()=>{t.view.focused||(t.view.sel.shift=!1)},150)}function je(t,e){let n=t.display,o=t.view.sel,i=de(t,e),r=n.scroller.scrollTop;if(!i||F)return;($e(o.from,o.to)||qe(i,o.from)||!qe(i,o.to))&&oe(t,on)(t,i,i);const l=n.input.style.cssText;function s(){if(n.inputDiv.style.position="relative",n.input.style.cssText=l,P&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=r),re(t),null!=n.input.selectionStart){clearTimeout(Re);let e=n.input.value=" ".concat($e(o.from,o.to)?"":n.input.value),i=0;n.prevInput=" ",n.input.selectionStart=1,n.input.selectionEnd=e.length,Re=setTimeout(function e(){" "==n.prevInput&&0===n.input.selectionStart?oe(t,Tn.selectAll)(t):i++<10?Re=setTimeout(e,500):ce(t)},200)}}n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: ".concat(e.clientY-5,"px; left: ").concat(e.clientX-5,"px; z-index: 1000; background: white; outline: none;")+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ae(t),ce(t,!0),$e(o.from,o.to)&&(n.input.value=n.prevInput=" "),E?(Eo(e),zo(window,"mouseup",function t(){Ro(window,"mouseup",t),setTimeout(s,20)})):setTimeout(s,50)}function Ue(t,e,n,o,i,r){const l=$&&Bn(t.view.doc,e,n);if(!l)return Xe(t,e,n,o,i,r);for(let e=l.length-1;e>=1;--e)Xe(t,l[e].from,l[e].to,[""],r);return l.length?Xe(t,l[0].from,l[0].to,o,i,r):void 0}function Xe(t,e,n,o,i,r){if(t.view.suppressEdits)return null;let l=e,s=n,c=o;const{acceptContent:a}=t.options,u=t.view.mode.transformInput;if(a){const e=t.getValue(),n=t.indexFromPos(l),o=t.indexFromPos(s);if(!a(e.slice(0,n)+c+e.slice(o)))return null}let h=t.view,f=[],d=null,p="";h.doc.iter(l.line,s.line+1,t=>{f.push(Jn(t.text,t.markedSpans)),null===d&&(d=t.text),p=t.text});let g=h.sel.from,m=h.sel.to;if(u){const t=(d||"").substr(0,l.ch),e=p.substr(s.ch);if(1===c.length){const{text:n,eatenPrefix:o,eatenSuffix:i}=M(c[0],t,e,u);c=[n],l={line:l.line,ch:l.ch-o},s={line:s.line,ch:s.ch+i}}else if(c.length>1){const{text:n,eatenPrefix:o}=M(c[0],t,"",u),{text:i,eatenSuffix:r}=M(c[c.length-1],"",e,u);c=[n,...c.slice(1,c.length-1),i],l={line:l.line,ch:l.ch-o},s={line:s.line,ch:s.ch+r}}}const y=Ge(t,l,s,Fn(Gn(f[0]),Gn(Go(f)),l.ch,s.ch,c),i,r);return h.history&&Mo(t,l.line,c.length,f,r,g,m,h.sel.from,h.sel.to),y}function Ye(t,e){let n=t.view.doc,o=t.view.history;const i=("undo"==e?o.done:o.undone).pop();if(!i)return;const r={events:[],fromBefore:i.fromAfter,toBefore:i.toAfter,fromAfter:i.fromBefore,toAfter:i.toBefore};for(let c=i.events.length-1;c>=0;c-=1){o.dirtyCounter+="undo"==e?-1:1;const a=i.events[c];var l=[],s=a.start+a.added;n.iter(a.start,s,t=>{l.push(Jn(t.text,t.markedSpans))}),r.events.push({start:a.start,added:a.old.length,old:l});const u=c?null:{from:i.fromBefore,to:i.toBefore};Ge(t,{line:a.start,ch:0},{line:s-1,ch:bo(n,s-1).text.length},a.old,u,e)}("undo"==e?o.undone:o.done).push(r)}function Ge(t,e,n,o,i,r){let l=t.view,s=l.doc,c=t.display;if(l.suppressEdits)return;let a,u,h,f=n.line-e.line,d=bo(s,e.line),p=bo(s,n.line),g=!1,m=e.line;t.options.lineWrapping||(m=Co(jn(s,d)),s.iter(m,n.line+1,t=>{if(ut(s,t)==l.maxLineLength)return g=!0,!0}));const y=Go(o),v=t.options.avoidMeasurement?0:Qt(c);if(0===e.ch&&0===n.ch&&""===Yn(y)){for(h=[],a=0,u=o.length-1;a<u;++a)h.push(Zn(t,Yn(o[a]),Gn(o[a]),v));Qn(t,p,p.text,Gn(y)),f&&s.remove(e.line,f,t),h.length&&s.insert(e.line,h)}else if(d==p)if(1==o.length)Qn(t,d,d.text.slice(0,e.ch)+Yn(o[0])+d.text.slice(n.ch),Gn(o[0]),e.ch);else{for(h=[],a=1,u=o.length-1;a<u;++a)h.push(Zn(t,Yn(o[a]),Gn(o[a]),v));h.push(Zn(t,Yn(y)+d.text.slice(n.ch),Gn(y),v)),Qn(t,d,d.text.slice(0,e.ch)+Yn(o[0]),Gn(o[0])),s.insert(e.line+1,h)}else if(1==o.length)Qn(t,d,d.text.slice(0,e.ch)+Yn(o[0])+p.text.slice(n.ch),Gn(o[0]),e.ch),s.remove(e.line+1,f,t);else{for(h=[],Qn(t,d,d.text.slice(0,e.ch)+Yn(o[0]),Gn(o[0])),Qn(t,p,Yn(y)+p.text.slice(n.ch),Gn(y)),a=1,u=o.length-1;a<u;++a)h.push(Zn(t,Yn(o[a]),Gn(o[a]),v));f>1&&s.remove(e.line+1,f-1,t),s.insert(e.line+1,h)}if(t.options.lineWrapping){if(!t.options.renderLine){const t=Math.max(5,c.scroller.clientWidth/te(c)-3);s.iter(e.line,e.line+o.length,e=>{if(0===e.height)return;const n=(Math.ceil(e.text.length/t)||1)*v;n!=e.height&&xo(e,n)})}}else s.iter(m,e.line+o.length,t=>{const e=ut(s,t);e>l.maxLineLength&&(l.maxLine=t,l.maxLineLength=e,l.maxLineChanged=!0,g=!1)}),g&&(t.curOp.updateMaxLine=!0);l.frontier=Math.min(l.frontier,e.line),Ht(t,400);const w=o.length-f-1;if(ie(t,e.line,n.line+1,w),Vo(t,"change")){for(a=0;a<o.length;++a)"string"!=typeof o[a]&&(o[a]=o[a].text);const i={from:e,to:n,text:o,origin:r};if(t.curOp.textChanged){for(var b=t.curOp.textChanged;b.next;b=b.next);b.next=i}else t.curOp.textChanged=i}let x=Yn(y).length+(1==o.length?e.ch:0);x<=p.transformedUntilOld+1&&(x=p.transformedUntilNew+1);let C,k,L={line:e.line+o.length-1,ch:x};if(x<=p.transformedUntilOld+1&&(e=L),i&&"string"!=typeof i)i.from?(C=i.from,k=i.to):C=k=i;else if("end"==i)C=k=L;else if("start"==i)C=k=e;else if("around"==i)C=e,k=L;else{const t=function(t){if(qe(t,e))return t;if(!qe(n,t))return L;const o=t.line+w;let i=t.ch;return t.line==n.line&&(i+=Yn(y).length-(n.ch-(n.line==e.line?e.ch:0))),{line:o,ch:i}};C=t(l.sel.from),k=t(l.sel.to)}return on(t,C,k,null,!0),L}function Je(t,e,n,o,i){if(o||(o=n),qe(o,n)){const t=o;o=n,n=t}return Ue(t,n,o,di(e),null,i)}function $e(t,e){return t.line==e.line&&t.ch==e.ch}function qe(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function Ze(t){return{line:t.line,ch:t.ch}}function Qe(t,e){return Math.max(0,Math.min(e,t.size-1))}function tn(t,e){if(e.line<0)return{line:0,ch:0};if(e.line>=t.size)return{line:t.size-1,ch:bo(t,t.size-1).text.length};let n=e.ch,o=bo(t,e.line).text.length;return null==n||n>o?{line:e.line,ch:o}:n<0?{line:e.line,ch:0}:e}function en(t,e){return e>=0&&e<t.size}function nn(t,e,n,o){const i=t.view.sel;if(i.shift||i.extend){let r=i.anchor;if(n){const t=qe(e,r);t!=qe(n,r)?(r=e,e=n):t!=qe(e,n)&&(e=n)}on(t,r,e,o)}else on(t,e,n||e,o);t.curOp.userSelChange=!0}function on(t,e,n,o,i){t.view.goalColumn=null;const r=t.view.sel;if(!i&&$e(e,r.anchor)||(e=ln(t,e,o,"push"!=i)),!i&&$e(n,r.head)||(n=ln(t,n,o,"push"!=i)),$e(r.anchor,e)&&$e(r.head,n))return;r.anchor=e,r.head=n;const l=qe(n,e);r.from=l?n:e,r.to=l?e:n,t.curOp.updateInput=!0,t.curOp.selectionChanged=!0}function rn(t){on(t,t.view.sel.from,t.view.sel.to,null,"push")}function ln(t,e,n,o){let i,r=t.view.doc,l=!1,s=e,c=n||1;t.view.cantEdit=!1;t:for(;;){var a,u=bo(r,s.line);if(u.markedSpans){for(i=0;i<u.markedSpans.length;++i){let h=u.markedSpans[i],f=h.marker;if((null==h.from||(f.inclusiveLeft?h.from<=s.ch:h.from<s.ch))&&(null==h.to||(f.inclusiveRight?h.to>=s.ch:h.to>s.ch))){if(o&&f.clearOnEnter){(a||(a=[])).push(f);continue}if(!f.atomic)continue;let i=f.find()[c<0?"from":"to"];if($e(i,s)&&(i.ch+=c,i.ch<0?i=i.line?tn(r,{line:i.line-1}):null:i.ch>u.text.length&&(i=i.line<r.size-1?{line:i.line+1,ch:0}:null),!i)){if(l)return o?(t.view.cantEdit=!0,{line:0,ch:0}):ln(t,e,n,!0);l=!0,i=e,c=-c}s=i;continue t}}if(a)for(i=0;i<a.length;++i)a[i].clear()}return s}}function sn(t){W.debug("Scroll cursor into view",t);const e=t.view,n=cn(t,e.sel.head);if(!e.focused)return;if(t.options.disableScroll)return;const o=t.display;let i,r;if(t.options.renderLine){i={top:t.getOffsetPos().top-t.scrollTop},r=t.scrollHeight}else i=o.sizer.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight;let l=null;if(n.top+i.top<0?l=!0:n.bottom+i.top>r&&(l=!1),null!=l&&!j){const t="none"==o.cursor.style.display;t&&(o.cursor.style.display="",o.cursor.style.left="".concat(n.left,"px"),o.cursor.style.top="".concat(n.top-o.viewOffset,"px")),o.cursor.scrollIntoView(l),t&&(o.cursor.style.display="none")}}function cn(t,e){for(;;){let n=!1,o=Gt(t,e);const i=un(t,o.left,o.top,o.left,o.bottom);let r=t.view.scrollTop,l=t.view.scrollLeft;if(null!=i.scrollTop&&(Le(t,i.scrollTop),Math.abs(t.view.scrollTop-r)>1&&(n=!0)),null!=i.scrollLeft&&(Se(t,i.scrollLeft),Math.abs(t.view.scrollLeft-l)>1&&(n=!0)),!n)return o}}function an(t,e,n,o,i){const r=un(t,e,n,o,i);null!=r.scrollTop&&Le(t,r.scrollTop),null!=r.scrollLeft&&Se(t,r.scrollLeft)}function un(t,e,n,o,i){if(t.options.disableScroll)return{scrollTop:0,scrollLeft:0};let r=t.display,l=Ft(r);n+=l,i+=l;let s=r.scroller.clientHeight-Ko,c=r.scroller.scrollTop,a={};const u=t.view.doc.height+2*l;let h=n<l+10,f=i+l>u-10;n<c?a.scrollTop=h?0:Math.max(0,n):i>c+s&&(a.scrollTop=(f?u:i)-s);let d=r.scroller.clientWidth-Ko,p=r.scroller.scrollLeft;e+=r.gutters.offsetWidth,o+=r.gutters.offsetWidth;const g=r.gutters.offsetWidth,m=e<g+10;return e<p+g||m?(m&&(e=0),a.scrollLeft=Math.max(0,e-10-g)):o>d+p-3&&(a.scrollLeft=o+10-d),a}function hn(t,e,n,o){const i=t.view.doc;let r;n||(n="add"),"smart"===n&&(t.view.mode.indent?r=zt(t,e):n="prev");const l=t.options.tabSize;let s,c=bo(i,e),a=Uo(c.text,null,l),u=c.text.match(/^\s*/)[0];if("smart"===n&&(s=t.view.mode.indent(r,c.text.slice(u.length),c.text))==_o){if(!o)return;n="prev"}"prev"===n?s=e?Uo(bo(i,e-1).text,null,l):0:"add"===n?s=a+t.options.indentUnit:"subtract"===n&&(s=a-t.options.indentUnit),s=Math.max(0,s);let h="",f=0;if(t.options.indentWithTabs)for(let t=Math.floor(s/l);t;--t)f+=l,h+="\t";f<s&&(h+=Yo(s-f)),h!=u&&Je(t,h,{line:e,ch:0},{line:e,ch:u.length},"input"),c.stateAfter=null}function fn(t,e,n){let o=e,i=e,r=t.view.doc;return"number"==typeof e?i=bo(r,Qe(r,e)):o=Co(e),null==o?null:n(i,o)?(ie(t,o,o+1),i):null}function dn(t,e,n,o){let i=t.view.doc,r=t.view.sel.head,l=r.line,s=r.ch,c=bo(i,l);function a(){const t=l+e;return!(t<0||t==i.size)&&(l=t,c=bo(i,t))}function u(t){const n=(o?Li:Si)(c,s,e,!0);if(null==n){if(t||!a())return!1;s=o?(e<0?xi:bi)(c):e<0?c.text.length:0}else s=n;return!0}if("char"==n)u();else if("column"==n)u(!0);else if("word"==n){let t=!1;for(;!(e<0)||u();){if(ti(c.text.charAt(s)))t=!0;else if(t){e<0&&(e=1,u());break}if(e>0&&!u())break}}return ln(t,{line:l,ch:s},e,!0)}function pn(t,e){let n=e.ch,o=e.ch;if(t){!1===e.after||o==t.length?--n:++o;const i=t.charAt(n),r=ti(i)?ti:/\s/.test(i)?t=>/\s/.test(t):t=>!/\s/.test(t)&&!ti(t);for(;n>0&&r(t.charAt(n-1));)--n;for(;o<t.length&&r(t.charAt(o));)++o}return{from:{line:e.line,ch:n},to:{line:e.line,ch:o}}}function gn(t,e){nn(t,{line:e,ch:0},tn(t.view.doc,{line:e+1,ch:0}))}et.findWordAt=pn,et.prototype={cancelAutoFocus:function(){this.autoFocusTimeout&&(clearTimeout(this.autoFocusTimeout),this.autoFocusTimeout=null)},getValue:function(t){let e=[],n=this.view.doc;return n.iter(0,n.size,t=>{e.push(t.text)}),e.join(t||"\n")},setValue:oe(null,function(t){let e=this.view.doc,n={line:0,ch:0},o=bo(e,e.size-1).text.length;Xe(this,n,{line:e.size-1,ch:o},di(t),n,n,"setValue")}),setValueAndMarkers:oe(null,function(t,e){this.setValue(t),this.addMarkers(e)}),addMarkers:oe(null,function(t){i.a.each(t,function(t){this.markText(t.from,t.to,t.marker)},this)}),flushInput:function(){const t=this.curOp,e=this.view.suppressEdits;ue(this)&&(this.view.suppressEdits=!0),se(this),this.curOp&&(this.curOp.depth=1,ne(this)),this.view.suppressEdits=e,t&&ee(this)},getSelection:function(t){return this.getRange(this.view.sel.from,this.view.sel.to,t)},replaceSelection:oe(null,function(t,e,n){const o=this.view.sel;Ue(this,o.from,o.to,di(t),e||"around",n)}),focus:function(t){window.focus(),ae(this),Ke(this,t),le(this)},blur:function(){this.display.input.blur(),_e(this)},isFocused:function(){return document.activeElement===this.display.input},getOffsetPos:function(){return!this.options.noCachedPosition&&this.offsetPos?this.offsetPos:(this.refreshPosition(),this.offsetPos)},refreshPosition:function(t){if(t)this.offsetPos=t;else{const t=l()(this.display.wrapper).offset(),e=this.display.$inputParent.offset();this.offsetPos={left:t.left-e.left,top:t.top-e.top}}},setScrollTop:function(t,e){this.scrollTop=t,this.scrollHeight=e},setOption:function(t,e){let n=this.options,o=n[t];n[t]==e&&"mode"!=t||(n[t]=e,mn.hasOwnProperty(t)&&oe(this,mn[t])(this,e,o))},getOption:function(t){return this.options[t]},getMode:function(){return this.view.mode},addKeyMap:function(t){this.view.keyMaps.unshift(t)},removeKeyMap:function(t){const e=this.view.keyMaps;for(let n=0;n<e.length;++n)if(("string"==typeof t?e[n].name:e[n])==t)return e.splice(n,1),!0},undo:oe(null,function(){Ye(this,"undo")}),redo:oe(null,function(){Ye(this,"redo")}),indentLine:oe(null,function(t,e,n){"string"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),en(this.view.doc,t)&&hn(this,t,e,n)}),indentSelection:oe(null,function(t){const e=this.view.sel;if($e(e.from,e.to))return hn(this,e.from.line,t);const n=e.to.line-(e.to.ch?0:1);for(let o=e.from.line;o<=n;++o)hn(this,o,t)}),historySize:function(){const t=this.view.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.view.history=To()},markClean:function(){this.view.history.dirtyCounter=0,this.view.history.lastOp=this.view.history.lastOrigin=null},isClean:function(){return 0===this.view.history.dirtyCounter},getHistory:function(){const t=this.view.history;function e(t){for(var e,n=0,o=[];n<t.length;++n){const i=t[n];o.push({events:e=[],fromBefore:i.fromBefore,toBefore:i.toBefore,fromAfter:i.fromAfter,toAfter:i.toAfter});for(let t=0,n=i.events;t<n.length;++t){let o=[],i=n[t];e.push({start:i.start,added:i.added,old:o});for(let t=0;t<i.old.length;++t)o.push(Yn(i.old[t]))}}return o}return{done:e(t.done),undone:e(t.undone)}},setHistory:function(t){const e=this.view.history=To();e.done=t.done,e.undone=t.undone},getTokenAtWithoutState:function(t){const e=this.view.doc;if(t=tn(e,t),this.view.frontier<=t.line)return null;const n=bo(e,t.line);if(n.tokens&&n.frontier>=0)for(let e=0;e<n.tokens.length;++e){const o=n.tokens[e];if(o.pos<t.ch&&o.pos+o.content.length>=t.ch)return{start:o.pos,end:o.pos+o.content.length,string:o.content,type:o&&o.type,token:o,expr:o.expr,state:null}}if(0===t.ch){const e=zt(this,t.line),n=e.currentExpr&&e.currentExpr.getCursor();return{start:null,end:null,string:null,type:null,token:null,expr:n&&n.length?n[n.length-1]:null,state:null}}return null},getTokenAt:function(t){const e=this.view.doc;let n=zt(this,(t=tn(e,t)).line);const o=bo(e,t.line),i=this.view.mode,r=new Wn(o.text,this.options.tabSize,o);let l,s,c=0,a=null;if(o.tokens&&o.frontier){l=o.tokens;let e=-1,u=0,h=0;for(;h<l.length&&u<t.ch&&(u+=(s=l[h]).content.length)<o.frontier;)s.stateAfter&&(e=h,r.pos=u),++h;e>=0&&(c=e+1,n=Ln(i,(a=l[e]).stateAfter),r.start=r.pos)}function u(){for(let t=0;t<l.length;++t)l[t].del();l=[]}for(l=[],s=a;r.pos<t.ch&&!r.eol();)r.start=r.pos,(s=no(this,s=i.token(r,n),r)).line=o,s.elements=o.tokens&&c<o.tokens.length?o.tokens[c].elements:[],++c;return s?{start:s.pos,end:s.pos+s.content.length,string:s.content,type:s&&s.type,token:s,cleanup:u,state:n}:{start:0,end:0,string:"",type:"",token:null,cleanup:u,state:null}},getStateAfter:function(t){const e=this.view.doc;return zt(this,(t=Qe(e,null==t?e.size-1:t))+1)},cursorCoords:function(t,e,n){let o,i=this.view.sel;return Gt(this,o=null==t?i.head:"object"==typeof t?tn(this.view.doc,t):t?i.from:i.to,e||"page",null,null,n)},charCoords:function(t,e){return Yt(this,tn(this.view.doc,t),e||"page")},coordsChar:function(t){const e=this.display.lineSpace.getBoundingClientRect();return Jt(this,t.left-e.left,t.top-e.top)},defaultTextHeight:function(){return Qt(this.display)},markText:oe(null,function(t,e,n){return Hn(this,tn(this.view.doc,t),tn(this.view.doc,e),n,"range")}),setBookmark:oe(null,function(t,e){return Hn(this,t=tn(this.view.doc,t),t,e?{replacedWith:e}:{},"bookmark")}),findMarksAt:function(t){const e=this.view.doc;let n=[],o=bo(e,(t=tn(e,t)).line).markedSpans;if(o)for(let e=0;e<o.length;++e){const i=o[e];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&n.push(i.marker)}return n},findMarksBetween:function(t,e){const n=this.view.doc;t=tn(n,t),e=tn(n,e);const o=[];let i=t.ch,r=e.line-t.line+1;return n.iter(t.line,e.line+1,t=>{const n=t.markedSpans;let l=null;if(1===r&&(l=e.ch),n)for(let t=0;t<n.length;++t){const e=n[t];(null==e.from||null===l||e.from<=l)&&(null==e.to||null===i||e.to>=i)&&o.push(e.marker)}i=null,--r}),o},getSelectedMarks:function(){return this.findMarksBetween(this.view.sel.from,this.view.sel.to)},findMarkedSpan:function(t){let e=null;const n=this.view.doc;let o=0;return n.iter(0,n.size,n=>{const i=n.markedSpans;if(i)for(let r=0;r<i.length;++r){const l=i[r];if(l.marker.replacedWith===t)return e={line:n,lineNo:o,span:l},!0}return++o,!1}),e},findInlineBox:function(t){let e=null;const n=this.view.doc;let o=0;return n.iter(0,n.size,n=>{const i=n.markedSpans;if(i)for(let r=0;r<i.length;++r){const l=i[r];if(l.marker.replacedWithBox&&l.marker.replacedWithBox.contains(t))return e={line:n,lineNo:o,span:l},!0}return++o,!1}),e},setGutterMarker:oe(null,function(t,e,n){return fn(this,t,t=>{const o=t.gutterMarkers||(t.gutterMarkers={});return o[e]=n,!n&&ei(o)&&(t.gutterMarkers=null),!0})}),clearGutter:oe(null,function(t){let e=0,n=this,o=n.view.doc;o.iter(0,o.size,o=>{o.gutterMarkers&&o.gutterMarkers[t]&&(o.gutterMarkers[t]=null,ie(n,e,e+1),ei(o.gutterMarkers)&&(o.gutterMarkers=null)),++e})}),addLineClass:oe(null,function(t,e,n){return fn(this,t,t=>{const o="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[o]){if(new RegExp("\\b".concat(n,"\\b")).test(t[o]))return!1;t[o]+=" ".concat(n)}else t[o]=n;return!0})}),removeLineClass:oe(null,function(t,e,n){return fn(this,t,t=>{const o="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",i=t[o];if(!i)return!1;if(null==n)t[o]=null;else{const e=i.replace(new RegExp("^".concat(n,"\\b\\s*|\\s*\\b").concat(n,"\\b")),"");if(e==i)return!1;t[o]=e||null}return!0})}),addLineWidget:oe(null,function(t,e,n){const o=n||{};return o.node=e,o.noHScroll&&(this.display.alignWidgets=!0),fn(this,t,t=>((t.widgets||(t.widgets=[])).push(o),o.line=t,!0)),o}),removeLineWidget:oe(null,function(t){let e=t.line.widgets,n=Co(t.line);if(null!=n){for(let n=0;n<e.length;++n)e[n]==t&&e.splice(n--,1);ie(this,n,n+1)}}),lineInfo:function(t){let e;if("number"==typeof t){if(!en(this.view.doc,t))return null;if(e=t,!(t=bo(this.view.doc,t)))return null}else if(null==(e=Co(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,n,o,i){const r=this.display;let l=(t=Gt(this,tn(this.view.doc,t))).top,s=t.left;if(e.style.position="absolute",r.sizer.appendChild(e),"over"==o)l=t.top;else if("near"==o){let n=Math.max(r.wrapper.clientHeight,this.view.doc.height),o=Math.max(r.sizer.clientWidth,r.lineSpace.clientWidth);t.bottom+e.offsetHeight>n&&t.top>e.offsetHeight&&(l=t.top-e.offsetHeight),s+e.offsetWidth>o&&(s=o-e.offsetWidth)}e.style.top="".concat(l+Ft(r),"px"),e.style.left=e.style.right="","right"==i?(s=r.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(r.sizer.clientWidth-e.offsetWidth)/2),e.style.left="".concat(s,"px")),n&&an(this,s,l,s+e.offsetWidth,l+e.offsetHeight)},lineCount:function(){return this.view.doc.size},clipPos:function(t){return tn(this.view.doc,t)},getCursor:function(t){let e,n=this.view.sel;return Ze(e=null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||!1===t?n.to:n.from)},somethingSelected:function(){return!$e(this.view.sel.from,this.view.sel.to)},setCursor:oe(null,function(t,e,n){const o=tn(this.view.doc,"number"==typeof t?{line:t,ch:e||0}:t);n?nn(this,o):on(this,o,o)}),setSelection:oe(null,function(t,e){const n=this.view.doc;on(this,tn(n,t),tn(n,e||t))}),extendSelection:oe(null,function(t,e){const n=this.view.doc;nn(this,tn(n,t),e&&tn(n,e))}),setExtending:function(t){this.view.sel.extend=t},getLine:function(t){const e=this.getLineHandle(t);return e&&e.text},iterLines:function(t){const e=this.view.doc;e.iter(0,e.size,t)},getLineHandle:function(t){const e=this.view.doc;if(en(e,t))return bo(e,t)},getLineNumber:function(t){return Co(t)},setLine:oe(null,function(t,e){en(this.view.doc,t)&&Je(this,e,{line:t,ch:0},{line:t,ch:bo(this.view.doc,t).text.length})}),removeLine:oe(null,function(t){en(this.view.doc,t)&&Je(this,"",{line:t,ch:0},tn(this.view.doc,{line:t+1,ch:0}))}),replaceRange:oe(null,function(t,e,n,o){const i=this.view.doc;return Je(this,t,e=tn(i,e),n=n?tn(i,n):e,o)}),replaceRangeAndMarkers:oe(null,function(t,e,n,o,i){const r=this.replaceRange(t,e,n,i);return this.addMarkers(o),r}),getRange:function(t,e,n){const o=this.view.doc;t=tn(o,t),e=tn(o,e);let i=t.line,r=e.line;if(i==r)return bo(o,i).text.slice(t.ch,e.ch);const l=[bo(o,i).text.slice(t.ch)];return o.iter(i+1,r,t=>{l.push(t.text)}),l.push(bo(o,r).text.slice(0,e.ch)),l.join(n||"\n")},triggerOnKeyDown:oe(null,Be),triggerEvent:function(t,e,n){n||"keydown"!==t&&"keypress"!==t&&"keyup"!==t||(n=this.display.input),e.type=t,Io(n,t,e)},execCommand:function(t){return Tn[t](this)},moveH:oe(null,function(t,e){let n=this.view.sel,o=t<0?n.from:n.to;(n.shift||n.extend||$e(n.from,n.to))&&(o=dn(this,t,e,this.options.rtlMoveVisually)),nn(this,o,o,t)}),deleteH:oe(null,function(t,e){const n=this.view.sel;$e(n.from,n.to)?Je(this,"",n.from,dn(this,t,e,!1),"delete"):Je(this,"",n.from,n.to,"delete"),this.curOp.userSelChange=!0}),moveV:oe(null,function(t,e){let n,o,r=this.view,l=r.doc,s=this.display,c=r.sel.head,a=Gt(this,c,"div"),u=a.left;if(null!=r.goalColumn&&(u=r.goalColumn),"page"==e){const e=Math.min(s.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);n=a.top+t*e}else if("line"==e){const e=bo(l,c.line);if(e.measureCache&&e.measureCache.length){o=$t(this,u,e,(c.ch<e.measureCache.length?e.measureCache[c.ch]:i.a.last(e.measureCache)).lineIndex+t)}o||(n=t>0?a.bottom+3:a.top-3)}if(!o)do{o=Jt(this,u,n),n+=5*t}while(o.outside&&(t<0?n>0:n<l.height));"page"==e&&(s.scrollbarV.scrollTop+=Yt(this,o,"div").top-a.top),nn(this,o,o,t),r.goalColumn=u}),toggleOverwrite:function(){(this.view.overwrite=!this.view.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},posFromMouse:function(t,e){return de(this,t,e)},posFromIndex:function(t){let e,n=0,o=this.view.doc;return o.iter(0,o.size,o=>{const i=o.text.length+1;if(i>t)return e=t,!0;t-=i,++n}),tn(o,{line:n,ch:e})},indexFromPos:function(t){if(t.line<0||t.ch<0)return 0;let e=t.ch;return this.view.doc.iter(0,t.line,t=>{e+=t.text.length+1}),e},scrollTo:function(t,e){null!=t&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=t),null!=e&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=e),bt(this,[])},getScrollInfo:function(){if(this.options.disableScroll&&this.options.renderLine){const t=this.getDimensions();return{left:0,top:0,height:t.height,width:t.width,clientHeight:t.height,clientWidht:t.width}}let t=this.display.scroller,e=Ko;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:function(t){"number"==typeof t&&(t={line:t,ch:0}),cn(this,t=t?tn(this.view.doc,t):this.view.sel.head)},setSize:function(t,e){function n(t){return"number"==typeof t||/^\d+$/.test(String(t))?"".concat(t,"px"):t}null!=t&&(this.display.wrapper.style.width=n(t)),null!=e&&(this.display.wrapper.style.height=n(e)),this.refresh()},on:function(t,e){zo(this,t,e)},off:function(t,e){Ro(this,t,e)},operation:function(t){return oe(this,t)()},clearCaches:function(){this.view.focused?this.refresh():Ut(this)},refresh:function(){W.debug("Refresh"),Ut(this);let t=this.view.scrollTop,e=this.view.scrollLeft;this.display.scroller.scrollHeight>t&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=t),this.display.scroller.scrollWidth>e&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=e),this.reflow()},reflow:function(t){const e=this;W.debug("Reflow");const n=this.options.reflowLine;if(n){(t?t.forEach.bind(t):this.iterLines.bind(this))(t=>{const o=n(e,t);if(o){const[e,n]=o;ro(t,e),lo(t,n)}}),xt(e),Nt(e),dt(e,e.view.doc.height),e.options.onRender&&e.options.onRender(e)}else{const t=document.activeElement;bt(this,!0),l.a.contains(this.display.wrapper,t)&&t.focus()}},getDimensions:function(){let t=null;const e=this.view.doc.height;let n=0;const o=this.view.doc;return o.iter(0,o.size,e=>{e.width>n&&(n=e.width),null===t&&(t=e.baseline)}),{width:n,height:e,baseline:t}},setElementClassName:function(t,e){if(t.changeStyle)return void t.changeStyle(e);const n=t.className;t.className=e,l.a.each(["cm-first-part","cm-last-part","cm-space"],(e,o)=>{n.indexOf(o)>=0&&(t.className+=" ".concat(o))})},getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters},selectAll:function(){oe(this,Tn.selectAll)(this)}};var mn=et.optionHandlers={},yn=et.defaults={};function vn(t,e,n,o){et.defaults[t]=e,n&&(mn[t]=o?function(t,e,o){o!=wn&&n(t,e,o)}:n)}var wn=et.Init={toString:function(){return"CodeMirror.Init"}};vn("value","",(t,e)=>{t.setValue(e)},!0),vn("mode",null,it,!0),vn("indentUnit",2,it,!0),vn("indentWithTabs",!1),vn("smartIndent",!0),vn("tabSize",4,t=>{it(t),Ut(t),bt(t,!0)},!0),vn("electricChars",!0),vn("rtlMoveVisually",!G),vn("theme","default",t=>{st(t),ct(t)},!0),vn("keyMap","default",lt),vn("extraKeys",null),vn("onKeyEvent",null),vn("onDragEvent",null),vn("lineWrapping",!1,rt,!0),vn("gutters",[],t=>{ft(t.options),ct(t)},!0),vn("lineNumbers",!1,t=>{ft(t.options),ct(t)},!0),vn("firstLineNumber",1,ct,!0),vn("lineNumberFormatter",t=>t,ct,!0),vn("showCursorWhenSelecting",!1,Nt,!0),vn("readOnly",!1,(t,e)=>{l()(t.display.wrapper).toggleClass("CodeMirror-readOnly",e),"nocursor"==e?(_e(t),t.display.input.blur()):e||ce(t,!0)}),vn("dragDrop",!0),vn("dragDropText",!0),vn("cursorBlinkRate",530),vn("cursorHeight",1),vn("workTime",100),vn("workDelay",100),vn("flattenSpans",!0),vn("pollInterval",100),vn("undoDepth",40),vn("viewportMargin",10,t=>{t.refresh()},!0),vn("tabindex",null,(t,e)=>{t.display.input.tabIndex=e||""}),vn("autofocus",null);let bn=et.modes={},xn=et.mimeModes={};et.defineMode=function(t,e){if(et.defaults.mode||"null"==t||(et.defaults.mode=t),arguments.length>2){e.dependencies=[];for(let t=2;t<arguments.length;++t)e.dependencies.push(arguments[t])}bn[t]=e},et.defineMIME=function(t,e){xn[t]=e},et.resolveMode=function(t){if("string"==typeof t&&xn.hasOwnProperty(t))t=xn[t];else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return et.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},et.getMode=function(t,e,n){e=et.resolveMode(e);const o=bn[e.name];if(!o)return et.getMode(t,"text/plain",n);const i=o(t,e,n);if(Cn.hasOwnProperty(e.name)){const t=Cn[e.name];for(const e in t)t.hasOwnProperty(e)&&(i.hasOwnProperty(e)&&(i["_".concat(e)]=i[e]),i[e]=t[e])}return i.name=e.name,i},et.defineMode("null",()=>({token:function(t){t.skipToEnd()}})),et.defineMIME("text/plain","null");var Cn=et.modeExtensions={};et.extendMode=function(t,e){const n=Cn.hasOwnProperty(t)?Cn[t]:Cn[t]={};for(const t in e)e.hasOwnProperty(t)&&(n[t]=e[t])},et.defineExtension=function(t,e){et.prototype[t]=e},et.defineOption=vn;var kn=[];function Ln(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);const n={};for(const t in e)if(e.hasOwnProperty(t)){let o=e[t];o instanceof Array&&(o=o.concat([])),n[t]=o}return n}function Sn(t,e,n){return!t.startState||t.startState(e,n)}et.defineInitHook=function(t){kn.push(t)},et.copyState=Ln,et.startState=Sn,et.innerMode=function(t,e){let n;for(;t.innerMode;)e=(n=t.innerMode(e)).state,t=n.mode;return n||{mode:t,state:e}};var Tn=et.commands={selectAll:function(t){t.setSelection({line:0,ch:0},{line:t.lineCount()-1})},killLine:function(t){let e=t.getCursor(!0),n=t.getCursor(!1),o=!$e(e,n);o||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,o?n:{line:e.line},"delete"):t.replaceRange("",e,{line:e.line+1,ch:0},"delete")},deleteLine:function(t){const e=t.getCursor().line;t.replaceRange("",{line:e,ch:0},{line:e},"delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection({line:0,ch:0})},goDocEnd:function(t){t.extendSelection({line:t.lineCount()-1})},goLineStart:function(t){t.extendSelection(Ci(t,t.getCursor().line))},goLineStartSmart:function(t){let e=t.getCursor(),n=Ci(t,e.line);const o=t.getLineHandle(n.line),i=So(o);if(i&&0!==i[0].level)t.extendSelection(n);else{const i=Math.max(0,o.text.search(/\S/)),r=e.line==n.line&&e.ch<=i&&e.ch;t.extendSelection({line:n.line,ch:r?0:i})}},goLineEnd:function(t){t.extendSelection(ki(t,t.getCursor().line))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t","end","input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("\t","end","input")},transposeChars:function(t){let e=t.getCursor(),n=t.getLine(e.line);e.ch>0&&e.ch<n.length-1&&t.replaceRange(n.charAt(e.ch)+n.charAt(e.ch-1),{line:e.line,ch:e.ch-1},{line:e.line,ch:e.ch+1})},newlineAndIndent:function(t){oe(t,()=>{t.replaceSelection("\n","end","input"),t.indentLine(t.getCursor().line,null,!0)})()},toggleOverwrite:function(t){t.toggleOverwrite()}},Mn=et.keyMap={};function Nn(t){return"string"==typeof t?Mn[t]:t}function On(t,e,n,o){function i(e){const r=(e=Nn(e))[t];if(!1===r)return o&&o(),!0;if(null!=r&&n(r))return!0;if(e.nofallthrough)return o&&o(),!0;const l=e.fallthrough;if(null==l)return!1;if("[object Array]"!=Object.prototype.toString.call(l))return i(l);for(let t=0,e=l.length;t<e;++t)if(i(l[t]))return!0;return!1}for(let t=0;t<e.length;++t)if(i(e[t]))return!0}function An(t){const e=mi[Po(t,"keyCode")];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Wn(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.line=n}function En(t,e){this.lines=[],this.type=e,this.cm=t}function Hn(t,e,n,o,i){const r=t.view.doc,l=new En(t,i);if("range"==i&&!qe(e,n))return l;if(o)for(const t in o)o.hasOwnProperty(t)&&(l[t]=o[t]);l.replacedWith?(l.collapsed=!0,l.replacedWith=oi("span",[l.replacedWith],"CodeMirror-widget")):l.replacedWithBox&&(l.collapsed=!0),l.collapsed&&(q=!0);let s,c,a=e.line,u=0;if(r.iter(a,n.line+1,t=>{const o={from:null,to:null,marker:l};u+=t.text.length,a==e.line&&(o.from=e.ch,u-=e.ch),a==n.line&&(o.to=n.ch,u-=t.text.length-n.ch),l.collapsed&&(a==n.line&&(c=Vn(t,n.ch)),a==e.line?s=Vn(t,e.ch):xo(t,0)),In(t,o),l.collapsed&&a==e.line&&Un(t)&&xo(t,0),++a}),l.readOnly&&($=!0,(t.view.history.done.length||t.view.history.undone.length)&&t.clearHistory()),l.collapsed){if(s!=c)throw new Error("Inserting collapsed marker overlapping an existing one");l.size=u,l.atomic=!0}return(l.className||l.startStyle||l.endStyle||l.collapsed||l.boxOptions||l.elementCallback)&&ie(t,e.line,n.line+1),l.atomic&&rn(t),l}function Dn(t,e){if(t)for(let n=0;n<t.length;++n){const o=t[n];if(o.marker==e)return o}}function Pn(t,e){for(var n,o=0;o<t.length;++o)t[o]!=e&&(n||(n=[])).push(t[o]);return e.onRemove&&e.onRemove(),n}function In(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.lines.push(t),t.measureCache=null}function zn(t,e){let n;if(t)for(let o=0;o<t.length;++o){let i=t[o],r=i.marker;if(null==i.from||(r.inclusiveLeft?i.from<=e:i.from<e)||"bookmark"==r.type&&i.from==e){const t=null==i.to||(r.inclusiveRight?i.to>=e:i.to>e);(n||(n=[])).push({from:i.from,to:t?null:i.to,marker:r})}}return n}function Rn(t,e,n){let o;if(t){let i;for(i=0;i<t.length;++i){let r=t[i],l=r.marker;if(null==r.to||(l.inclusiveRight?r.to>=n:r.to>n)||"bookmark"==l.type&&r.from==n&&r.from!=e){const t=null==r.from||(l.inclusiveLeft?r.from<=n:r.from<n);(o||(o=[])).push({from:t?null:r.from-n,to:null==r.to?null:r.to-n,marker:l})}}}return o}function Fn(t,e,n,o,i){if(!t&&!e)return i;let r=zn(t,n);const l=Rn(e,n,o);let s,c,a,u=1===i.length,h=Go(i).length+(u?n:0);if(r)for(s=0;s<r.length;++s)null==(c=r[s]).to&&((a=Dn(l,c.marker))?u&&(c.to=null==a.to?null:a.to+h):c.to=n);if(l)for(s=0;s<l.length;++s)null!=(c=l[s]).to&&(c.to+=h),null==c.from?(a=Dn(r,c.marker))||(c.from=h,u&&(r||(r=[])).push(c)):(c.from+=h,u&&(r||(r=[])).push(c));const f=[Jn(i[0],r)];if(!u){let t,e=i.length-2;if(e>0&&r)for(s=0;s<r.length;++s)null==r[s].to&&(t||(t=[])).push({from:null,to:null,marker:r[s].marker});for(s=0;s<e;++s)f.push(Jn(i[s+1],t));f.push(Jn(Go(i),l))}return f}function Bn(t,e,n){let o=null;if(t.iter(e.line,n.line+1,t=>{if(t.markedSpans)for(let e=0;e<t.markedSpans.length;++e){const n=t.markedSpans[e].marker;!n.readOnly||o&&-1!=$o(o,n)||(o||(o=[])).push(n)}}),!o)return null;const i=[{from:e,to:n}];for(let t=0;t<o.length;++t){const e=o[t].find();for(let t=0;t<i.length;++t){const n=i[t];if(!qe(e.from,n.to)||qe(e.to,n.from))continue;const o=[t,1];qe(n.from,e.from)&&o.push({from:n.from,to:e.from}),qe(e.to,n.to)&&o.push({from:e.to,to:n.to}),i.splice(...o),t+=o.length-1}}return i}function Vn(t,e){let n,o=q&&t.markedSpans;if(o)for(var i,r=0;r<o.length;++r)(i=o[r]).marker.collapsed&&(null==i.from||i.from<e)&&(null==i.to||i.to>e)&&(!n||n.width<i.marker.width)&&(n=i.marker);return n}function Kn(t){return Vn(t,-1)}function _n(t){return Vn(t,t.text.length+1)}function jn(t,e){let n;for(;n=Kn(e);)e=bo(t,n.find().from.line);return e}function Un(t){const e=q&&t.markedSpans;if(e)for(var n,o=0;o<e.length;++o)if((n=e[o]).marker.collapsed){if(null==n.from)return!0;if(0===n.from&&n.marker.inclusiveLeft&&Xn(t,n))return!0}}function Xn(t,e){if(null==e.to||e.marker.inclusiveRight&&e.to==t.text.length)return!0;for(var n,o=0;o<t.markedSpans.length;++o)if((n=t.markedSpans[o]).marker.collapsed&&n.from==e.to&&(n.marker.inclusiveLeft||e.marker.inclusiveRight)&&Xn(t,n))return!0}function Yn(t){return"string"==typeof t?t:t.text}function Gn(t){if("string"==typeof t)return null;let e=t.markedSpans,n=null;for(let t=0;t<e.length;++t)e[t].marker.explicitlyCleared?n||(n=e.slice(0,t)):n&&n.push(e[t]);return n?n.length?n:null:e}function Jn(t,e){return e?{text:t,markedSpans:e}:t}function $n(t){const e=t.markedSpans;if(e){for(let n=0;n<e.length;++n){const o=e[n].marker.lines,i=$o(o,t);o.splice(i,1)}t.markedSpans=null}}function qn(t,e){if(e){for(let n=0;n<e.length;++n)e[n].marker.lines.push(t);t.markedSpans=e}}function Zn(t,e,n,o){const i={text:e,height:o};return qn(i,n),Un(i)&&(i.height=0),i.frontier=-1,i}function Qn(t,e,n,o,r){const l=n,s=n.length+1;e.measureCache=null,e.transformedUntilOld=l.length-s,e.transformedUntilNew=n.length-s;const c=l===n?-1:-30;e.frontier=Math.min(e.frontier,r+c||-1,n.length-1),e.text=n,e.stateAfter=null,null!=e.order&&(e.order=null);const a=i.a.difference(i.a.pluck(e.markedSpans,"marker"),i.a.pluck(o,"marker"));$n(e),qn(e,o),i.a.each(a,t=>{t&&t.onRemove&&t.onRemove()}),Un(e)?e.height=0:e.height||t.options.renderLine||(e.height=Qt(t.display)),Bo(t,e,"change")}function to(t){if(t.parent=null,t.tokens){for(let e=0;e<t.tokens.length;++e)t.tokens[e].del();t.tokens=[]}t.measureCache=null,$n(t)}function eo(t,e,n){const o=oo(t,e,n);return Fo(t,"linehighlighted",t,e),o}function no(t,e,n){return e||(e=""),e.type||(e=new T.a(t,e,n)),e}function oo(t,e,n){function o(t,e,n,o){const i=t[e];i.line===n&&i.ch>c.start&&(t[e]={line:i.line,ch:i.ch+o})}const r=t.view.mode;let l=!e.tokens,s=0;var c=new Wn(e.text,t.options.tabSize,e);const a=e.tokens||[];let u,h,f=""===e.text&&r.blankLine?r.blankLine(c,n):null;if(e.tokens=[],e.frontier>0){let t=-1,o=0,i=0;for(;o<a.length&&(i+=(u=a[o]).content.length)<e.frontier;)u.stateAfter&&(t=o,c.pos=i),++o;t>=0&&(n=Ln(r,a[t].stateAfter),c.start=c.pos,e.tokens=a.splice(0,t+1))}const d=[];for(h=0;h<a.length;++h)d.push(a[h].elements);for(;!c.eol()||f;){let h,g,m,y=null;if(a.length>0&&(h=(y=a.shift()).content,g=y.type,m=y.indentation,y.del()),u=f||r.token(c,n),f=null,(u=no(t,u,c)).content!==c.current()){var p=u.content.length-c.current().length;c.string=c.string.substring(0,c.start)+u.content+c.string.substring(c.pos),e.text=e.text.substring(0,c.start)+u.content+e.text.substring(c.pos),c.pos+=p;const n=Co(e),r=t.view.sel;o(r,"from",n,p),o(r,"to",n,p),o(r,"anchor",n,p),o(r,"head",n,p),i.a.each(e.markedSpans,t=>{t.from>c.pos&&(t.from+=p),t.to>c.pos&&(t.to+=p)})}s%50==0&&(u.stateAfter=Ln(r,n)),u.elements=d.shift()||[],u.refreshClass(),u.line=e,e.tokens.push(u),c.start=c.pos,l=l||!y||u.content!==h||u.type!==g||u.indentation!==m||u.getClassName()!==y.getClassName(),++s}if(e.stateAfter=Ln(r,n),e.frontier=c.pos,c.eol())for(a.length&&(l=!0),h=0;h<a.length;++h)a[h].del();else e.tokens=e.tokens.concat(a);return l&&(e.measureCache=null),l}function io(t,e,n,o){let i,r,l,s=e,c=!0;for(;i=Kn(s);)c=!1,s=bo(t.view.doc,i.find().from.line),r||(r=s);const a=t.getLineNumber(s);if((!s.tokens||s.frontier<s.text.length)&&eo(t,s,zt(t,a)),t.view.frontier==a&&++t.view.frontier,t.options.renderLine){let e=yo(s);e.length||(e=[{type:"text",text:"​",trackDimensions:!0}]),s.elements=e,s.node||(s.node=oi("pre"));const[n,i]=t.options.renderLine(t,s);ro(s,n),lo(s,i),Fo(t,"linecontent",t,s),o(s.node)}else{const i={pre:oi("pre"),col:0,pos:0,display:!n,measure:null,addedOne:!1,cm:t};s.textClass&&(i.pre.className=s.textClass);Co(s);i.measure=s==e&&n,i.pos=0,i.addToken=i.measure?ao:co,n&&l&&s!=e&&!i.addedOne&&(n[0]=i.pre.appendChild(fi(t.display.measure)),i.addedOne=!0),po(s,i,n,t),Fo(t,"linecontent",t,s),l=s==r,n&&!i.addedOne&&(n[0]=i.pre.appendChild(c?oi("span"," "):fi(t.display.measure))),i.pre.firstChild||Un(e)||i.pre.appendChild(document.createTextNode(" ")),o(i.pre)}}function ro(t,e){xo(t,e.height),t.baseline=e.baseline,t.width=e.width}function lo(t,e){const n=[];for(let t=0,o=e.length;t<o;++t){const o=e[t],i=o.element;if(i.isWidget){const t=i.to-i.from;for(let e=0;e<t;++e)n.push(o)}else n.push(o)}t.measureCache=n}Mn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},Mn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},Mn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},Mn.default=Y?Mn.macDefault:Mn.pcDefault,Mn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},et.isModifierKey=An,et.fromTextArea=function(t,e){if(e||(e={}),e.value=t.value,!e.tabindex&&t.tabindex&&(e.tabindex=t.tabindex),null==e.autofocus){let n=document.body;try{n=document.activeElement}catch(t){}e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function n(){t.value=r.getValue()}if(t.form){zo(t.form,"submit",n);var o=t.form,i=o.submit;try{o.submit=function t(){n(),o.submit=i,o.submit(),o.submit=t}}catch(t){}}t.style.display="none";var r=et(e=>{t.parentNode.insertBefore(e,t.nextSibling)},e);return r.save=n,r.getTextArea=function(){return t},r.toTextArea=function(){n(),t.parentNode.removeChild(r.getWrapperElement()),t.style.display="",t.form&&(Ro(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=i))},r},Wn.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0===this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){const e=this.string.charAt(this.pos);let n;if(n="string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},eatWhile:function(t){const e=this.pos;for(;this.eat(t););return this.pos>e},eatSpace:function(){const t=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){const e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},backUp:function(t){this.pos-=t},column:function(){return Uo(this.string,this.start,this.tabSize)},indentation:function(){return Uo(this.string,null,this.tabSize)},match:function(t,e,n){if("string"!=typeof t){const n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&!1!==e&&(this.pos+=n[0].length),n)}{const o=function(t){return n?t.toLowerCase():t};if(o(this.string).indexOf(o(t),this.pos)==this.pos)return!1!==e&&(this.pos+=t.length),!0}},current:function(){return this.string.slice(this.start,this.pos)}},et.StringStream=Wn,En.prototype.clear=function(){if(this.explicitlyCleared)return;ee(this.cm);let t=null,e=null;for(let n=0;n<this.lines.length;++n){const o=this.lines[n],i=Dn(o.markedSpans,this);null!=i.to&&(e=Co(o)),o.markedSpans=Pn(o.markedSpans,i),o.measureCache=null,null!=i.from?t=Co(o):this.collapsed&&!Un(o)&&xo(o,Qt(this.cm.display))}null!=t&&ie(this.cm,t,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.cm.view.cantEdit&&(this.cm.view.cantEdit=!1,rn(this.cm)),ne(this.cm),Bo(this.cm,this,"clear")},En.prototype.find=function(){let t,e;for(let n=0;n<this.lines.length;++n){const o=this.lines[n],i=Dn(o.markedSpans,this);if(null!=i.from||null!=i.to){const n=Co(o);null!=i.from&&(t={line:n,ch:i.from}),null!=i.to&&(e={line:n,ch:i.to})}}return"bookmark"==this.type?t:t&&{from:t,to:e}},window.lineIsHidden=Un;const so=/[\t\u0000-\u0019\uFEFF]/g;function co(t,e,n,o,i,r,s,c,a){const u=!!a;n&&(n=n.cloneNode(!0));t.cm.view.mode;function h(t){return"string"==typeof t&&(t=document.createTextNode(t)),t}function f(t){if(u){"string"==typeof t&&(t=h(t)),n?(t=[n,t],n=null):t=[t];const e=oi("span",t,"cm-character");return a.push(e),e}return t}function d(t){if(u){const e=document.createDocumentFragment();for(let n=0;n<t.length;++n)e.appendChild(f(t.charAt(n)));return e}return h(t)}if(!u&&n&&t.pre.appendChild(n),!e)return;let p;if(so.test(e)){p=document.createDocumentFragment();let n=0;for(;;){so.lastIndex=n;const o=so.exec(e),i=o?o.index-n:e.length-n;if(i&&(p.appendChild(d(e.slice(n,n+i))),t.col+=i),!o)break;if(n+=i+1,"\t"==o[0]){const e=t.cm.options.tabSize;var g;g=t.cm.options.alignTabs?e-t.col%e:e,p.appendChild(f(oi("span",Yo(g),"cm-tab"))),t.col+=g}else{const e=oi("span","•","cm-invalidchar");e.title="\\u".concat(o[0].charCodeAt(0).toString(16)),p.appendChild(f(e)),t.col+=1}}}else e=e.replace(/ /g," "),t.col+=e.length,p=d(e);if(o||i||r||t.measure||!l.a.isEmptyObject(c)){let e=o||"";i&&(e+=i),r&&(e+=r),s&&(e+=s);c["font-family"];const n=oi("span",[p],e);return l()(n).css(c||{}),t.pre.appendChild(n)}return t.pre.appendChild(p)}function ao(t,e,n,o,i,r,l,s,c){c||(c=[]);const a=co(t,e,n,o,i,r,l,s,c);for(let n=0;n<e.length;++n)t.measure[t.pos++]=c[n];return e.length&&(t.addedOne=!0),a}function uo(t,e,n){return n&&(t.display||(n=n.cloneNode(!0)),t.pre.appendChild(n),t.measure&&e&&(t.measure[t.pos]=n,t.addedOne=!0)),t.pos+=e,n}function ho(t,e){l.a.each(e,(e,n)=>{t[e]=n})}function fo(t,e,n){const o=e.outerHTML;n.measureNodeCache||(n.measureNodeCache={});let i=n.measureNodeCache[o];if(void 0!==i)return i;const r=e.parentNode,s=e.nextSibling;for(;t.firstChild;)t.removeChild(t.firstChild);return t.appendChild(e),i=l()(e).outerWidth(!0),r&&(s?r.insertBefore(e,s):r.appendChild(e)),n.measureNodeCache[o]=i,i}function po(t,e,n,o){n||(t.elements=[]);const r=t.tokens;if(i.a.each(r,t=>{t._lineElements=[]}),!r)return;let s,c,a,u,h,f=!0;function d(t,o,r,l,s,c,a,u,h,d,p,g,m,y){const v=o.split(/(\s)/).filter(t=>t.length>0),w=v.length-1;let b=0;i.a.each(v,(o,v)=>{let x=s;const C=i.a.clone(u);if(0===v&&g&&(x+=" cm-first-part",l.marginLeft&&l.marginLeft>0&&!f&&(C["margin-left"]="".concat(l.marginLeft,"px"))),v==w&&m&&(x+=" cm-last-part",l.marginRight)){let t=l.marginRight;if(y){const e=y.marginLeft;e<0?t+=e:e>t?t=0:t-=e}C["margin-right"]="".concat(t,"px")}/\s+/.test(o)&&(x+=" cm-space");const k=n?[]:null,L=e.addToken(e,o,r,x,c,a,"",C,k);L&&(r&&l._lineElements.push({characters:k,node:r}),l._lineElements.push({characters:k,node:L})),r=null,!n&&L&&(d.push(L),p.push({from:t+b,to:t+b+o.length,text:o,token:l,element:L,markers:h})),b+=o.length}),f=!1}function p(){if(!o.options.lineWrapping)return;const s=window.getComputedStyle(o.display.sizer,null),c=parseInt(s.getPropertyValue("width"));let a=o.display.measureContainer;a||(a=o.display.measureContainer=oi("div",null,"measureContainer","visibility: hidden; position: absolute")),a.parentNode||o.display.wrapper.appendChild(a),i.a.each(r,t=>{t.width=0,i.a.each(t._lineElements,e=>{t.width+=fo(a,e.node,o)}),t.text=t.content});const u=6,h=S.b(r,c,{isMath:o.view.mode.isMath,indentationSize:u});if(i.a.each(h,(t,e)=>{if(t.elements.length){n&&i.a.each(t.elements,t=>{i.a.each(t._lineElements,t=>{t.characters&&i.a.each(t.characters,t=>{t.lineIndex=e})})});const o=t.elements[0]._lineElements[0];o&&(e>0&&l()("<br>").insertBefore(o.node),t.indentation&&l()('<span class="cm-line-indentation" style="width:'.concat(t.indentation,'px">')).insertBefore(o.node))}}),!h.length){const n=Rt(o,t);n&&n.indentation&&l()(e.pre).css({"padding-left":"".concat(n.indentation*u,"px")})}}const g=t.markedSpans;if(!g){for(s=0;s<r.length;++s){u=(a=r[s]).getClassName();const e=a.content;n||(a.elements=[]),d(a.pos,e,a.displayBefore,a,u,"","",{},[],a.elements,t.elements,!0,!0,s<r.length-1?r[s+1]:null)}return void p()}if(!n)for(s=0;s<r.length;++s)r[s].elements=[];let m,y,v,w,b=t.text.length,x=0,C="",k=0,L=null;a=null;let T=0;for(s=0;s<r.length||C;){var M=[];const o={};if(k==x){m=y=v="",w=null,k=1/0;let i=null;for(c=0;c<g.length;++c){let t=g[c],e=t.marker;t.from<=x&&(null==t.to||t.to>x)?(M.push(e),null!=t.to&&k>t.to&&(k=t.to,y=""),e.className&&(m+=" ".concat(e.className)),e.startStyle&&(v+=" ".concat(e.startStyle)),e.endStyle&&t.to==k&&(y+=" ".concat(e.endStyle)),e.collapsed&&(!w||w.marker.width<e.width)&&(w=t),ho(o,e.css||{})):t.from>x&&k>t.from&&(k=t.from),"bookmark"==e.type&&t.from==x&&e.replacedWith&&(i=e.replacedWith)}let r=null;if(h=0,w&&(w.from||0)==x&&(h=(null==w.to?b:w.to)-x,r=uo(e,h,null!=w.from&&w.marker.replacedWith)),i&&!w&&(r=uo(e,0,i)),r&&!n)for(t.elements.push({from:x,to:x+h,text:" ",token:null,element:r,markers:M,isWidget:!0,widgetMarker:w&&w.marker}),c=0;c<M.length;++c)M[c].elementCallback&&M[c].elementCallback(r,!0);if(w&&(w.from||0)==x&&null==w.to)return w.marker.find()}if(x>=b)break;var N=o["background-color"];N&&delete o["background-color"];const i=Math.min(b,k);for(;s<r.length||C;){if(C){const e=x+C.length;if(!w){const c=e>i?C.slice(0,i-x):C,h=0===T,f=c==C;++T;const p=[];d(x,c,L,a=t.tokens[s-1],u+m,v,x+c.length==k?y:"",o,M,p,t.elements,h,f,f&&s<r.length&&t.tokens[s]),a.elements=a.elements.concat(p),L=null,n||l.a.each(p,(e,n)=>{for(let t=0;t<M.length;++t)M[t].elementCallback&&M[t].elementCallback(n,!1);if(N){const e=oi("span",[]);l()(e).css("background-color",N),e.forElement=n,t.backgroundNodes.push(e)}})}if(e>=i){C=C.slice(i-x),x=i;break}x=e,v=""}if(!(a=r[s++])){C="";break}T=0,C=a.content,u=a.getClassName(),L=a.displayBefore}}p()}function go(t,e){this.left=t,this.right=e}function mo(t,e,n,o,r,l,s,c,a,u,h){this.text=t,this.className=e,this.style=n,this.margins=r,this.href=l,this.cacheKey=s,this.from=c,this.to=a,this.token=u,this.trackDimensions=h;const f=[];i.a.each(o,t=>{t.boxOptions&&f.push(t.boxOptions)}),f.length?this.boxOptions=f:this.boxOptions=null}function yo(t){const e=[],n=t.tokens;if(!n)return e;let o,r,s,c,a,u=!0;function h(t,n,o,r,l,s,c,a,h,f,d,p){const g=n.split(/(\s)/).filter(t=>t.length>0),m=g.length-1;let y=0,v=null;i.a.each(a,t=>{t.href&&(v=t.href)});for(let n=0,u=g.length;n<u;++n){const u=g[n];let f=0,b=0;0===n&&d&&o.marginLeft&&(f=o.marginLeft),n==m&&p&&o.marginRight&&(b=o.marginRight);const x=new go(f,b);let C="";c&&!i.a.isEmpty(c)&&(C="".concat(c.fontFamily).concat(c.fontSize).concat(c.fontWeight).concat(c.fontStyle)+"".concat(c.color).concat(c.backgroundColor));var w="";i.a.each(a,t=>{t.boxOptions&&(w+=JSON.stringify(t.boxOptions))});const k=new mo(u,r+l+s,c,a,x,v,u+r+l+s+C+x.left+x.right+v+w,t+y,t+y+u.length,o,!0);h.push(k),e.push(k),y+=u.length}u=!1}function f(t,n,o){if(o){const i={isWidget:!0,from:t,to:t+n,trackDimensions:!0};o.replacedWith?i.node=o.replacedWith.cloneNode(!0):o.replacedWithBox&&(i.box=o.replacedWithBox,i.boxOptions=o.boxOptions,i.href=o.href,i.hyperlinkText=o.hyperlinkText),o.image&&(i.image=o.image,i.cacheKey=JSON.stringify({type:"image",image:o.image})),e.push(i)}}const d=t.markedSpans;if(!d){for(o=0;o<n.length;++o){c=(s=n[o]).getClassName();const e=s.content;s.elements=[],h(s.pos,e,s,c,"","",{},[],s.elements,t.elements,!0,!0)}return e}for(o=0;o<n.length;++o)n[o].elements=[];const p=t.text.length;let g,m,y,v,w=0,b="",x=0,C=null;s=null;let k=0;for(o=0;o<n.length||b;){var L=[];const e={};if(x==w){g=m=y="",v=null,x=1/0;let t=null;for(r=0;r<d.length;++r){let n=d[r],o=n.marker;n.from<=w&&(null==n.to||n.to>w)?(L.push(o),null!=n.to&&x>n.to&&(x=n.to,m=""),o.className&&(g+=" ".concat(o.className)),o.startStyle&&(y+=" ".concat(o.startStyle)),o.endStyle&&n.to==x&&(m+=" ".concat(o.endStyle)),o.collapsed&&(!v||v.marker.width<o.width)&&(v=n),i.a.extend(e,o.css||{})):n.from>w&&x>n.from&&(x=n.from),"bookmark"==o.type&&n.from==w&&o.replacedWith&&(t=o.replacedWith)}let n=null;a=0,v&&(v.from||0)==w&&(n=f(w,a=(null==v.to?p:v.to)-w,null!=v.from&&v.marker)),t&&!v&&(n=f(w,0,t))}if(w>=p)break;var S=e["background-color"];S&&delete e["background-color"];const u=Math.min(p,x);for(;o<n.length||b;){if(b){const r=w+b.length;if(!v){const a=r>u?b.slice(0,u-w):b,f=0===k,d=a==b;++k;const p=[];h(w,a,s=t.tokens[o-1],c+g,y,w+a.length==x?m:"",e,L,p,t.elements,f,d,d&&o<n.length&&t.tokens[o]),s.elements=s.elements.concat(p),C=null,i.a.each(p,e=>{for(let t=0;t<L.length;++t)L[t].elementCallback&&L[t].elementCallback(e,!1);if(S){const n=oi("span",[]);l()(n).css("background-color",S),n.forElement=e,t.backgroundNodes.push(n)}})}if(r>=u){b=b.slice(u-w),w=u;break}w=r,y=""}if(!(s=n[o++])){b="";break}k=0,b=s.content,c=s.getClassName(),C=s.displayBefore}}return e}function vo(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,o=0;e<n;++e)t[e].parent=this,o+=t[e].height;this.height=o}function wo(t){this.children=t;let e=0,n=0;for(let o=0,i=t.length;o<i;++o){const i=t[o];e+=i.chunkSize(),n+=i.height,i.parent=this}this.size=e,this.height=n,this.parent=null}function bo(t,e){for(;!t.lines;)for(let n=0;;++n){let o=t.children[n],i=o.chunkSize();if(e<i){t=o;break}e-=i}return t.lines[e]}function xo(t,e){const n=e-t.height;for(let e=t;e;e=e.parent)e.height+=n}function Co(t){if(null==t.parent)return null;let e=t.parent,n=$o(e.lines,t);for(let t=e.parent;t;e=t,t=t.parent)for(let o=0;t.children[o]!=e;++o)n+=t.children[o].chunkSize();return n}function ko(t,e){let n,o,i=0;t:do{for(n=0,o=t.children.length;n<o;++n){let o=t.children[n],r=o.height;if(e<r){t=o;continue t}e-=r,i+=o.chunkSize()}return i}while(!t.lines);for(n=0,o=t.lines.length;n<o;++n){let o=t.lines[n].height;if(e<o)break;e-=o}return i+n}function Lo(t,e){let n,o=0,i=(e=jn(t.view.doc,e)).parent;for(n=0;n<i.lines.length;++n){const t=i.lines[n];if(t==e)break;o+=t.height}for(let t=i.parent;t;t=(i=t).parent)for(n=0;n<t.children.length;++n){const e=t.children[n];if(e==i)break;o+=e.height}return o}function So(t){let e=t.order;return null==e&&(e=t.order=Ti(t.text)),e}function To(){return{done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function Mo(t,e,n,o,i,r,l,s,c){const a=t.view.history;a.undone.length=0;let u=+new Date,h=Go(a.done);if(h&&(a.lastOp==t.curOp.id||a.lastOrigin==i&&("input"==i||"delete"==i)&&a.lastTime>u-600)){const t=Go(h.events);if(t.start>e+o.length||t.start+t.added<e)h.events.push({start:e,added:n,old:o});else{let i,r=Math.max(0,t.start-e),l=Math.max(0,e+o.length-(t.start+t.added));for(i=r;i>0;--i)t.old.unshift(o[i-1]);for(i=l;i>0;--i)t.old.push(o[o.length-i]);r&&(t.start=e),t.added+=n-(o.length-r-l)}h.fromAfter=s,h.toAfter=c}else{for(h={events:[{start:e,added:n,old:o}],fromBefore:r,toBefore:l,fromAfter:s,toAfter:c},a.done.push(h);a.done.length>t.options.undoDepth;)a.done.shift();a.dirtyCounter<0?a.dirtyCounter=NaN:a.dirtyCounter++,Fo(t,"historyAction")}a.lastTime=u,a.lastOp=t.curOp.id,a.lastOrigin=i}function No(){Eo(this)}function Oo(t){return t.stop||(t.stop=No),t}function Ao(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Wo(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Eo(t){Ao(t),Wo(t)}function Ho(t){return t.target||t.srcElement}function Do(t){let e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Y&&t.ctrlKey&&1==e&&(e=3),e}function Po(t,e){return t.override&&t.override.hasOwnProperty(e)?t.override[e]:t[e]}function Io(t,e){const n=(t._allHandlers||{})[e]||[];let o;for(o=0;o<n.length;++o)n[o].apply(t,Array.prototype.slice.call(arguments,2))}function zo(t,e,n){if(t._allHandlers||(t._allHandlers={}),t._allHandlers[e]||(t._allHandlers[e]=[]),t._allHandlers[e].push(n),t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on".concat(e),n);else{const o=t._handlers||(t._handlers={});(o[e]||(o[e]=[])).push(n)}}function Ro(t,e,n){const o=(t._allHandlers||{})[e]||[];let i;for(i=o.length-1;i>=0;--i)o[i]===n&&o.splice(i,1);if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on".concat(e),n);else{const o=t._handlers&&t._handlers[e];if(!o)return;for(let t=0;t<o.length;++t)if(o[t]==n){o.splice(t,1);break}}}function Fo(t,e){const n=t._handlers&&t._handlers[e];if(!n)return;const o=Array.prototype.slice.call(arguments,2);for(let t=0;t<n.length;++t)n[t].apply(null,o)}function Bo(t,e,n){const o=e._handlers&&e._handlers[n];if(!o)return;let i=Array.prototype.slice.call(arguments,3),r=t.curOp&&t.curOp.delayedCallbacks;function l(t){return function(){t(...i)}}for(let t=0;t<o.length;++t)r?r.push(l(o[t])):o[t].apply(null,i)}function Vo(t,e){const n=t._handlers&&t._handlers[e];return n&&n.length>0}vo.prototype={chunkSize:function(){return this.lines.length},remove:function(t,e,n){for(let o=t,i=t+e;o<i;++o){const t=this.lines[o];this.height-=t.height,to(t),Bo(n,t,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice(...[t.length,0].concat(this.lines))},insertHeight:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(let t=0,n=e.length;t<n;++t)e[t].parent=this},iterN:function(t,e,n){for(let o=t+e;t<o;++t)if(n(this.lines[t]))return!0}},wo.prototype={chunkSize:function(){return this.size},remove:function(t,e,n){this.size-=e;for(let o=0;o<this.children.length;++o){let i=this.children[o],r=i.chunkSize();if(t<r){let l=Math.min(e,r-t),s=i.height;if(i.remove(t,l,n),this.height-=s-i.height,r==l&&(this.children.splice(o--,1),i.parent=null),0==(e-=l))break;t=0}else t-=r}if(this.size-e<25){const t=[];this.collapse(t),this.children=[new vo(t)],this.children[0].parent=this}},collapse:function(t){for(let e=0,n=this.children.length;e<n;++e)this.children[e].collapse(t)},insert:function(t,e){let n=0;for(let t=0,o=e.length;t<o;++t)n+=e[t].height;this.insertHeight(t,e,n)},insertHeight:function(t,e,n){this.size+=e.length,this.height+=n;for(let o=0,i=this.children.length;o<i;++o){let i=this.children[o],r=i.chunkSize();if(t<=r){if(i.insertHeight(t,e,n),i.lines&&i.lines.length>50){for(;i.lines.length>50;){const t=new vo(i.lines.splice(i.lines.length-25,25));i.height-=t.height,this.children.splice(o+1,0,t),t.parent=this}this.maybeSpill()}break}t-=r}},maybeSpill:function(){if(this.children.length<=10)return;let t=this;do{const e=new wo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;const n=$o(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{const n=new wo(t.children);n.parent=t,t.children=[n,e],t=n}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()},iter:function(t,e,n){this.iterN(t,e-t,n)},iterN:function(t,e,n){for(let o=0,i=this.children.length;o<i;++o){let i=this.children[o],r=i.chunkSize();if(t<r){const o=Math.min(e,r-t);if(i.iterN(t,o,n))return!0;if(0==(e-=o))break;t=0}else t-=r}}},et.e_stop=Eo,et.e_preventDefault=Ao,et.e_stopPropagation=Wo,et.on=zo,et.off=Ro,et.signal=Fo,et.signalLater=Bo;var Ko=30,_o=et.Pass={toString:function(){return"CodeMirror.Pass"}};function jo(){this.id=null}function Uo(t,e,n){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=0,i=0;o<e;++o)"\t"==t.charAt(o)?i+=n-i%n:++i;return i}jo.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},et.countColumn=Uo;const Xo=[""];function Yo(t){for(;Xo.length<=t;)Xo.push("".concat(Go(Xo)," "));return Xo[t]}function Go(t){return t[t.length-1]}function Jo(t){U?(t.selectionStart=0,t.selectionEnd=t.value.length):t.select()}function $o(t,e){if(t.indexOf)return t.indexOf(e);for(let n=0,o=t.length;n<o;++n)if(t[n]==e)return n;return-1}function qo(t){for(var e=[],n=0;n<t;++n)e.push(void 0);return e}function Zo(t){const e=Array.prototype.slice.call(arguments,1);return function(){return t(...e)}}const Qo=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/;function ti(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Qo.test(t))}function ei(t){let e=0;for(const n in t)t.hasOwnProperty(n)&&t[n]&&++e;return!e}et.isWordChar=ti;var ni=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/;function oi(t,e,n,o){const i=document.createElement(t);if(n&&(i.className=n),o&&(i.style.cssText=o),"string"==typeof e)li(i,e);else if(e)for(let t=0;t<e.length;++t)i.appendChild(e[t]);return i}function ii(t){return t.innerHTML="",t}function ri(t,e){return ii(t).appendChild(e)}function li(t,e){P?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}var si=function(){if(P)return!1;const t=oi("div");return"draggable"in t||"dragDrop"in t}();let ci,ai,ui=/^$/;function hi(t){if(null!=ci)return ci;const e=oi("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return ri(t,e),e.offsetWidth&&(ci=e.offsetHeight-e.clientHeight),ci||0}function fi(t){if(null==ai){const e=oi("span","​");ri(t,oi("span",[e,document.createTextNode("x")])),0!==t.firstChild.offsetHeight&&(ai=e.offsetWidth<=1&&e.offsetHeight>2&&!D)}return ai?oi("span","​"):oi("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}E?ui=/$'/:B?ui=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:R&&(ui=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var di=3!="\n\nb".split(/\n/).length?function(t){let e=0,n=[],o=t.length;for(;e<=o;){let o=t.indexOf("\n",e);-1==o&&(o=t.length);const i=t.slice(e,"\r"==t.charAt(o-1)?o-1:o),r=i.indexOf("\r");-1!=r?(n.push(i.slice(0,r)),e+=r+1):(n.push(i),e=o+1)}return n}:function(t){return t.split(/\r\n?|\n/)};et.splitLines=di;var pi=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){let e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!==e.compareEndPoints("StartToEnd",e)},gi=function(){const t=oi("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),mi={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};function yi(t,e,n,o){if(!t)return o(e,n,"ltr");for(let i=0;i<t.length;++i){const r=t[i];(r.from<n&&r.to>e||e==n&&r.to==e)&&o(Math.max(r.from,e),Math.min(r.to,n),1==r.level?"rtl":"ltr")}}function vi(t){return t.level%2?t.to:t.from}function wi(t){return t.level%2?t.from:t.to}function bi(t){const e=So(t);return e?vi(e[0]):0}function xi(t){const e=So(t);return e?wi(Go(e)):t.text.length}function Ci(t,e){const n=bo(t.view.doc,e),o=jn(t.view.doc,n);o!=n&&(e=Co(o));const i=So(o);return{line:e,ch:i?i[0].level%2?xi(o):bi(o):0}}function ki(t,e){let n,o;for(;n=_n(o=bo(t.view.doc,e));)e=n.find().to.line;const i=So(o);return{line:e,ch:i?i[0].level%2?bi(o):xi(o):o.text.length}}function Li(t,e,n,o){const i=So(t);if(!i)return Si(t,e,n,o);const r=o?function(e,n){do{e+=n}while(e>0&&ni.test(t.text.charAt(e)));return e}:function(t,e){return t+e},l=i[0].level;let s;for(var c=0;c<i.length;++c){const t=(s=i[c]).level%2==l;if(s.from<e&&s.to>e||t&&(s.from==e||s.to==e))break}let a=r(e,s.level%2?-n:n);for(;null!=a;)if(s.level%2==l){if(!(a<s.from||a>s.to))break;a=(s=i[c+=n])&&(n>0==s.level%2?r(s.to,-1):r(s.from,1))}else if(a==vi(s))a=(s=i[--c])&&wi(s);else{if(a!=wi(s))break;a=(s=i[++c])&&vi(s)}return a<0||a>t.text.length?null:a}function Si(t,e,n,o){let i=e+n;if(o)for(;i>0&&ni.test(t.text.charAt(i));)i+=n;return i<0||i>t.text.length?null:i}et.keyNames=mi,function(){let t;for(t=0;t<10;t++)mi[t+48]=String(t);for(t=65;t<=90;t++)mi[t]=String.fromCharCode(t);for(t=1;t<=12;t++)mi[t+111]=mi[t+63235]="F".concat(t)}();var Ti=function(){const t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",e="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr";function n(n){return n<=255?t.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1791?e.charAt(n-1536):1792<=n&&n<=2220?"r":"L"}const o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;let i=/[stwN]/,r=/[LRr]/,l=/[Lb1n]/,s=/[1n]/;const c="L";return function(t){if(!o.test(t))return!1;let e,a,u,h,f,d,p,g=t.length,m=[];for(e=0;e<g;++e)m.push(u=n(t.charCodeAt(e)));for(e=0,h=c;e<g;++e)"m"==(u=m[e])?m[e]=h:h=u;for(e=0,f=c;e<g;++e)"1"==(u=m[e])&&"r"==f?m[e]="n":r.test(u)&&(f=u,"r"==u&&(m[e]="R"));for(e=1,h=m[0];e<g-1;++e)"+"==(u=m[e])&&"1"==h&&"1"==m[e+1]?m[e]="1":","!=u||h!=m[e+1]||"1"!=h&&"n"!=h||(m[e]=h),h=u;for(e=0;e<g;++e)if(","===(u=m[e]))m[e]="N";else if("%"===u){for(d=e+1;d<g&&"%"===m[d];++d);for(p=e&&"!"===m[e-1]||d<g-1&&"1"===m[d]?"1":"N",a=e;a<d;++a)m[a]=p;e=d-1}for(e=0,f=c;e<g;++e)u=m[e],"L"==f&&"1"==u?m[e]="L":r.test(u)&&(f=u);for(e=0;e<g;++e)if(i.test(m[e])){for(d=e+1;d<g&&i.test(m[d]);++d);const t="L"==(e?m[e-1]:c),n="L"==(d<g-1?m[d]:c);for(p=t||n?"L":"R",a=e;a<d;++a)m[a]=p;e=d-1}let y,v=[];for(e=0;e<g;)if(l.test(m[e])){const t=e;for(++e;e<g&&l.test(m[e]);++e);v.push({from:t,to:e,level:0})}else{let t=e,n=v.length;for(++e;e<g&&"L"!=m[e];++e);for(a=t;a<e;)if(s.test(m[a])){t<a&&v.splice(n,0,{from:t,to:a,level:1});const o=a;for(++a;a<e&&s.test(m[a]);++a);v.splice(n,0,{from:o,to:a,level:2}),t=a}else++a;t<e&&v.splice(n,0,{from:t,to:e,level:1})}return 1==v[0].level&&(y=t.match(/^\s+/))&&(v[0].from=y[0].length,v.unshift({from:0,to:y[0].length,level:0})),1==Go(v).level&&(y=t.match(/\s+$/))&&(Go(v).to-=y[0].length,v.push({from:g-y[0].length,to:g,level:0})),v[0].level!=Go(v).level&&v.push({from:g,to:g,level:v[0].level}),v}}();et.version="3.0 +";e.a=et},qvtAvJ:function(t,e,n){"use strict";n.d(e,"c",function(){return u}),n.d(e,"b",function(){return f}),n.d(e,"a",function(){return Token});var o=n("F/us1n"),i=n.n(o),r=n("aEFwcg"),l=n("+PQVfF"),s=n("QjbJwE"),c=n("9mIgL/");function a(t){return t.expr}function u(t,e){if("identifier"===t.type){const n=t.locals[t.value]||e[t.value];t.token&&t.token.setLocal(n)}"slot"===t.type&&t.token&&t.token.setLocal(t.locals["#"]||e["#"]),"named-blank"===t.type&&t.token&&t.token.setLocal(t.locals._||e._)}function h(t,e){function n(t,e,n,o){if(o>=0&&n&&!i.a.contains(n,o))return t;const r=c.a.copyMap(t);return c.a.updateMap(r,e),r}function o(t,e,r){if(!t)return;u(t,e);const s=t.getHeadName();if(l.h.test(s)||"Function"===s||l.m.test(s)||l.k.test(s)||"&"===t.op){const i=n(e,t.locals,t.localsPos,r);t.visit((t,e)=>{o(t,i,e)})}else if(l.b.test(t.op)){let i;o(t.args[0],n(e,{_:"func"})),i=l.e.test(t.op)?n(e,t.locals,t.localsPos,r):e,o(t.args[1],i)}else{let l;l=t.locals&&!i.a.isEmpty(t.locals)?n(e,t.locals,t.localsPos,r):e,t.visit((t,e)=>{o(t,l,e)})}}o(t,e,-1)}function f(t,e){t.locals={},h(t,e)}class Token{constructor(t,e,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.isDefinedSymbol=!1,this.type=e,this.classNames={},this.classNames[e]=!0,this.content="string"==typeof o.content?o.content:n.current(),this.expr=o.expr||null,this.dependingLocals=[],this.lexerToken=o.lexerToken,this.matchingToken=null,this.localMarker=null,this.pos=i.a.isUndefined(o.pos)?n.start:o.pos,this.elements=[],this.cm=t,"identifier"===e&&t&&t.options.onSymbol&&t.options.onSymbol(this.content,this,!1),this.line=o.line||n.line,this.marginLeft=0,this.marginRight=0,this.indentation=o.indentation||0,this.startPos=o.startPos,this.endPos=o.endPos,this.startOfString=o.startOfString,this.endOfString=o.endOfString,this.partOfString=o.partOfString,this.startOfComment=o.startOfComment,this.endOfComment=o.endOfComment,this.partOfComment=o.partOfComment}del(){const t=this.cm;"identifier"===this.type&&t.options.onSymbol&&t.options.onSymbol(this.content,this,!0);const e=a(this);e&&(e.token===this&&(e.token=null),e.openingToken===this&&(e.openingToken=null)),this.expr&&(this.expr.token===this&&(this.expr.token=null),this.expr.openingToken===this&&(this.expr.openingToken=null),this.expr=null),i.a.each(this.dependingLocals,t=>{const e=t.expr;e.locals[t.name]&&(t.removed?e.locals[t.name]=t.kind:delete e.locals[t.name],h(e,e.outerLocals||{}))}),this.dependingLocals=[],this.matchingToken&&this.matchingToken.matchingToken===this&&(this.hasClass("matching")&&this.matchingToken.removeClass("matching"),this.hasClass("wrong-matching")&&this.matchingToken.removeClass("wrong-matching"),this.matchingToken.matchingToken=null,this.matchingToken=null),this.localMarker=null,this.elements=[]}addMatching(t,e){const n=this.cm;this.matchingToken=t,t.matchingToken=this;const o=this.content===l.s(t.content),i=o?"matching":"wrong-matching";this.addClass(i),t.addClass(i),o&&(e(this)?r.a.signal(n,"popuptoken",n,t):e(t)&&r.a.signal(n,"popuptoken",n,this))}addLocal(t,e,n,o,i){t.locals[e]=n,t.localsPos=i||null,this.dependingLocals.push({expr:t,name:e}),h(t,o),t.outerLocals=o}removeLocal(t,e,n){t.locals[e]&&(this.dependingLocals.push({expr:t,name:e,kind:t.locals[e],removed:!0}),delete t.locals[e],h(t,n))}hasClass(t){return this.classNames[t]}refreshClass(){const t=this.cm,e=this.getClassName();i.a.each(this.elements,n=>{t.setElementClassName(n,e)})}addClass(t){this.classNames[t]=!0,this.refreshClass()}removeClass(t){delete this.classNames[t],this.refreshClass()}getClassName(){let t,e="";for(t in this.classNames)this.classNames.hasOwnProperty(t)&&(e+="cm-".concat(t," "));return e}getBoundingRect(){const{cm:t,content:e,pos:n,line:o}=this,i=e?e.length:0,r=t.getLineNumber(o);let l=1/0,c=1/0,a=-1/0,u=-1/0;for(let e=0;e<i;e++){const o=t.charCoords({ch:n+e,line:r});l=Math.min(l,o.left),c=Math.min(c,o.charTop),a=Math.max(a,o.right),u=Math.max(u,o.charBottom)}return new s.a(l-window.pageXOffset,c-window.pageYOffset,a-l,u-c)}setLocal(t){this.localMarker&&(this.removeClass(this.localMarker),this.localMarker=null),t&&(this.addClass(t),this.localMarker=t)}getCSS(){const t=this.classNames;function e(e){return t[e]}return e("func")?{"font-style":"italic",color:"#438958"}:e("module")?{color:"#438958"}:e("iterator")?{color:"rgb(60, 125, 145)"}:e("slot")?{color:"rgb(194,84,204)"}:e("keyword")?{color:"black"}:e("identifier")?{color:"rgb(0,44,195)"}:e("string")?{color:"rgb(40%,40%,40%)"}:e("comment")?{color:"rgb(60%,60%,60%)"}:{}}}},vzNxhm:function(t,e,n){}}]);