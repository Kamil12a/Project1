(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"0PWhJb":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultBufferLength=1024;var o=function(){function e(e,t){this.enter=e,this.leave=t,this.result=void 0}return Object.defineProperty(e.prototype,"done",{get:function(){return void 0!==this.result},enumerable:!0,configurable:!0}),e.prototype.doEnter=function(e,t,n){var r=this.enter(e,t,n);return void 0===r||(!1!==r&&(this.result=r),!1)},e}(),a=0,s=function(){function e(e){var t=(void 0===e?{}:e).deserialize;this.id=a++,this.deserialize=t||function(){throw new Error("This node type doesn't define a deserialize function")}}return e.string=function(){return new e({deserialize:function(e){return e}})},e.number=function(){return new e({deserialize:Number})},e.flag=function(){return new e({deserialize:function(){return!0}})},e.prototype.set=function(e,t){return e[this.id]=t,e},e.prototype.add=function(e){return new c(this,"function"==typeof e?e:u.match(e))},e.error=e.flag(),e.skipped=e.flag(),e.delim=e.string(),e.top=e.flag(),e}();t.NodeProp=s;var c=function(){function e(e,t){this.prop=e,this.f=t}return e}();t.NodePropSource=c;var u=function(){function e(e,t,n){this.name=e,this.props=t,this.id=n}return e.prototype.prop=function(e){return this.props[e.id]},e.match=function(e){var t=Object.create(null);for(var n in e)for(var r=0,i=n.split(" ");r<i.length;r++){var o=i[r];t[o]=e[n]}return function(e){return t[e.name]}},e.none=new e("",Object.create(null),0),e}();t.NodeType=u;var f=function(){function e(e){this.types=e;for(var t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node group")}return e.prototype.extend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=this.types;i<o.length;i++){for(var a=o[i],s=null,c=0,f=t;c<f.length;c++){var h=f[c],d=h.f(a);if(void 0!==d){if(!s)for(var l in s=Object.create(null),a.props)s[l]=a.props[l];s[h.prop.id]=d}}r.push(s?new u(a.name,s,a.id):a)}return new e(r)},e}();t.NodeGroup=f;var h=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return this.type.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){for(var e=0,t=this.parent;t;t=t.parent)e++;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e.parent;)e=e.parent;return e},enumerable:!0,configurable:!0}),e.prototype.resolve=function(e,t){void 0===t&&(t=0);var n=this.resolveAt(e);if(0!=t)for(;;){var r=t<0?n.childBefore(e):n.childAfter(e);if(!r||(t<0?r.end:r.start)!=e)break;n=r}return n},Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.childAfter(this.start-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.childBefore(this.end+1)},enumerable:!0,configurable:!0}),e}();t.Subtree=h;var d=function(e){function n(t,n,r,i){var o=e.call(this)||this;return o.type=t,o.children=n,o.positions=r,o.length=i,o}return i(n,e),Object.defineProperty(n.prototype,"start",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"end",{get:function(){return this.length},enumerable:!0,configurable:!0}),n.prototype.toString=function(){var e=this.children.map(function(e){return e.toString()}).join();return this.name?(/\W/.test(this.name)&&!this.type.prop(s.error)?JSON.stringify(this.name):this.name)+(e.length?"("+e+")":""):e},n.prototype.partial=function(e,t,r,i,o){for(var a=0;a<this.children.length;a++){var s=this.positions[a];if(s>t)break;var c=this.children[a],u=s+c.length;u<e||(e<=s&&t>=u?(i.push(c),o.push(s+r)):c instanceof n&&c.partial(e-s,t-s,r+s,i,o))}},n.prototype.applyChanges=function(e){if(0==e.length)return this;var t=[],r=[];function i(e,t,n){var r=-1;return e.iterate({from:t,to:n<0?0:e.length,enter:function(){return r<0&&void 0},leave:function(e,i,o){r<0&&(n<0?o<=t:i>=t)&&!e.prop(s.error)&&(r=n<0?Math.min(t,o-1):Math.max(t,i+1))}}),r>-1?r:n<0?0:e.length}for(var o=0,a=0,c=0;;a++){var f=a==e.length?null:e[a],h=f?i(this,f.fromA,-1):this.length;if(h>c&&this.partial(c,h,o,t,r),!f)break;c=i(this,f.toA,1),o+=f.toB-f.fromB-(f.toA-f.fromA)}return new n(u.none,t,r,this.length+o)},n.prototype.cut=function(e){if(e>=this.length)return this;for(var t=[],r=[],i=0;i<this.children.length;i++){var o=this.positions[i];if(o>=e)break;var a=this.children[i],s=o+a.length;t.push(s<=e?a:a.cut(e-o)),r.push(o)}return new n(this.type,t,r,e)},n.prototype.iterate=function(e){var t=e.from,n=void 0===t?this.start:t,r=e.to,i=void 0===r?this.end:r,a=e.enter,s=e.leave,c=new o(a,s);return this.iterInner(n,i,0,c),c.result},n.prototype.iterInner=function(e,t,n,r){if(!this.type.name||r.doEnter(this.type,n,n+this.length)){if(e<=t)for(var i=0;i<this.children.length&&!r.done;i++){var o=this.children[i],a=(s=this.positions[i]+n)+o.length;if(s>t)break;a<e||o.iterInner(e,t,s,r)}else for(i=this.children.length-1;i>=0&&!r.done;i--){var s;o=this.children[i];if((a=(s=this.positions[i]+n)+o.length)<t)break;s>e||o.iterInner(e,t,s,r)}r.leave&&this.type.name&&r.leave(this.type,n,n+this.length)}},n.prototype.resolveAt=function(e){if(l==this)for(var t=p;;){var n=t.parent;if(!n)break;if(t.start<e&&t.end>e)return t.resolve(e);t=n}return l=this,p=this.resolveInner(e,0,this)},n.prototype.childBefore=function(e){return this.findChild(e,-1,0,this)},n.prototype.childAfter=function(e){return this.findChild(e,1,0,this)},n.prototype.findChild=function(e,t,r,i){for(var o=0;o<this.children.length;o++){var a=this.positions[o]+r,s=-1;if(a>=e)if(t<0&&o>0)s=o-1;else{if(!(t>0))break;s=o}if(s<0&&(a+this.children[o].length>e||t<0&&o==this.children.length-1)&&(s=o),s>=0){var c=this.children[s],u=this.positions[s]+r;if(0==c.length&&u==e)continue;if(c instanceof n)return c.type.name?new v(c,u,i):c.findChild(e,t,u,i);var f=c.findIndex(e,t,u,0,c.buffer.length);if(f>-1)return new m(c,u,f,i)}}return null},n.prototype.resolveInner=function(e,t,n){var r=this.findChild(e,0,t,n);return r?r.resolveAt(e):n},n.prototype.append=function(e){if(e.children.length&&e.positions[0]<this.length)throw new Error("Can't append overlapping trees");return new n(this.type,this.children.concat(e.children),this.positions.concat(e.positions),e.length)},n.prototype.balance=function(e){return void 0===e&&(e=t.DefaultBufferLength),this.children.length<=R?this:C(this.type,u.none,this.children,this.positions,0,this.children.length,0,e,this.length)},n.build=function(e){return b(e)},n.empty=new n(u.none,[],[],0),n}(h);t.Tree=d,d.prototype.parent=null;var l=d.empty,p=d.empty,g=function(){function e(e,t,n,r){void 0===r&&(r=u.none),this.buffer=e,this.length=t,this.group=n,this.type=r}return e.prototype.toString=function(){for(var e=[],t=0;t<this.buffer.length;)t=this.childToString(t,e);return e.join(",")},e.prototype.childToString=function(e,t){var n=this.buffer[e],r=this.buffer[e+3],i=this.group.types[n],o=i.name;if(/\W/.test(o)&&!i.prop(s.error)&&(o=JSON.stringify(o)),r>(e+=4)){for(var a=[];e<r;)e=this.childToString(e,a);o+="("+a.join(",")+")"}return t.push(o),e},e.prototype.cut=function(t){for(var n=0;n<this.buffer.length&&this.buffer[n+1]<t;)n+=4;for(var r=new Uint16Array(n),i=0;i<n;i+=4)r[i]=this.buffer[i],r[i+1]=this.buffer[i+1],r[i+2]=Math.min(t,this.buffer[i+2]),r[i+3]=Math.min(this.buffer[i+3],n);return new e(r,Math.min(t,this.length),this.group)},e.prototype.iterate=function(e){var t=e.from,n=void 0===t?0:t,r=e.to,i=void 0===r?this.length:r,a=e.enter,s=e.leave,c=new o(a,s);return this.iterInner(n,i,0,c),c.result},e.prototype.iterInner=function(e,t,n,r){if(e<=t)for(var i=0;i<this.buffer.length;)i=this.iterChild(e,t,n,i,r);else this.iterRev(e,t,n,0,this.buffer.length,r)},e.prototype.iterChild=function(e,t,n,r,i){var o=this.group.types[this.buffer[r++]],a=this.buffer[r++]+n,s=this.buffer[r++]+n,c=this.buffer[r++];if(a>t)return this.buffer.length;if(s>=e&&i.doEnter(o,a,s)){for(;r<c&&!i.done;)r=this.iterChild(e,t,n,r,i);i.leave&&i.leave(o,a,s)}return c},e.prototype.parentNodesByEnd=function(e,t){for(var n=this,r=[],i=function(e){var t=n.buffer[e+3];if(t==e+4)return t;for(var o=e+4;o<t;)o=i(o);return r.push(e),t},o=e;o<t;)o=i(o);return r},e.prototype.iterRev=function(e,t,n,r,i,o){var a=this,s=this.parentNodesByEnd(r,i),c=-1,u=-1,f=function(){s.length>0?(c=s.pop(),u=a.buffer[c+3]):u=-1};f();e:for(var h=i;h>r&&!o.done;){for(;u==h;){var d=c,l=this.buffer[d],p=this.buffer[d+1]+n,g=this.buffer[d+2]+n;if(f(),p<=e&&g>=t&&!o.doEnter(this.group.types[l],p,g)){for(h=d;u>d;)f();continue e}}var v=this.buffer[--h],m=this.buffer[--h]+n,y=this.buffer[--h]+n,R=this.buffer[--h];y>e||m<t||(v!=h+4||o.doEnter(this.group.types[R],y,m))&&o.leave&&o.leave(this.group.types[R],y,m)}},e.prototype.findIndex=function(e,t,n,r,i){for(var o=-1,a=r,s=this.buffer;a<i;){var c=s[a+1]+n,u=s[a+2]+n,f=c==u&&c==e;if(c>=e){if(t>0&&!f)return a;break}if(u>e)return a;f||(o=a),a=s[a+3]}return t<0?o:-1},e}();t.TreeBuffer=g;var v=function(e){function t(t,n,r){var i=e.call(this)||this;return i.node=t,i.start=n,i.parent=r,i}return i(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this.node.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.start+this.node.length},enumerable:!0,configurable:!0}),t.prototype.resolveAt=function(e){return e<=this.start||e>=this.end?this.parent.resolveAt(e):this.node.resolveInner(e,this.start,this)},t.prototype.childBefore=function(e){return this.node.findChild(e,-1,this.start,this)},t.prototype.childAfter=function(e){return this.node.findChild(e,1,this.start,this)},t.prototype.toString=function(){return this.node.toString()},t.prototype.iterate=function(e){var t=e.from,n=void 0===t?this.start:t,r=e.to,i=void 0===r?this.end:r,a=e.enter,s=e.leave,c=new o(a,s);return this.node.iterInner(n,i,this.start,c),c.result},t}(h),m=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.buffer=t,o.bufferStart=n,o.index=r,o.parent=i,o}return i(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this.buffer.group.types[this.buffer.buffer[this.index]]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this.buffer.buffer[this.index+1]+this.bufferStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this.buffer.buffer[this.index+2]+this.bufferStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endIndex",{get:function(){return this.buffer.buffer[this.index+3]},enumerable:!0,configurable:!0}),t.prototype.childBefore=function(e){var n=this.buffer.findIndex(e,-1,this.bufferStart,this.index+4,this.endIndex);return n<0?null:new t(this.buffer,this.bufferStart,n,this)},t.prototype.childAfter=function(e){var n=this.buffer.findIndex(e,1,this.bufferStart,this.index+4,this.endIndex);return n<0?null:new t(this.buffer,this.bufferStart,n,this)},t.prototype.iterate=function(e){var t=e.from,n=void 0===t?this.start:t,r=e.to,i=void 0===r?this.end:r,a=e.enter,s=e.leave,c=new o(a,s);return n<=i?this.buffer.iterChild(n,i,this.bufferStart,this.index,c):this.buffer.iterRev(n,i,this.bufferStart,this.index,this.endIndex,c),c.result},t.prototype.resolveAt=function(e){if(e<=this.start||e>=this.end)return this.parent.resolveAt(e);var n=this.buffer.findIndex(e,0,this.bufferStart,this.index+4,this.endIndex);return n<0?this:new t(this.buffer,this.bufferStart,n,this).resolveAt(e)},t.prototype.toString=function(){var e=[];return this.buffer.childToString(this.index,e),e.join("")},t}(h),y=function(){function e(e,t){this.buffer=e,this.index=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this.index},enumerable:!0,configurable:!0}),e.prototype.next=function(){this.index-=4},e.prototype.fork=function(){return new e(this.buffer,this.index)},e}(),R=8;function b(e){var n=e,r=n.buffer,i=n.group,o=n.topID,a=void 0===o?0:o,s=n.maxBufferLength,c=void 0===s?t.DefaultBufferLength:s,f=n.reused,h=void 0===f?[]:f,l=n.minRepeatType,p=void 0===l?i.types.length:l,v=Array.isArray(r)?new y(r,r.length):r,m=i.types;function b(e,t,n,r,o){var a,s=v.id,f=v.start,l=v.end,y=v.size,x=f-e;if(y<0)return n.push(h[s]),r.push(x),void v.next();var w,T=m[s];if(l-f<=c&&(a=N(v.pos-t))){for(var E=new Uint16Array(a.size-a.skip),O=v.pos-a.size,P=E.length;v.pos>O;)P=S(a.start,E,P);w=new g(E,l-a.start,i,o),x=a.start-e}else{O=v.pos-y;v.next();var k=[],A=[],_=s>=i.types.length?s-(i.types.length-p):-1;if(_>-1)for(T=m[_];v.pos>O;){b(f,O,k,A,v.id==_?T:u.none)}else for(;v.pos>O;)b(f,O,k,A,u.none);k.reverse(),A.reverse(),w=_>-1&&k.length>R?C(T,T,k,A,0,k.length,0,c,l-f):new d(T,k,A,l-f)}n.push(w),r.push(x)}function N(e){var t=v.fork(),n=0,r=0,i=0,o=t.end-c;e:for(var a=t.pos-e;t.pos>a;){var s=t.size,u=t.pos-s;if(s<0||u<a||t.start<o)break;var f=t.id>=p?4:0,h=t.start;for(t.next();t.pos>u;){if(t.size<0)break e;t.id>=p&&(f+=4),t.next()}r=h,n+=s,i+=f}return n>4?{size:n,start:r,skip:i}:null}function S(e,t,n){var r=v.id,i=v.start,o=v.end,a=v.size;v.next();var s=n;if(a>4)for(var c=v.pos-(a-4);v.pos>c;)n=S(e,t,n);return r<p&&(t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r),n}for(var x=[],w=[];v.pos>0;)b(0,0,x,w,u.none);var T=x.length?w[0]+x[0].length:0;return new d(i.types[a],x.reverse(),w.reverse(),T)}function C(e,t,n,r,i,o,a,s,c){var f=[],h=[];if(c<=s)for(var l=i;l<o;l++)f.push(n[l]),h.push(r[l]-a);else{var p=Math.max(s,Math.ceil(1.5*c/R));for(l=i;l<o;){var g=l,v=r[l];for(l++;l<o;l++){if(r[l]+n[l].length-v>p)break}if(l==g+1){var m=n[g];if(m instanceof d&&m.type==t&&m.length>p<<1){for(var y=0;y<m.children.length;y++)f.push(m.children[y]),h.push(m.positions[y]+v-a);continue}f.push(m)}else if(l==g+1)f.push(n[g]);else{var b=C(t,t,n,r,g,l,v,s,r[l-1]+n[l-1].length-v);t==u.none||N(b.children,t)||(b=new d(u.none,b.children,b.positions,b.length)),f.push(b)}h.push(v-a)}}return new d(e,f,h,c)}function N(e,t){for(var n=0,r=e;n<r.length;n++){if(r[n].type==t)return!0}return!1}},"7jD/RW":function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(){var e="object",t="function",n="undefined",r=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],i=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],o=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],a=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function s(n,r){var i=typeof n[r];return i==t||!(i!=e||!n[r])||"unknown"==i}function c(t,n){return!(typeof t[n]!=e||!t[n])}function u(e,t){return typeof e[t]!=n}function f(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}var h=f(s),d=f(c),l=f(u);function p(e){return e&&h(e,a)&&l(e,o)}function g(e){return c(e,"body")?e.body:e.getElementsByTagName("body")[0]}var v,m,y={},R=typeof window!=n&&typeof document!=n,b={isHostMethod:s,isHostObject:c,isHostProperty:u,areHostMethods:h,areHostObjects:d,areHostProperties:l,isTextRange:p,getBody:g,forEach:[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n],n)}},C={version:"1.3.0",initialized:!1,isBrowser:R,supported:!0,util:b,features:{},modules:y,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==n||rangyAutoInitialize}};function N(e){typeof console!=n&&s(console,"log")&&console.log(e)}function S(e,t){R&&t?alert(e):N(e)}function x(e){C.initialized=!0,C.supported=!1,S("Rangy is not supported in this environment. Reason: "+e,C.config.alertOnFail)}function w(e){S("Rangy warning: "+e,C.config.alertOnWarn)}C.fail=x,C.warn=w,!{}.hasOwnProperty?x("hasOwnProperty not supported"):(b.extend=v=function(e,t,n){var r,i;for(var o in t)t.hasOwnProperty(o)&&(r=e[o],i=t[o],n&&null!==r&&"object"==typeof r&&null!==i&&"object"==typeof i&&v(r,i,!0),e[o]=i);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},b.createOptions=function(e,t){var n={};return v(n,t),e&&v(n,e),n}),R||x("Rangy can only run in a browser"),function(){var e;if(R){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e[n];return t}),b.toArray=e}(),R&&(s(document,"addEventListener")?m=function(e,t,n){e.addEventListener(t,n,!1)}:s(document,"attachEvent")?m=function(e,t,n){e.attachEvent("on"+t,n)}:x("Document does not have required addEventListener or attachEvent method"),b.addListener=m);var T=[];function E(e){return e.message||e.description||String(e)}function O(){if(R&&!C.initialized){var e,t=!1,n=!1;s(document,"createRange")&&(e=document.createRange(),h(e,i)&&l(e,r)&&(t=!0));var o=g(document);if(o&&"body"==o.nodeName.toLowerCase())if(o&&s(o,"createTextRange")&&p(e=o.createTextRange())&&(n=!0),t||n){var a;for(var c in C.initialized=!0,C.features={implementsDomRange:t,implementsTextRange:n},y)(a=y[c])instanceof D&&a.init(a,C);for(var u=0,f=T.length;u<f;++u)try{T[u](C)}catch(e){N("Rangy init listener threw an exception. Continuing. Detail: "+E(e))}}else x("Neither Range nor TextRange are available");else x("No body element found")}}function P(e,t,n){n&&(e+=" in module "+n.name),C.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function k(e,t,n,r){e[t]=function(){return P(t,n,r),e[n].apply(e,b.toArray(arguments))}}b.deprecationNotice=P,b.createAliasForDeprecatedMethod=k,C.init=O,C.addInitListener=function(e){C.initialized?e(C):T.push(e)};var A=[];function _(e){e=e||window,O();for(var t=0,n=A.length;t<n;++t)A[t](e)}function D(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function B(e,t,n){var r=new D(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(C,t),t.supported=!0}catch(t){N("Module '"+e+"' failed to load: "+E(t)),t.stack&&N(t.stack)}}});return y[e]=r,r}function I(){}function L(){}C.addShimListener=function(e){A.push(e)},R&&(C.shim=C.createMissingNativeApi=_,k(C,"createMissingNativeApi","shim")),D.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,i=n.length;r<i;++r){if(t=n[r],!((e=y[t])&&e instanceof D))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){C.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){C.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},C.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var r=B(e,n,t);C.initialized&&C.supported&&r.init()},C.createCoreModule=function(e,t,n){B(e,t,n)},C.RangePrototype=I,C.rangePrototype=new I,C.selectionPrototype=new L,C.createCoreModule("DomUtil",[],function(e,t){var n="undefined",r=e.util,i=r.getBody;r.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),r.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var o=document.createElement("div");r.areHostMethods(o,["insertBefore","appendChild","cloneNode"]||!1)||t.fail("Incomplete Element implementation"),r.isHostProperty(o,"innerHTML")||t.fail("Element is missing innerHTML property");var a=document.createTextNode("test");r.areHostMethods(a,["splitText","deleteData","insertData","appendData","cloneNode"]||!1)||t.fail("Incomplete Text Node implementation");var s=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};function c(e){var t;return typeof e.namespaceURI==n||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function u(e){var t=e.parentNode;return 1==t.nodeType?t:null}function f(e){for(var t=0;e=e.previousSibling;)++t;return t}function h(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function d(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(s(r,n))return n;return null}function l(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function p(e,t){return l(e,t,!0)}function g(e,t,n){for(var r,i=n?e:e.parentNode;i;){if((r=i.parentNode)===t)return i;i=r}return null}function v(e){var t=e.nodeType;return 3==t||4==t||8==t}function m(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function y(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function R(e,t,n){var r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),y(r,e),n)for(var i,o=0;i=n[o++];)i.node==e&&i.offset>t?(i.node=r,i.offset-=t):i.node==e.parentNode&&i.offset>f(e)&&++i.offset;return r}function b(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=n)return e.ownerDocument;if(typeof e.document!=n)return e.document;if(e.parentNode)return b(e.parentNode);throw t.createError("getDocument: no document found for node")}function C(e){var r=b(e);if(typeof r.defaultView!=n)return r.defaultView;if(typeof r.parentWindow!=n)return r.parentWindow;throw t.createError("Cannot get a window object for node")}function N(e){if(typeof e.contentDocument!=n)return e.contentDocument;if(typeof e.contentWindow!=n)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function S(e){if(typeof e.contentWindow!=n)return e.contentWindow;if(typeof e.contentDocument!=n)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function x(e){return e&&r.isHostMethod(e,"setTimeout")&&r.isHostObject(e,"document")}function w(e,t,n){var i;if(e?r.isHostProperty(e,"nodeType")?i=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?N(e):b(e):x(e)&&(i=e.document):i=document,!i)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return i}function T(e){for(var t;t=e.parentNode;)e=t;return e}function E(e,n,r,i){var o,a,s,c,u;if(e==r)return n===i?0:n<i?-1:1;if(o=g(r,e,!0))return n<=f(o)?-1:1;if(o=g(e,r,!0))return f(o)<i?-1:1;if(!(a=d(e,r)))throw new Error("comparePoints error: nodes have no common ancestor");if((s=e===a?a:g(e,a,!0))===(c=r===a?a:g(r,a,!0)))throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(u=a.firstChild;u;){if(u===s)return-1;if(u===c)return 1;u=u.nextSibling}}var O,P=!1;function k(e){try{return e.parentNode,!1}catch(e){return!0}}function A(e){if(!e)return"[No node]";if(P&&k(e))return"[Broken node]";if(v(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+f(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function _(e){for(var t,n=b(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function D(e,t,n){var r=i(e),o=e.createElement("div");o.contentEditable=""+!!n,t&&(o.innerHTML=t);var a=r.firstChild;return a?r.insertBefore(o,a):r.appendChild(o),o}function B(e){return e.parentNode.removeChild(e)}function I(e){this.root=e,this._next=e}function L(e){return new I(e)}function M(e,t){this.node=e,this.offset=t}function W(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",P=k(n),e.features.crashyTextNodes=P}(),typeof window.getComputedStyle!=n?O=function(e,t){return C(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=n?O=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),I.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},M.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+A(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},W.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},W.prototype.toString=function(){return this.message},e.dom={arrayContains:s,isHtmlNamespace:c,parentElement:u,getNodeIndex:f,getNodeLength:h,getCommonAncestor:d,isAncestorOf:l,isOrIsAncestorOf:p,getClosestAncestorIn:g,isCharacterDataNode:v,isTextOrCommentNode:m,insertAfter:y,splitDataNode:R,getDocument:b,getWindow:C,getIframeWindow:S,getIframeDocument:N,getBody:i,isWindow:x,getContentDocument:w,getRootContainer:T,comparePoints:E,isBrokenNode:k,inspectNode:A,getComputedStyleProperty:O,createTestElement:D,removeNode:B,fragmentFromNodeChildren:_,createIterator:L,DomPosition:M},e.DOMException=W}),C.createCoreModule("DomRange",["DomUtil"],function(e,t){var n=e.dom,r=e.util,i=n.DomPosition,o=e.DOMException,a=n.isCharacterDataNode,s=n.getNodeIndex,c=n.isOrIsAncestorOf,u=n.getDocument,f=n.comparePoints,h=n.splitDataNode,d=n.getClosestAncestorIn,l=n.getNodeLength,p=n.arrayContains,g=n.getRootContainer,v=e.features.crashyTextNodes,m=n.removeNode;function y(e,t){return 3!=e.nodeType&&(c(e,t.startContainer)||c(e,t.endContainer))}function R(e){return e.document||u(e.startContainer)}function b(e){return g(e.startContainer)}function C(e){return new i(e.parentNode,s(e))}function N(e){return new i(e.parentNode,s(e)+1)}function S(e,t,r){var i=11==e.nodeType?e.firstChild:e;return a(t)?r==t.length?n.insertAfter(e,t):t.parentNode.insertBefore(e,0==r?t:h(t,r)):r>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[r]),i}function x(e,t,n){if(J(e),J(t),R(t)!=R(e))throw new o("WRONG_DOCUMENT_ERR");var r=f(e.startContainer,e.startOffset,t.endContainer,t.endOffset),i=f(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?r<=0&&i>=0:r<0&&i>0}function w(e){for(var t,n,r,i=R(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(r=e.getSubtreeIterator(),n.appendChild(w(r)),r.detach()),10==n.nodeType)throw new o("HIERARCHY_REQUEST_ERR");i.appendChild(n)}return i}function T(e,t,r){var i,o,a,s;for(r=r||{stop:!1};a=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(a))return void(r.stop=!0);if(T(s=e.getSubtreeIterator(),t,r),s.detach(),r.stop)return}else for(i=n.createIterator(a);o=i.next();)if(!1===t(o))return void(r.stop=!0)}function E(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(E(t=e.getSubtreeIterator()),t.detach()):e.remove()}function O(e){for(var t,n,r=R(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(O(n)),n.detach()):e.remove(),10==t.nodeType)throw new o("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function P(e,t,n){var r,i=!(!t||!t.length),o=!!n;i&&(r=new RegExp("^("+t.join("|")+")$"));var s=[];return T(new A(e,!1),function(t){if((!i||r.test(t.nodeType))&&(!o||n(t))){var c=e.startContainer;if(t!=c||!a(c)||e.startOffset!=c.length){var u=e.endContainer;t==u&&a(u)&&0==e.endOffset||s.push(t)}}}),s}function k(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function A(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&a(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||a(this.sc)?d(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||a(this.ec)?d(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}A.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,a(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!a(n)||n!==this.sc&&n!==this.ec?n.parentNode&&m(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return y(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new ve(R(this.range));var t=this._current,n=t,r=0,i=t,o=l(t);c(t,this.sc)&&(n=this.sc,r=this.so),c(t,this.ec)&&(i=this.ec,o=this.eo),ge(e,n,r,i,o)}return new A(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var _=[1,3,4,5,7,8,10],D=[2,9,11],B=[5,6,10,12],I=[1,3,4,5,7,8,10,11],L=[1,3,4,5,7,8];function M(e){return function(t,n){for(var r,i=n?t:t.parentNode;i;){if(r=i.nodeType,p(e,r))return i;i=i.parentNode}return null}}var W=M([9,11]),j=M(B),H=M([6,10,12]);function F(e,t){if(H(e,t))throw new o("INVALID_NODE_TYPE_ERR")}function z(e,t){if(!p(t,e.nodeType))throw new o("INVALID_NODE_TYPE_ERR")}function V(e,t){if(t<0||t>(a(e)?e.length:e.childNodes.length))throw new o("INDEX_SIZE_ERR")}function U(e,t){if(W(e,!0)!==W(t,!0))throw new o("WRONG_DOCUMENT_ERR")}function G(e){if(j(e,!0))throw new o("NO_MODIFICATION_ALLOWED_ERR")}function q(e,t){if(!e)throw new o(t)}function $(e,t){return t<=(a(e)?e.length:e.childNodes.length)}function Y(e){return!!e.startContainer&&!!e.endContainer&&!(v&&(n.isBrokenNode(e.startContainer)||n.isBrokenNode(e.endContainer)))&&g(e.startContainer)==g(e.endContainer)&&$(e.startContainer,e.startOffset)&&$(e.endContainer,e.endOffset)}function J(e){if(!Y(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}var Q=document.createElement("style"),K=!1;try{Q.innerHTML="<b>x</b>",K=3==Q.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=K;var X=K?function(e){var t=this.startContainer,r=u(t);if(!t)throw new o("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:a(t)&&(i=n.parentElement(t)),(i=null===i||"HTML"==i.nodeName&&n.isHtmlNamespace(u(i).documentElement)&&n.isHtmlNamespace(i)?r.createElement("body"):i.cloneNode(!1)).innerHTML=e,n.fragmentFromNodeChildren(i)}:function(e){var t=R(this).createElement("body");return t.innerHTML=e,n.fragmentFromNodeChildren(t)};function Z(e,t){J(e);var n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,c=n===i;a(i)&&o>0&&o<i.length&&h(i,o,t),a(n)&&r>0&&r<n.length&&(n=h(n,r,t),c?(o-=r,i=n):i==n.parentNode&&o>=s(n)&&o++,r=0),e.setStartAndEnd(n,r,i,o)}function ee(e){J(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var te=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ne=0,re=1,ie=2,oe=3,ae=0,se=1,ce=2,ue=3;function fe(e){e.START_TO_START=ne,e.START_TO_END=re,e.END_TO_END=ie,e.END_TO_START=oe,e.NODE_BEFORE=ae,e.NODE_AFTER=se,e.NODE_BEFORE_AND_AFTER=ce,e.NODE_INSIDE=ue}function he(e){fe(e),fe(e.prototype)}function de(e,t){return function(){J(this);var n,r=this.startContainer,i=this.startOffset,o=this.commonAncestorContainer,a=new A(this,!0);r!==o&&(r=(n=N(d(r,o,!0))).node,i=n.offset),T(a,G),a.reset();var s=e(a);return a.detach(),t(this,r,i,r,i),s}}function le(t,n){function i(e,t){return function(n){z(n,_),z(g(n),D);var r=(e?C:N)(n);(t?o:c)(this,r.node,r.offset)}}function o(e,t,r){var i=e.endContainer,o=e.endOffset;t===e.startContainer&&r===e.startOffset||(g(t)==g(i)&&1!=f(t,r,i,o)||(i=t,o=r),n(e,t,r,i,o))}function c(e,t,r){var i=e.startContainer,o=e.startOffset;t===e.endContainer&&r===e.endOffset||(g(t)==g(i)&&-1!=f(t,r,i,o)||(i=t,o=r),n(e,i,o,t,r))}var u=function(){};u.prototype=e.rangePrototype,t.prototype=new u,r.extend(t.prototype,{setStart:function(e,t){F(e,!0),V(e,t),o(this,e,t)},setEnd:function(e,t){F(e,!0),V(e,t),c(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],r=e[1],i=t,o=r;switch(e.length){case 3:o=e[2];break;case 4:i=e[2],o=e[3]}n(this,t,r,i,o)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:i(!0,!0),setStartAfter:i(!1,!0),setEndBefore:i(!0,!1),setEndAfter:i(!1,!1),collapse:function(e){J(this),e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){F(e,!0),n(this,e,0,e,l(e))},selectNode:function(e){F(e,!1),z(e,_);var t=C(e),r=N(e);n(this,t.node,t.offset,r.node,r.offset)},extractContents:de(O,n),deleteContents:de(E,n),canSurroundContents:function(){J(this),G(this.startContainer),G(this.endContainer);var e=new A(this,!0),t=e._first&&y(e._first,this)||e._last&&y(e._last,this);return e.detach(),!t},splitBoundaries:function(){Z(this)},splitBoundariesPreservingPositions:function(e){Z(this,e)},normalizeBoundaries:function(){J(this);var e,t=this.startContainer,r=this.startOffset,i=this.endContainer,o=this.endOffset,c=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,o=e.length,e.appendData(t.data),m(t))},u=function(e){var n=e.previousSibling;if(n&&n.nodeType==e.nodeType){t=e;var a=e.length;if(r=n.length,e.insertData(0,n.data),m(n),t==i)o+=r,i=t;else if(i==e.parentNode){var c=s(e);o==c?(i=e,o=a):o>c&&o--}}},f=!0;if(a(i))o==i.length?c(i):0==o&&(e=i.previousSibling)&&e.nodeType==i.nodeType&&(o=e.length,t==i&&(f=!1),e.appendData(i.data),m(i),i=e);else{if(o>0){var h=i.childNodes[o-1];h&&a(h)&&c(h)}f=!this.collapsed}if(f){if(a(t))0==r?u(t):r==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType&&(i==e&&(i=t,o+=t.length),t.appendData(e.data),m(e));else if(r<t.childNodes.length){var d=t.childNodes[r];d&&a(d)&&u(d)}}else t=i,r=o;n(this,t,r,i,o)},collapseToPoint:function(e,t){F(e,!0),V(e,t),this.setStartAndEnd(e,t)}}),he(t)}function pe(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function ge(e,t,r,i,o){e.startContainer=t,e.startOffset=r,e.endContainer=i,e.endOffset=o,e.document=n.getDocument(t),pe(e)}function ve(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,pe(this)}r.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){var n,r,i,o;J(this),U(this.startContainer,t.startContainer);var a=e==oe||e==ne?"start":"end",s=e==re||e==ne?"start":"end";return n=this[a+"Container"],r=this[a+"Offset"],i=t[s+"Container"],o=t[s+"Offset"],f(n,r,i,o)},insertNode:function(e){if(J(this),z(e,I),G(this.startContainer),c(e,this.startContainer))throw new o("HIERARCHY_REQUEST_ERR");var t=S(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(J(this),this.collapsed)return R(this).createDocumentFragment();if(this.startContainer===this.endContainer&&a(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=R(this).createDocumentFragment()).appendChild(e),t;var n=new A(this,!0);return e=w(n),n.detach(),e},canSurroundContents:function(){J(this),G(this.startContainer),G(this.endContainer);var e=new A(this,!0),t=e._first&&y(e._first,this)||e._last&&y(e._last,this);return e.detach(),!t},surroundContents:function(e){if(z(e,L),!this.canSurroundContents())throw new o("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);S(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){J(this);for(var e,t=new ve(R(this)),n=te.length;n--;)t[e=te[n]]=this[e];return t},toString:function(){J(this);var e=this.startContainer;if(e===this.endContainer&&a(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new A(this,!0);return T(n,function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){J(this);var t=e.parentNode,n=s(e);if(!t)throw new o("NOT_FOUND_ERR");var r=this.comparePoint(t,n),i=this.comparePoint(t,n+1);return r<0?i>0?ce:ae:i>0?se:ue},comparePoint:function(e,t){return J(this),q(e,"HIERARCHY_REQUEST_ERR"),U(e,this.startContainer),f(e,t,this.startContainer,this.startOffset)<0?-1:f(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:X,toHtml:function(){return ee(this)},intersectsNode:function(e,t){if(J(this),g(e)!=b(this))return!1;var n=e.parentNode,r=s(e);if(!n)return!0;var i=f(n,r,this.endContainer,this.endOffset),o=f(n,r+1,this.startContainer,this.startOffset);return t?i<=0&&o>=0:i<0&&o>0},isPointInRange:function(e,t){return J(this),q(e,"HIERARCHY_REQUEST_ERR"),U(e,this.startContainer),f(e,t,this.startContainer,this.startOffset)>=0&&f(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return x(this,e,!1)},intersectsOrTouchesRange:function(e){return x(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=f(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=f(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==f(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==f(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new o("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==ue},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,l(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();return t.setEnd(r,r.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return J(this),P(this,e,t)},getDocument:function(){return R(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var r=R(this),i=e.createRange(r);t=t||n.getBody(r),i.selectNodeContents(t);var o=this.intersection(i),a=0,s=0;return o&&(i.setEnd(o.startContainer,o.startOffset),s=(a=i.toString().length)+o.toString().length),{start:a,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var r,i,o,a,s=[t],c=!1,u=!1;!u&&(r=s.pop());)if(3==r.nodeType)i=n+r.length,!c&&e.start>=n&&e.start<=i&&(this.setStart(r,e.start-n),c=!0),c&&e.end>=n&&e.end<=i&&(this.setEnd(r,e.end-n),u=!0),n=i;else for(o=(a=r.childNodes).length;o--;)s.push(a[o])},getName:function(){return"DomRange"},equals:function(e){return ve.rangesEqual(this,e)},isValid:function(){return Y(this)},inspect:function(){return k(this)},detach:function(){}}),le(ve,ge),r.extend(ve,{rangeProperties:te,RangeIterator:A,copyComparisonConstants:he,createPrototypeRange:le,inspect:k,toHtml:ee,getRangeDocument:R,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=ve}),C.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,r,i=e.dom,o=e.util,a=i.DomPosition,s=e.DomRange,c=i.getBody,u=i.getContentDocument,f=i.isCharacterDataNode;if(e.features.implementsDomRange&&function(){var r,a,f=s.rangeProperties;function h(e){for(var t,n=f.length;n--;)e[t=f[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function d(e,t,n,r,i){var o=e.startContainer!==t||e.startOffset!=n,a=e.endContainer!==r||e.endOffset!=i,s=!e.equals(e.nativeRange);(o||a||s)&&(e.setEnd(r,i),e.setStart(t,n))}n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,h(this)},s.createPrototypeRange(n,d),(r=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),h(this)},r.cloneContents=function(){return this.nativeRange.cloneContents()},r.surroundContents=function(e){this.nativeRange.surroundContents(e),h(this)},r.collapse=function(e){this.nativeRange.collapse(e),h(this)},r.cloneRange=function(){return new n(this.nativeRange.cloneRange())},r.refresh=function(){h(this)},r.toString=function(){return this.nativeRange.toString()};var l=document.createTextNode("test");c(document).appendChild(l);var p=document.createRange();p.setStart(l,0),p.setEnd(l,0);try{p.setStart(l,1),r.setStart=function(e,t){this.nativeRange.setStart(e,t),h(this)},r.setEnd=function(e,t){this.nativeRange.setEnd(e,t),h(this)},a=function(e){return function(t){this.nativeRange[e](t),h(this)}}}catch(e){r.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}h(this)},r.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}h(this)},a=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n),this.nativeRange[e](n)}h(this)}}}r.setStartBefore=a("setStartBefore","setEndBefore"),r.setStartAfter=a("setStartAfter","setEndAfter"),r.setEndBefore=a("setEndBefore","setStartBefore"),r.setEndAfter=a("setEndAfter","setStartAfter"),r.selectNodeContents=function(e){this.setStartAndEnd(e,0,i.getNodeLength(e))},p.selectNodeContents(l),p.setEnd(l,3);var g=document.createRange();g.selectNodeContents(l),g.setEnd(l,4),g.setStart(l,2),-1==p.compareBoundaryPoints(p.START_TO_END,g)&&1==p.compareBoundaryPoints(p.END_TO_START,g)?r.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:r.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var v=document.createElement("div");v.innerHTML="123";var m=v.firstChild,y=c(document);y.appendChild(v),p.setStart(m,1),p.setEnd(m,2),p.deleteContents(),"13"==m.data&&(r.deleteContents=function(){this.nativeRange.deleteContents(),h(this)},r.extractContents=function(){var e=this.nativeRange.extractContents();return h(this),e}),y.removeChild(v),y=null,o.isHostMethod(p,"createContextualFragment")&&(r.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),c(document).removeChild(l),r.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return(e=u(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var h=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();(n=e.duplicate()).collapse(!1);var o=n.parentElement(),a=r==o?r:i.getCommonAncestor(r,o);return a==t?a:i.getCommonAncestor(t,a)},d=function(e){return 0==e.compareEndPoints("StartToEnd",e)},l=function(e,t,n,r,o){var s=e.duplicate();s.collapse(n);var c=s.parentElement();if(i.isOrIsAncestorOf(t,c)||(c=t),!c.canHaveHTML){var u=new a(c.parentNode,i.getNodeIndex(c));return{boundaryPosition:u,nodeInfo:{nodeIndex:u.offset,containerElement:u.node}}}var h=i.getDocument(c).createElement("span");h.parentNode&&i.removeNode(h);for(var d,l,p,g,v,m=n?"StartToStart":"StartToEnd",y=o&&o.containerElement==c?o.nodeIndex:0,R=c.childNodes.length,b=R,C=b;C==R?c.appendChild(h):c.insertBefore(h,c.childNodes[C]),s.moveToElementText(h),0!=(d=s.compareEndPoints(m,e))&&y!=b;){if(-1==d){if(b==y+1)break;y=C}else b=b==y+1?y:C;C=Math.floor((y+b)/2),c.removeChild(h)}if(v=h.nextSibling,-1==d&&v&&f(v)){var N;if(s.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(v.data)){var S=s.duplicate(),x=S.text.replace(/\r\n/g,"\r").length;for(N=S.moveStart("character",x);-1==(d=S.compareEndPoints("StartToEnd",S));)N++,S.moveStart("character",1)}else N=s.text.length;g=new a(v,N)}else l=(r||!n)&&h.previousSibling,g=(p=(r||n)&&h.nextSibling)&&f(p)?new a(p,0):l&&f(l)?new a(l,l.data.length):new a(c,i.getNodeIndex(h));return i.removeNode(h),{boundaryPosition:g,nodeInfo:{nodeIndex:C,containerElement:c}}},p=function(e,t){var n,r,o,a,s=e.offset,u=i.getDocument(e.node),h=c(u).createTextRange(),d=f(e.node);return d?r=(n=e.node).parentNode:(n=s<(a=e.node.childNodes).length?a[s]:null,r=e.node),(o=u.createElement("span")).innerHTML="&#feff;",n?r.insertBefore(o,n):r.appendChild(o),h.moveToElementText(o),h.collapse(!t),r.removeChild(o),d&&h[t?"moveStart":"moveEnd"]("character",s),h};(r=function(e){this.textRange=e,this.refresh()}).prototype=new s(document),r.prototype.refresh=function(){var e,t,n,r=h(this.textRange);d(this.textRange)?t=e=l(this.textRange,r,!0,!0).boundaryPosition:(e=(n=l(this.textRange,r,!0,!1)).boundaryPosition,t=l(this.textRange,r,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(r);var g=function(e){if(e.collapsed)return p(new a(e.startContainer,e.startOffset),!0);var t=p(new a(e.startContainer,e.startOffset),!0),n=p(new a(e.endContainer,e.endOffset),!1),r=c(s.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r};if(r.rangeToTextRange=g,r.prototype.toTextRange=function(){return g(this)},e.WrappedTextRange=r,!e.features.implementsDomRange||e.config.preferTextRange){var v=Function("return this;")();void 0===v.Range&&(v.Range=r),e.createNativeRange=function(e){return e=u(e,t,"createNativeRange"),c(e).createTextRange()},e.WrappedRange=r}}e.createRange=function(n){return n=u(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=u(e,t,"createRangyRange"),new s(e)},o.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),o.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener(function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),C.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){e.config.checkSelectionRanges=!0;var n,r,i="boolean",o="number",a=e.dom,s=e.util,c=s.isHostMethod,u=e.DomRange,f=e.WrappedRange,h=e.DOMException,d=a.DomPosition,l=e.features,p="Control",g=a.getDocument,v=a.getBody,m=u.rangesEqual;function y(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function R(e,n){if(e){if(a.isWindow(e))return e;if(e instanceof Y)return e.win;var r=a.getContentDocument(e,t,n);return a.getWindow(r)}return window}function b(e){return R(e,"getWinSelection").getSelection()}function C(e){return R(e,"getDocSelection").document.selection}function N(e){var t=!1;return e.anchorNode&&(t=1==a.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}var S=c(window,"getSelection"),x=s.isHostObject(document,"selection");l.implementsWinGetSelection=S,l.implementsDocSelection=x;var w=x&&(!S||e.config.preferTextRange);if(w)n=C,e.isSelectionValid=function(e){var t=R(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||g(n.createRange().parentElement())==t};else{if(!S)return t.fail("Neither document.selection or window.getSelection() detected."),!1;n=b,e.isSelectionValid=function(){return!0}}e.getNativeSelection=n;var T=n();if(!T)return t.fail("Native selection was null (possibly issue 138?)"),!1;var E=e.createNativeRange(document),O=v(document),P=s.areHostProperties(T,["anchorNode","focusNode","anchorOffset","focusOffset"]);l.selectionHasAnchorAndFocus=P;var k=c(T,"extend");l.selectionHasExtend=k;var A=typeof T.rangeCount==o;l.selectionHasRangeCount=A;var _=!1,D=!0,B=k?function(t,n){var r=u.getRangeDocument(n),i=e.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),t.addRange(F(i)),t.extend(n.startContainer,n.startOffset)}:null;s.areHostMethods(T,["addRange","getRangeAt","removeAllRanges"])&&typeof T.rangeCount==o&&l.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,r=n>1,i=[],o=N(t),s=0;s<n;++s)i[s]=t.getRangeAt(s);var c=a.createTestElement(document,"",!1),u=c.appendChild(document.createTextNode("   ")),f=document.createRange();if(f.setStart(u,1),f.collapse(!0),t.removeAllRanges(),t.addRange(f),D=1==t.rangeCount,t.removeAllRanges(),!r){var h=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(h&&parseInt(h[1])>=36)_=!1;else{var d=f.cloneRange();f.setStart(u,0),d.setEnd(u,3),d.setStart(u,2),t.addRange(f),t.addRange(d),_=2==t.rangeCount}}for(a.removeNode(c),t.removeAllRanges(),s=0;s<n;++s)0==s&&o?B?B(t,i[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(i[s])):t.addRange(i[s])}}(),l.selectionSupportsMultipleRanges=_,l.collapsedNonEditableSelectionsSupported=D;var I,L,M=!1;function W(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function j(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function H(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function F(t){var n;return t instanceof u?((n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof f?n=t.nativeRange:l.implementsDomRange&&t instanceof a.getWindow(t.startContainer).Range&&(n=t),n}function z(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!a.isAncestorOf(e[0],e[t]))return!1;return!0}function V(e){var n=e.getNodes();if(!z(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function U(e){return!!e&&void 0!==e.text}function G(e,t){var n=new f(t);e._ranges=[n],W(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function q(t){if(t._ranges.length=0,"None"==t.docSelection.type)H(t);else{var n=t.docSelection.createRange();if(U(n))G(t,n);else{t.rangeCount=n.length;for(var r,i=g(n.item(0)),o=0;o<t.rangeCount;++o)(r=e.createRange(i)).selectNode(n.item(o)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,W(t,t._ranges[t.rangeCount-1],!1)}}}function $(e,n){for(var r=e.docSelection.createRange(),i=V(n),o=g(r.item(0)),a=v(o).createControlRange(),s=0,c=r.length;s<c;++s)a.add(r.item(s));try{a.add(i)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),q(e)}function Y(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function J(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}O&&c(O,"createControlRange")&&(I=O.createControlRange(),s.areHostProperties(I,["item","add"])&&(M=!0)),l.implementsControlRange=M,r=P?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},c(T,"getRangeAt")?L=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:P&&(L=function(t){var n=g(t.anchorNode),r=e.createRange(n);return r.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&r.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),r}),Y.prototype=e.selectionPrototype;var Q=[];function K(e,t){for(var n,r,i=Q.length;i--;)if(r=(n=Q[i]).selection,"deleteAll"==t)J(r);else if(n.win==e)return"delete"==t?(Q.splice(i,1),!0):r;return"deleteAll"==t&&(Q.length=0),null}var X=function(e){if(e&&e instanceof Y)return e.refresh(),e;var t=K(e=R(e,"getNativeSelection")),r=n(e),i=x?C(e):null;return t?(t.nativeSelection=r,t.docSelection=i,t.refresh()):(t=new Y(r,i,e),Q.push({win:e,selection:t})),t};e.getSelection=X,s.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var Z,ee=Y.prototype;function te(e,n){for(var r,i=g(n[0].startContainer),o=v(i).createControlRange(),a=0,s=n.length;a<s;++a){r=V(n[a]);try{o.add(r)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}o.select(),q(e)}if(!w&&P&&s.areHostMethods(T,["removeAllRanges","addRange"])){ee.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),H(this)};var ne=function(e,t){B(e.nativeSelection,t),e.refresh()};ee.addRange=A?function(t,n){if(M&&x&&this.docSelection.type==p)$(this,t);else if(y(n)&&k)ne(this,t);else{var i;_?i=this.rangeCount:(this.removeAllRanges(),i=0);var o=F(t).cloneRange();try{this.nativeSelection.addRange(o)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1){if(e.config.checkSelectionRanges){var a=L(this.nativeSelection,this.rangeCount-1);a&&!m(a,t)&&(t=new f(a))}this._ranges[this.rangeCount-1]=t,W(this,t,re(this.nativeSelection)),this.isCollapsed=r(this)}else this.refresh()}}:function(e,t){y(t)&&k?ne(this,e):(this.nativeSelection.addRange(F(e)),this.refresh())},ee.setRanges=function(e){if(M&&x&&e.length>1)te(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(c(T,"empty")&&c(E,"select")&&M&&w))return t.fail("No means of selecting a Range or TextRange was found"),!1;ee.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=g(this.anchorNode);else if(this.docSelection.type==p){var t=this.docSelection.createRange();t.length&&(e=g(t.item(0)))}if(e)v(e).createTextRange().select(),this.docSelection.empty()}}catch(e){}H(this)},ee.addRange=function(t){this.docSelection.type==p?$(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,W(this,t,!1))},ee.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?te(this,e):t&&this.addRange(e[0])}}if(ee.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new h("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},w)Z=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=v(t.win.document).createTextRange()).collapse(!0),t.docSelection.type==p?q(t):U(n)?G(t,n):H(t)};else if(c(T,"getRangeAt")&&typeof T.rangeCount==o)Z=function(t){if(M&&x&&t.docSelection.type==p)q(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;n<i;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));W(t,t._ranges[t.rangeCount-1],re(t.nativeSelection)),t.isCollapsed=r(t)}else H(t)};else{if(!P||typeof T.isCollapsed!=i||typeof E.collapsed!=i||!l.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;Z=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=L(n,0),e._ranges=[t],e.rangeCount=1,j(e),e.isCollapsed=r(e)):H(e)}}ee.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(Z(this),e){var i=t.length;if(i!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;i--;)if(!m(t[i],this._ranges[i]))return!0;return!1}};var re,ie=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,i=n.length;r<i;++r)m(t,n[r])||e.addRange(n[r]);e.rangeCount||H(e)};function oe(e,t){if(e.win.document!=g(t))throw new h("WRONG_DOCUMENT_ERR")}function ae(t){return function(n,r){var i;this.rangeCount?(i=this.getRangeAt(0))["set"+(t?"Start":"End")](n,r):(i=e.createRange(this.win.document)).setStartAndEnd(n,r),this.setSingleRange(i,this.isBackward())}}function se(e){var t=[],n=new d(e.anchorNode,e.anchorOffset),r=new d(e.focusNode,e.focusOffset),i="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var o=0,a=e.rangeCount;o<a;++o)t[o]=u.inspect(e.getRangeAt(o));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}ee.removeRange=M&&x?function(e){if(this.docSelection.type==p){for(var t=this.docSelection.createRange(),n=V(e),r=g(t.item(0)),i=v(r).createControlRange(),o=!1,a=0,s=t.length;a<s;++a)t.item(a)!==n||o?i.add(t.item(a)):o=!0;i.select(),q(this)}else ie(this,e)}:function(e){ie(this,e)},!w&&P&&l.implementsDomRange?(re=N,ee.isBackward=function(){return re(this)}):re=ee.isBackward=function(){return!1},ee.isBackwards=ee.isBackward,ee.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},ee.collapse=function(t,n){oe(this,t);var r=e.createRange(t);r.collapseToPoint(t,n),this.setSingleRange(r),this.isCollapsed=!0},ee.collapseToStart=function(){if(!this.rangeCount)throw new h("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},ee.collapseToEnd=function(){if(!this.rangeCount)throw new h("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},ee.selectAllChildren=function(t){oe(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},ee.deleteFromDocument=function(){if(M&&x&&this.docSelection.type==p){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),a.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var r=0,i=n.length;r<i;++r)n[r].deleteContents();this.addRange(n[i-1])}}},ee.eachRange=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(e(this.getRangeAt(n)))return t},ee.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},ee.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},ee.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(r){n.push(r[e].apply(r,t||[]))}),n},ee.setStart=ae(!0),ee.setEnd=ae(!1),e.rangePrototype.select=function(e){X(this.getDocument()).setSingleRange(this,e)},ee.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},ee.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},ee.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},ee.moveToBookmark=function(t){for(var n,r,i=[],o=0;n=t.rangeBookmarks[o++];)(r=e.createRange(this.win)).moveToBookmark(n),i.push(r);t.backward?this.setSingleRange(i[0],"backward"):this.setRanges(i)},ee.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},ee.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},ee.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(u.toHtml(t))}),e.join("")},l.implementsTextRange&&(ee.getNativeTextRange=function(){var n;if(n=this.docSelection){var r=n.createRange();if(U(r))return r;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),ee.getName=function(){return"WrappedSelection"},ee.inspect=function(){return se(this)},ee.detach=function(){K(this.win,"delete"),J(this)},Y.detachAll=function(){K(null,"deleteAll")},Y.inspect=se,Y.isDirectionBackward=y,e.Selection=Y,e.selectionPrototype=ee,e.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return X(e)}),e=null})});var M=!1,W=function(e){M||(M=!0,!C.initialized&&C.config.autoInitialize&&O())};return R&&("complete"==document.readyState?W():(s(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",W,!1),m(window,"load",W))),C})?r.call(t,n,t,e):r)||(e.exports=i)},VfpFjk:function(e,t,n){var r,i,o,a;a=function(e){return e.createModule("TextRange",["WrappedSelection"],function(e,t){var n,r,i,o="undefined",a="character",s="word",c=e.dom,u=e.util,f=u.extend,h=u.createOptions,d=c.getBody,l=/^[ \t\f\r\n]+$/,p=/^[ \t\f\r]+$/,g=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,v=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,m="en",y=e.Selection.isDirectionBackward,R=!1,b=!1,C=!0;function N(e,t){var n,r=e.join(""),i=[];function o(e,t,n){i.push({start:e,end:t,isWord:n})}for(var a,s,c=0;n=t.wordRegex.exec(r);){if(s=(a=n.index)+n[0].length,a>c&&o(c,a,!1),t.includeTrailingSpace)for(;v.test(e[s]);)++s;o(a,s,!0),c=s}return c<e.length&&o(c,e.length,!1),i}function S(e,t){for(var n=e.slice(t.start,t.end),r={isWord:t.isWord,chars:n,toString:function(){return n.join("")}},i=0,o=n.length;i<o;++i)n[i].token=r;return r}function x(e,t,n){for(var r,i=n(e,t),o=[],a=0;r=i[a++];)o.push(S(e,r));return o}n=c.createTestElement(document,"<p>1 </p><p></p>",!0),r=n.firstChild,(i=e.getSelection()).collapse(r.lastChild,2),i.setStart(r.firstChild,0),n.innerHTML="1 <br />",i.collapse(n,2),i.setStart(n.firstChild,0),R=1==(""+i).length,n.innerHTML="1 <p>1</p>",i.collapse(n,2),i.setStart(n.firstChild,0),b=1==(""+i).length,c.removeNode(n),i.removeAllRanges();var w={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""};function T(e){var t=e||"",n="string"==typeof t?t.split(""):t;return n.sort(function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)}),n.join("").replace(/(.)\1+/g,"$1")}var E={includeBlockContentTrailingSpace:!C,includeSpaceBeforeBr:!R,includeSpaceBeforeBlock:!b,includePreLineTrailingSpace:!0},O={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:N}},P={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},k={wordOptions:null,characterOptions:null},A={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},_={wordOptions:null,characterOptions:null,direction:"forward"};function D(e){var t,n;return e?(t=e.language||m,f(n={},O[t]||O[m]),f(n,e),n):O[m]}function B(e,t){var n=h(e,t);return t.hasOwnProperty("wordOptions")&&(n.wordOptions=D(n.wordOptions)),t.hasOwnProperty("characterOptions")&&(n.characterOptions=h(n.characterOptions,w)),n}var I,L,M,W=c.getComputedStyleProperty;L=document.createElement("table"),(M=d(document)).appendChild(L),I="block"==W(L,"display"),M.removeChild(L);var j={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};function H(e,t){var n=W(e,"display",t),r=e.tagName.toLowerCase();return"block"==n&&I&&j.hasOwnProperty(r)?j[r]:n}function F(e){for(var t=q(e),n=0,r=t.length;n<r;++n)if(1==t[n].nodeType&&"none"==H(t[n]))return!0;return!1}function z(e){var t;return 3==e.nodeType&&(t=e.parentNode)&&"hidden"==W(t,"visibility")}function V(e){return e&&(1==e.nodeType&&!/^(inline(-block|-table)?|none)$/.test(H(e))||9==e.nodeType||11==e.nodeType)}function U(e){return c.isCharacterDataNode(e)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(e.nodeName)}function G(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}function q(e){return G(e).concat([e])}function $(e){for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null}function Y(e,t){return!t&&e.hasChildNodes()?e.firstChild:$(e)}function J(e){var t=e.previousSibling;if(t){for(e=t;e.hasChildNodes();)e=e.lastChild;return e}var n=e.parentNode;return n&&1==n.nodeType?n:null}function Q(e){if(!e||3!=e.nodeType)return!1;var t=e.data;if(""===t)return!0;var n=e.parentNode;if(!n||1!=n.nodeType)return!1;var r=W(e.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(r)||/^[\t\r ]+$/.test(t)&&"pre-line"==r}function K(e){return""===e.data||!!Q(e)&&(!e.parentNode||!!F(e))}function X(e){var t=e.nodeType;return 7==t||8==t||F(e)||/^(script|style)$/i.test(e.nodeName)||z(e)||K(e)}function Z(e,t){var n=e.nodeType;return 7==n||8==n||1==n&&"none"==H(e,t)}function ee(){this.store={}}ee.prototype={get:function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},set:function(e,t){return this.store[e]=t}};function te(e,t,n){return function(r){var i=this.cache;if(i.hasOwnProperty(e))return 0,i[e];0;var o=t.call(this,n?this[n]:this,r);return i[e]=o,o}}function ne(e,t){this.node=e,this.session=t,this.cache=new ee,this.positions=new ee}var re={getPosition:function(e){var t=this.positions;return t.get(e)||t.set(e,new pe(this,e))},toString:function(){return"[NodeWrapper("+c.inspectNode(this.node)+")]"}};ne.prototype=re;var ie="EMPTY",oe="NON_SPACE",ae="UNCOLLAPSIBLE_SPACE",se="COLLAPSIBLE_SPACE",ce="TRAILING_SPACE_BEFORE_BLOCK",ue="TRAILING_SPACE_IN_BLOCK",fe="TRAILING_SPACE_BEFORE_BR",he="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",de="TRAILING_LINE_BREAK_AFTER_BR",le="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";function pe(e,t){this.offset=t,this.nodeWrapper=e,this.node=e.node,this.session=e.session,this.cache=new ee}function ge(){return"[Position("+c.inspectNode(this.node)+":"+this.offset+")]"}f(re,{isCharacterDataNode:te("isCharacterDataNode",c.isCharacterDataNode,"node"),getNodeIndex:te("nodeIndex",c.getNodeIndex,"node"),getLength:te("nodeLength",c.getNodeLength,"node"),containsPositions:te("containsPositions",U,"node"),isWhitespace:te("isWhitespace",Q,"node"),isCollapsedWhitespace:te("isCollapsedWhitespace",K,"node"),getComputedDisplay:te("computedDisplay",H,"node"),isCollapsed:te("collapsed",X,"node"),isIgnored:te("ignored",Z,"node"),next:te("nextPos",Y,"node"),previous:te("previous",J,"node"),getTextNodeInfo:te("textNodeInfo",function(e){var t=null,n=!1,r=W(e.parentNode,"whiteSpace"),i="pre-line"==r;return i?(t=p,n=!0):"normal"!=r&&"nowrap"!=r||(t=l,n=!0),{node:e,text:e.data,spaceRegex:t,collapseSpaces:n,preLine:i}},"node"),hasInnerText:te("hasInnerText",function(e,t){for(var n=this.session,r=n.getPosition(e.parentNode,this.getNodeIndex()+1),i=n.getPosition(e,0),o=t?r:i,a=t?i:r;o!==a;){if(o.prepopulateChar(),o.isDefinitelyNonEmpty())return!0;o=t?o.previousVisible():o.nextVisible()}return!1},"node"),isRenderedBlock:te("isRenderedBlock",function(e){for(var t=e.getElementsByTagName("br"),n=0,r=t.length;n<r;++n)if(!X(t[n]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:te("trailingSpace",function(e){if("br"==e.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var t=e.lastChild;t;){if(!Z(t))return 1==t.nodeType?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""},"node"),getLeadingSpace:te("leadingSpace",function(e){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""},"node")});var ve={character:"",characterType:ie,isBr:!1,prepopulateChar:function(){var e=this;if(!e.prepopulatedChar){var t=e.node,n=e.offset,r="",i=ie,o=!1;if(n>0)if(3==t.nodeType){var a=t.data,s=a.charAt(n-1),c=e.nodeWrapper.getTextNodeInfo(),u=c.spaceRegex;c.collapseSpaces?u.test(s)?n>1&&u.test(a.charAt(n-2))||(c.preLine&&"\n"===a.charAt(n)?(r=" ",i=he):(r=" ",i=se)):(r=s,i=oe,o=!0):(r=s,i=ae,o=!0)}else{var f=t.childNodes[n-1];if(f&&1==f.nodeType&&!X(f)&&("br"==f.tagName.toLowerCase()?(r="\n",e.isBr=!0,i=se,o=!1):e.checkForTrailingSpace=!0),!r){var h=t.childNodes[n];h&&1==h.nodeType&&!X(h)&&(e.checkForLeadingSpace=!0)}}e.prepopulatedChar=!0,e.character=r,e.characterType=i,e.isCharInvariant=o}},isDefinitelyNonEmpty:function(){var e=this.characterType;return e==oe||e==ae},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();e&&(this.isTrailingSpace=!0,this.character=e,this.characterType=se),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();t&&(this.isLeadingSpace=!0,this.character=t,this.characterType=se),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(e){for(var t=this;t=t.previousVisible();)if(""!==t.getCharacter(e))return t;return null},getCharacter:function(e){this.resolveLeadingAndTrailingSpaces();var t=this.character,n=T(e.ignoreCharacters),r=""!==t&&n.indexOf(t)>-1;if(this.isCharInvariant)return r?"":t;var i=["character",e.includeSpaceBeforeBr,e.includeBlockContentTrailingSpace,e.includePreLineTrailingSpace,n].join("_"),o=this.cache.get(i);if(null!==o)return o;var a,s,c="",u=!1,f=this;function h(){return u||(s=f.getPrecedingUncollapsedPosition(e),u=!0),s}return this.characterType==se&&(this.type==le?c="\n":" "==t&&(!h()||s.isTrailingSpace||"\n"==s.character||" "==s.character&&s.characterType==se)||("\n"==t&&this.isLeadingSpace?h()&&"\n"!=s.character&&(c="\n"):(a=this.nextUncollapsed())&&(a.isBr?this.type=fe:a.isTrailingSpace&&"\n"==a.character?this.type=ue:a.isLeadingSpace&&"\n"==a.character&&(this.type=ce),"\n"==a.character?(this.type!=fe||e.includeSpaceBeforeBr)&&(this.type!=ce||e.includeSpaceBeforeBlock)&&(this.type==ue&&a.isTrailingSpace&&!e.includeBlockContentTrailingSpace||(this.type!=he||a.type!=oe||e.includePreLineTrailingSpace)&&("\n"==t?a.isTrailingSpace?this.isTrailingSpace||this.isBr&&(a.type=de,h()&&s.isLeadingSpace&&!s.isTrailingSpace&&"\n"==s.character?a.character="":a.type=le):c="\n":" "==t&&(c=" "))):c=t))),n.indexOf(c)>-1&&(c=""),this.cache.set(i,c),c},equals:function(e){return!!e&&this.node===e.node&&this.offset===e.offset},inspect:ge,toString:function(){return this.character}};pe.prototype=ve,f(ve,{next:te("nextPos",function(e){var t,n,r,i=e.nodeWrapper,o=e.node,a=e.offset,s=i.session;return o?(a==i.getLength()?n=(t=o.parentNode)?i.getNodeIndex()+1:0:i.isCharacterDataNode()?(t=o,n=a+1):(r=o.childNodes[a],s.getNodeWrapper(r).containsPositions()?(t=r,n=0):(t=o,n=a+1)),t?s.getPosition(t,n):null):null}),previous:te("previous",function(e){var t,n,r,i=e.nodeWrapper,o=e.node,a=e.offset,s=i.session;return 0==a?n=(t=o.parentNode)?i.getNodeIndex():0:i.isCharacterDataNode()?(t=o,n=a-1):(r=o.childNodes[a-1],s.getNodeWrapper(r).containsPositions()?(t=r,n=c.getNodeLength(r)):(t=o,n=a-1)),t?s.getPosition(t,n):null}),nextVisible:te("nextVisible",function(e){var t=e.next();if(!t)return null;var n=t.nodeWrapper,r=t.node,i=t;return n.isCollapsed()&&(i=n.session.getPosition(r.parentNode,n.getNodeIndex()+1)),i}),nextUncollapsed:te("nextUncollapsed",function(e){for(var t=e;t=t.nextVisible();)if(t.resolveLeadingAndTrailingSpaces(),""!==t.character)return t;return null}),previousVisible:te("previousVisible",function(e){var t=e.previous();if(!t)return null;var n=t.nodeWrapper,r=t.node,i=t;return n.isCollapsed()&&(i=n.session.getPosition(r.parentNode,n.getNodeIndex())),i})});var me=null,ye=function(){function e(e){var t=new ee;return{get:function(n){var r=t.get(n[e]);if(r)for(var i,o=0;i=r[o++];)if(i.node===n)return i;return null},set:function(n){var r=n.node[e];(t.get(r)||t.set(r,[])).push(n)}}}var t=u.isHostProperty(document.documentElement,"uniqueID");function n(){this.initCaches()}return n.prototype={initCaches:function(){var n;this.elementCache=t?(n=new ee,{get:function(e){return n.get(e.uniqueID)},set:function(e){n.set(e.node.uniqueID,e)}}):e("tagName"),this.textNodeCache=e("data"),this.otherNodeCache=e("nodeName")},getNodeWrapper:function(e){var t;switch(e.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}var n=t.get(e);return n||(n=new ne(e,this),t.set(n)),n},getPosition:function(e,t){return this.getNodeWrapper(e).getPosition(t)},getRangeBoundaryPosition:function(e,t){var n=t?"start":"end";return this.getPosition(e[n+"Container"],e[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},n}();function Re(){return Ce(),me=new ye}function be(){return me||Re()}function Ce(){me&&me.detach(),me=null}function Ne(e,n,r,i){r&&(n?X(r.node)&&(r=e.previousVisible()):X(r.node)&&(r=r.nextVisible()));var o=e,a=!1;function s(){var e=null;return n?(e=o,a||(o=o.previousVisible(),a=!o||r&&o.equals(r))):a||(e=o=o.nextVisible(),a=!o||r&&o.equals(r)),a&&(o=null),e}var c,u=!1;return{next:function(){if(u)return u=!1,c;for(var e;e=s();)if(e.getCharacter(i))return c=e,e;return null},rewind:function(){if(!c)throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");u=!0},dispose:function(){e=r=null}}}f(c,{nextNode:Y,previousNode:J});var Se=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1};function xe(e,t,n){var r=Ne(e,!1,null,t),i=Ne(e,!0,null,t),o=n.tokenizer;function a(e){for(var t,n,o=[],a=e?r:i,s=!1,c=!1;t=a.next();){if(n=t.character,g.test(n))c&&(c=!1,s=!0);else{if(s){a.rewind();break}c=!0}o.push(t)}return o}var s=a(!0),c=a(!1).reverse(),u=x(c.concat(s),n,o),f=s.length?u.slice(Se(u,s[0].token)):[],h=c.length?u.slice(0,Se(u,c.pop().token)+1):[];return{nextEndToken:function(){for(var e,t;1==f.length&&!(e=f[0]).isWord&&(t=a(!0)).length>0;)f=x(e.chars.concat(t),n,o);return f.shift()},previousStartToken:function(){for(var e,t;1==h.length&&!(e=h[0]).isWord&&(t=a(!1)).length>0;)h=x(t.reverse().concat(e.chars),n,o);return h.pop()},dispose:function(){r.dispose(),i.dispose(),f=h=null}}}function we(e,t,n,r,i){var o,c,u,f,h=0,d=e,l=Math.abs(n);if(0!==n){var p=n<0;switch(t){case a:for(c=Ne(e,p,null,r);(o=c.next())&&h<l;)++h,d=o;u=o,c.dispose();break;case s:for(var g=xe(e,r,i),v=p?g.previousStartToken:g.nextEndToken;(f=v())&&h<l;)f.isWord&&(++h,d=p?f.chars[0]:f.chars[f.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented")}p?(d=d.previousVisible(),h=-h):d&&d.isLeadingSpace&&!d.isTrailingSpace&&(t==s&&(u=(c=Ne(e,!1,null,r)).next(),c.dispose()),u&&(d=u.previousVisible()))}return{position:d,unitsMoved:h}}function Te(e,t,n,r){var i=e.getRangeBoundaryPosition(t,!0),o=e.getRangeBoundaryPosition(t,!1);return Ne(r?o:i,!!r,r?i:o,n)}function Ee(e,t,n){for(var r,i=[],o=Te(e,t,n);r=o.next();)i.push(r);return o.dispose(),i}function Oe(t,n,r){var i=e.createRange(t.node);return i.setStartAndEnd(t.node,t.offset,n.node,n.offset),!i.expand("word",{wordOptions:r})}function Pe(e,t,n,r,i){var o,a,s,c,u,f,h=y(i.direction),d=Ne(e,h,e.session.getRangeBoundaryPosition(r,h),i.characterOptions),l="",p=[],g=null;function v(e,t){var n=p[e].previousVisible(),r=p[t-1];return{startPos:n,endPos:r,valid:!i.wholeWordsOnly||Oe(n,r,i.wordOptions)}}for(;o=d.next();)if(a=o.character,n||i.caseSensitive||(a=a.toLowerCase()),h?(p.unshift(o),l=a+l):(p.push(o),l+=a),n){if(u=t.exec(l))if(c=(s=u.index)+u[0].length,f){if(!h&&c<l.length||h&&s>0){g=v(s,c);break}}else f=!0}else if(-1!=(s=l.indexOf(t))){g=v(s,s+t.length);break}return f&&(g=v(s,c)),d.dispose(),g}function ke(e){return function(){var t=!!me,n=[be()].concat(u.toArray(arguments)),r=e.apply(this,n);return t||Ce(),r}}function Ae(e,t){return ke(function(n,r,i,s){typeof i==o&&(i=r,r=a),s=B(s,k);var c=e;t&&(c=i>=0,this.collapse(!c));var u=we(n.getRangeBoundaryPosition(this,c),r,i,s.characterOptions,s.wordOptions),f=u.position;return this[c?"setStart":"setEnd"](f.node,f.offset),u.unitsMoved})}function _e(e){return ke(function(t,n){for(var r,i=Te(t,this,n=h(n,w),!e),o=0;(r=i.next())&&g.test(r.character);)++o;i.dispose();var a=o>0;return a&&this[e?"moveStart":"moveEnd"]("character",e?o:-o,{characterOptions:n}),a})}function De(e){return ke(function(t,n){var r=!1;return this.changeEachRange(function(t){r=t[e](n)||r}),r})}f(e.rangePrototype,{moveStart:Ae(!0,!1),moveEnd:Ae(!1,!1),move:Ae(!0,!0),trimStart:_e(!0),trimEnd:_e(!1),trim:ke(function(e,t){var n=this.trimStart(t),r=this.trimEnd(t);return n||r}),expand:ke(function(e,t,n){var r=!1,i=(n=B(n,A)).characterOptions;if(t||(t=a),t==s){var o,c,u=n.wordOptions,f=e.getRangeBoundaryPosition(this,!0),h=e.getRangeBoundaryPosition(this,!1),d=xe(f,i,u).nextEndToken(),l=d.chars[0].previousVisible();if(this.collapsed)o=d;else o=xe(h,i,u).previousStartToken();return c=o.chars[o.chars.length-1],l.equals(f)||(this.setStart(l.node,l.offset),r=!0),c&&!c.equals(h)&&(this.setEnd(c.node,c.offset),r=!0),n.trim&&(n.trimStart&&(r=this.trimStart(i)||r),n.trimEnd&&(r=this.trimEnd(i)||r)),r}return this.moveEnd(a,1,n)}),text:ke(function(e,t){return this.collapsed?"":Ee(e,this,h(t,w)).join("")}),selectCharacters:ke(function(e,t,n,r,i){var o={characterOptions:i};t||(t=d(this.getDocument())),this.selectNodeContents(t),this.collapse(!0),this.moveStart("character",n,o),this.collapse(!0),this.moveEnd("character",r-n,o)}),toCharacterRange:ke(function(e,t,n){t||(t=d(this.getDocument()));var r,i=t.parentNode,o=c.getNodeIndex(t),a=-1==c.comparePoints(this.startContainer,this.endContainer,i,o),s=this.cloneRange();return a?(s.setStartAndEnd(this.startContainer,this.startOffset,i,o),r=-s.text(n).length):(s.setStartAndEnd(i,o,this.startContainer,this.startOffset),r=s.text(n).length),{start:r,end:r+this.text(n).length}}),findText:ke(function(t,n,r){(r=B(r,P)).wholeWordsOnly&&(r.wordOptions.includeTrailingSpace=!1);var i=y(r.direction),o=r.withinRange;o||(o=e.createRange()).selectNodeContents(this.getDocument());var a=n,s=!1;"string"==typeof a?r.caseSensitive||(a=a.toLowerCase()):s=!0;var c=t.getRangeBoundaryPosition(this,!i),u=o.comparePoint(c.node,c.offset);-1===u?c=t.getRangeBoundaryPosition(o,!0):1===u&&(c=t.getRangeBoundaryPosition(o,!1));for(var f,h=c,d=!1;;)if(f=Pe(h,a,s,o,r)){if(f.valid)return this.setStartAndEnd(f.startPos.node,f.startPos.offset,f.endPos.node,f.endPos.offset),!0;h=i?f.startPos:f.endPos}else{if(!r.wrap||d)return!1;o=o.cloneRange(),h=t.getRangeBoundaryPosition(o,!i),o.setBoundary(c.node,c.offset,i),d=!0}}),pasteHtml:function(e){if(this.deleteContents(),e){var t=this.createContextualFragment(e),n=t.lastChild;this.insertNode(t),this.collapseAfter(n)}}}),f(e.selectionPrototype,{expand:ke(function(e,t,n){this.changeEachRange(function(e){e.expand(t,n)})}),move:ke(function(e,t,n,r){var i=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var o=this.getRangeAt(0);r||(r={}),r.characterOptions=h(r.characterOptions,E),i=o.move(t,n,r),this.setSingleRange(o)}return i}),trimStart:De("trimStart"),trimEnd:De("trimEnd"),trim:De("trim"),selectCharacters:ke(function(t,n,r,i,o,a){var s=e.createRange(n);s.selectCharacters(n,r,i,a),this.setSingleRange(s,o)}),saveCharacterRanges:ke(function(e,t,n){for(var r=this.getAllRanges(),i=[],o=1==r.length&&this.isBackward(),a=0,s=r.length;a<s;++a)i[a]={characterRange:r[a].toCharacterRange(t,n),backward:o,characterOptions:n};return i}),restoreCharacterRanges:ke(function(t,n,r){this.removeAllRanges();for(var i,o,a,s=0,c=r.length;s<c;++s)a=(o=r[s]).characterRange,(i=e.createRange(n)).selectCharacters(n,a.start,a.end,o.characterOptions),this.addRange(i,o.backward)}),text:ke(function(e,t){for(var n=[],r=0,i=this.rangeCount;r<i;++r)n[r]=this.getRangeAt(r).text(t);return n.join("")})}),e.innerText=function(t,n){var r=e.createRange(t);return r.selectNodeContents(t),r.text(n)},e.createWordIterator=function(e,t,n){var r=be();n=B(n,_);var i=xe(r.getPosition(e,t),n.characterOptions,n.wordOptions),o=y(n.direction);return{next:function(){return o?i.previousStartToken():i.nextEndToken()},dispose:function(){i.dispose(),this.next=function(){}}}},e.noMutation=function(e){e(be()),Ce()},e.noMutation.createEntryPointFunction=ke,e.textRange={isBlockNode:V,isCollapsedWhitespaceNode:K,createPosition:ke(function(e,t,n){return e.getPosition(t,n)})}}),e},i=[n("7jD/RW")],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o)},zM9Ljk:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("0PWhJb"),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function o(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a,s=function(){function e(e,t,n,r,i,o,a,s,c){this.cx=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.recovered=o,this.buffer=a,this.bufferBase=s,this.parent=c}return e.prototype.toString=function(){return"["+this.stack.filter(function(e,t){return t%3==0}).concat(this.state)+"]@"+this.pos+(this.recovered?"!"+this.recovered:"")},e.start=function(t,n,r){return void 0===r&&(r=0),new e(t,[],n,r,r,0,[],0,null)},e.prototype.pushState=function(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e},e.prototype.reduce=function(e){var t=e>>19,n=65535&e,r=this.cx.parser;if(0==t)return n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.pushState(r.getGoto(this.state,n,!0),this.reducePos);var i=this.stack.length-3*(t-1)-(262144&e?6:0),o=this.stack[i-2],a=this.stack[i-1],s=this.bufferBase+this.buffer.length-a;if(n<r.minRepeatTerm||131072&e||n>r.maxNode&&n<=r.maxRepeatWrap){var c=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,o,c,s+4,!0)}if(262144&e)this.state=this.stack[i];else{var u=this.stack[i-3];this.state=r.getGoto(u,n,!0)}for(;this.stack.length>i;)this.stack.pop()},e.prototype.storeNode=function(e,t,n,r,i){if(void 0===r&&(r=4),void 0===i&&(i=!1),0==e){var o=this,a=this.buffer.length;if(0==a&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&0==o.buffer[a-4]&&o.buffer[a-1]>-1){if(t==n)return;if(o.buffer[a-2]>=t)return void(o.buffer[a-2]=n)}}if(i&&this.pos!=n){var s=this.buffer.length;if(s>0&&0!=this.buffer[s-4])for(;s>0&&this.buffer[s-2]>n;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=n,this.buffer[s+3]=r}else this.buffer.push(e,t,n,r)},e.prototype.shift=function(e,t,n){if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){var r=this.pos,i=e,o=this.cx.parser;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),t<=o.maxNode&&this.buffer.push(t,r,n,4)}else t<=this.cx.parser.maxNode&&this.buffer.push(t,this.pos,n,4),this.pos=n},e.prototype.apply=function(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)},e.prototype.useNode=function(e,t){var n=this.cx.reused.length-1;(n<0||this.cx.reused[n]!=e)&&(this.cx.reused.push(e),n++);var r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1)},e.prototype.split=function(){for(var t=this,n=t.buffer.length;n>0&&t.buffer[n-2]>t.reducePos;)n-=4;for(var r=t.buffer.slice(n),i=t.bufferBase+n;t&&i==t.bufferBase;)t=t.parent;return new e(this.cx,this.stack.slice(),this.state,this.reducePos,this.pos,this.recovered,r,i,t)},e.prototype.recoverByDelete=function(e,t){var n=e<=this.cx.parser.maxNode;n&&this.storeNode(e,this.pos,t),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.recovered+=2},e.prototype.canShift=function(e){for(var t=new c(this);;){var n=this.cx.parser.stateSlot(t.top,4)||this.cx.parser.hasAction(t.top,e);if(0==(65536&n))return!0;if(0==n)return!1;t.reduce(n)}},Object.defineProperty(e.prototype,"ruleStart",{get:function(){var e=this.cx.parser.stateSlot(this.state,5);if(!(65536&e))return 0;var t=this.stack.length-3*(e>>19);return this.stack[t+1]},enumerable:!0,configurable:!0}),e.prototype.startOf=function(e){for(var t=this.state,n=this.stack.length,r=this.cx.parser;;){var i=r.stateSlot(t,5),o=i>>19,a=65535&i;if(e.includes(a)){var s=n-3*(i>>19);return this.stack[s+1]}if(0==n)return-1;0==o?(n-=3,t=this.stack[n]):(n-=3*(o-1),t=r.getGoto(this.stack[n-3],a,!0))}},e.prototype.recoverByInsert=function(e){var t=this,n=this.cx.parser.nextStates(this.state);if(n.length>4){for(var r=n.filter(function(n){return n!=t.state&&t.cx.parser.hasAction(n,e)}),i=0;r.length<4&&i<n.length;i++)r.includes(n[i])||r.push(n[i]);n=r}var o=[];for(i=0;i<n.length&&o.length<4;i++)if(n[i]!=this.state){var a=this.split();a.storeNode(0,a.pos,a.pos,4,!0),a.pushState(n[i],this.pos),a.recovered+=2,o.push(a)}return o},e.prototype.forceReduce=function(){var e=this.cx.parser.stateSlot(this.state,5);return 0!=(65536&e)&&(this.cx.parser.validAction(this.state,e)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.recovered+=1),this.reduce(e),!0)},e.prototype.forceAll=function(){for(;!this.cx.parser.stateFlag(this.state,2)&&this.forceReduce(););return this},e.prototype.toTree=function(){return r.Tree.build({buffer:u.create(this),group:this.cx.parser.group,topID:this.cx.topTerm,maxBufferLength:this.cx.maxBufferLength,reused:this.cx.reused,minRepeatType:this.cx.parser.minRepeatTerm})},e}();!function(e){e[e.Token=2]="Token",e[e.Reduce=1]="Reduce",e[e.MaxNext=4]="MaxNext"}(a||(a={}));var c=function(){function e(e){this.stack=e,this.top=e.state,this.rest=e.stack,this.offset=this.rest.length}return e.prototype.reduce=function(e){var t=65535&e,n=e>>19;0==n?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=3*(n-1);var r=this.stack.cx.parser.getGoto(this.rest[this.offset-3],t,!0);this.top=r},e}(),u=function(){function e(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}return e.create=function(t){return new e(t,t.bufferBase+t.buffer.length,t.buffer.length)},e.prototype.maybeNext=function(){var e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)},Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!0,configurable:!0}),e.prototype.next=function(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()},e.prototype.fork=function(){return new e(this.stack,this.pos,this.index)},e}(),f=function(){function e(){this.start=-1,this.value=-1,this.end=-1}return e.prototype.accept=function(e,t){this.value=e,this.end=t},e}(),h=function(){function e(e,t){void 0===t&&(t=e.length),this.string=e,this.length=t}return e.prototype.get=function(e){return e<0||e>=this.length?-1:this.string.charCodeAt(e)},e.prototype.read=function(e,t){return this.string.slice(e,Math.min(this.length,t))},e.prototype.clip=function(t){return new e(this.string,t)},e}(),d=function(){function e(e,t){this.data=e,this.id=t}return e.prototype.token=function(e,t,n){p(this.data,e,t,n,this.id)},e}();d.prototype.contextual=!1;var l=function(){function e(e,t){void 0===t&&(t={}),this.token=e,this.contextual=t&&t.contextual||!1}return e}();function p(e,t,n,r,i){var o=0,a=1<<i;e:for(var s=n.start;0!=(a&e[o]);){for(var c=e[o+1],u=o+3;u<c;u+=2)if((e[u+1]&a)>0){var f=e[u];if(-1==n.value||n.value==f||r.cx.parser.overrides(f,n.value)){n.accept(f,s);break}}for(var h=t.get(s++),d=0,l=e[o+2];d<l;){var p=d+l>>1,g=c+p+(p<<1),v=e[g],m=e[g+1];if(h<v)l=p;else{if(!(h>=m)){o=e[g+2];continue e}d=p+1}}break}}function g(e,t){void 0===t&&(t=Uint16Array);for(var n=null,r=0,i=0;r<e.length;){for(var o=0;;){var a=e.charCodeAt(r++),s=!1;if(126==a){o=65535;break}a>=92&&a--,a>=34&&a--;var c=a-32;if(c>=46&&(c-=46,s=!0),o+=c,s)break;o*=46}n?n[i++]=o:n=new t(o)}return n}var v=void 0!==e&&/\bparse\b/.test(Object({NODE_ENV:"production"}).LOG),m=function(){function e(e){this.start=[0],this.index=[0],this.nextStart=0,this.trees=[e]}return e.prototype.nodeAt=function(e){if(e<this.nextStart)return null;for(;;){var t=this.trees.length-1;if(t<0)return this.nextStart=1e9,null;var n=this.trees[t],i=this.index[t];if(i!=n.children.length){var o=n.children[i],a=this.start[t]+n.positions[i];if(a>=e)return a==e?o:null;o instanceof r.TreeBuffer?(this.index[t]++,this.nextStart=a+o.length):(this.index[t]++,a+o.length>=e&&(this.trees.push(o),this.start.push(a),this.index.push(0)))}else this.trees.pop(),this.start.pop(),this.index.pop()}},e}(),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.extended=-1,t.mask=0,t}return o(t,e),t.prototype.clear=function(e){this.start=e,this.value=this.extended=-1},t}(f),R=new f,b=function(){function e(e){this.tokens=[],this.mainToken=R,this.actions=[],this.tokens=e.tokenizers.map(function(e){return new y})}return e.prototype.getActions=function(e,t){for(var n=0,r=null,i=e.cx.parser,o=i.tokenizers,a=i.stateSlot(e.state,3),s=0;s<o.length;s++)if(0!=(1<<s&a)){var c=o[s],u=this.tokens[s];(c.contextual||u.start!=e.pos||u.mask!=a)&&(this.updateCachedToken(u,c,e,t),u.mask=a);var f=n;if(u.extended>-1&&(n=this.addActions(e,u.extended,u.end,n)),(n=this.addActions(e,u.value,u.end,n))>f){r=u;break}r&&0==u.value||(r=u)}for(;this.actions.length>n;)this.actions.pop();return r||((r=R).start=e.pos,e.pos==t.length?r.accept(e.cx.parser.eofTerm,e.pos):r.accept(0,e.pos+1)),this.mainToken=r,this.actions},e.prototype.updateCachedToken=function(e,t,n,r){if(e.clear(n.pos),t.token(r,e,n),e.value>-1){var i=n.cx.parser,o=P(i.data,i.specializeTable,e.value);if(o>=0){var a=i.specializations[o][r.read(e.start,e.end)];null!=a&&(0==(1&a)?e.value=a>>1:e.extended=a>>1)}}else n.pos==r.length?e.accept(n.cx.parser.eofTerm,n.pos):e.accept(0,n.pos+1)},e.prototype.putAction=function(e,t,n,r){for(var i=0;i<r;i+=3)if(this.actions[i]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r},e.prototype.addActions=function(e,t,n,r){for(var i=e.state,o=e.cx.parser,a=o.data,s=0;s<2;s++)for(var c=o.stateSlot(i,s?2:1),u=void 0;65535!=(u=a[c]);c+=3)(u==t||0==u&&0==r)&&(r=this.putAction(a[c+1]|a[c+2]<<16,t,n,r));return r},e}(),C=function(){function e(e,t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=-1),this.parser=e,this.maxBufferLength=t,this.input=n,this.topTerm=r,this.parent=i,this.wrapType=o,this.reused=[],this.tokens=new b(e)}return e}(),N=5,S=3,x=200,w=10,T=function(){function e(e,t,n){var i=void 0===n?{}:n,o=i.cache,a=void 0===o?void 0:o,c=i.strict,u=void 0!==c&&c,f=i.bufferLength,h=void 0===f?r.DefaultBufferLength:f,d=i.top,l=void 0===d?void 0:d;this.pos=0,this.recovering=0,this.tokenCount=0;var p=l?e.topRules[l]:e.defaultTop;if(!p)throw new RangeError("Invalid top rule name "+l);this.stacks=[s.start(new C(e,h,t,p[1]),p[0])],this.strict=u,this.cache=a?new m(a):null}return e.prototype.putStack=function(e){this.stacks.push(e),(this.pos<0||e.pos<this.pos)&&(this.pos=e.pos)},e.prototype.advance=function(){var e=this.stacks,t=this.pos;this.stacks=[],this.pos=-1;for(var n=null,r=null,i=0;i<e.length;i++)for(var o=e[i];;){if(o.pos>t)this.putStack(o);else{var a=this.advanceStack(o,e);if(a){o=a;continue}n||(n=[],r=[]),n.push(o);var s=o.cx.tokens.mainToken;r.push(s.value,s.end)}break}if(!this.stacks.length){var c;if(c=n&&A(n))return c.toTree();if(this.strict)throw new SyntaxError("No parse at "+t);this.recovering||(this.recovering=N)}if(this.recovering&&n&&(c=this.runRecovery(n,r)))return c.forceAll().toTree();if(this.recovering){var u=1==this.recovering?1:this.recovering*S;this.stacks.length>u&&(this.stacks.sort(function(e,t){return e.recovered-t.recovered}),this.stacks.length=u),this.stacks.some(function(e){return e.reducePos>t})&&this.recovering--}else if(this.stacks.length>1&&this.stacks[0].buffer.length>x){var f=1e9,h=-1;for(i=0;i<this.stacks.length;i++){(o=this.stacks[i]).buffer.length<f&&(f=o.buffer.length,h=i)}f>x&&this.stacks.splice(h,1)}return this.tokenCount++,null},e.prototype.advanceStack=function(e,t){var n=e.pos,i=e.cx,o=i.input,a=i.parser,c=v?e+" -> ":"";if(this.cache)for(var u=this.cache.nodeAt(n);u;){var f=a.group.types[u.type.id]==u.type?a.getGoto(e.state,u.type.id):-1;if(f>-1)return e.useNode(u,f),v&&console.log(c+e+" (via reuse of "+a.getName(u.type.id)+")"),e;if(!(u instanceof r.Tree)||0==u.children.length||u.positions[0]>0)break;var h=u.children[0];if(!(h instanceof r.Tree))break;u=h}var d=a.startNested(e.state);e:if(d>-1){var l=a.nested[d],p=l.grammar,g=l.end,m=l.placeholder,y=void 0,R=null,b=void 0,N=void 0,S=void 0;if("function"==typeof p){var x=p(o,e);if(x.stay)break e;R=x.parseNode,b=x.parser,N=x.top,y=x.filterEnd,S=x.wrapType}else b=p;var w=this.scanForNestEnd(e,g,y),T=e.cx.input.clip(w);if(R||!b){var E=R?R(T,e.pos):r.Tree.empty;return E.length!=w-e.pos&&(E=new r.Tree(E.type,E.children,E.positions,w-e.pos)),null!=S&&(E=new r.Tree(a.group.types[S],[E],[0],E.length)),e.useNode(E,a.getGoto(e.state,m,!0)),e}var O=N?b.topRules[N]:b.defaultTop,P=s.start(new C(b,e.cx.maxBufferLength,T,O[1],e,S),O[0],e.pos);return v&&console.log(c+P+" (nested)"),P}var k=a.stateSlot(e.state,4);if(k>0)return e.reduce(k),v&&console.log(c+e+" (via always-reduce "+a.getName(65535&k)+")"),e;for(var A=e.cx.tokens.getActions(e,o),D=0;D<A.length;){var B=A[D++],I=A[D++],L=(w=A[D++],D==A.length||!t),M=L?e:e.split();if(M.apply(B,I,w),v&&console.log(c+M+" (via "+(0==(65536&B)?"shift":"reduce of "+a.getName(65535&B))+" for "+a.getName(I)+" @ "+n+(M==e?"":", split")+")"),L)return M;M.pos>n?this.putStack(M):t.push(M)}return e.cx.parent&&e.pos==o.length?_(e):null},e.prototype.advanceFully=function(e){for(var t=e.pos;;){var n=this.advanceStack(e,null);if(!n)return e;if(n.pos>t)return this.putStack(n),null;e=n}},e.prototype.runRecovery=function(e,t){for(var n=null,r=0;r<e.length;r++){for(var i=e[r],o=t[r<<1],a=t[1+(r<<1)],s=v?i+" -> ":"",c=i.split(),u=s,f=0;c.forceReduce()&&f<w;f++){v&&console.log(u+c+" (via force-reduce)");var h=this.advanceFully(c);if(!h)break;c=h,v&&(u=h+" -> ")}for(var d=0,l=i.recoverByInsert(o);d<l.length;d++){var p=l[d];v&&console.log(s+p+" (via recover-insert)"),this.advanceFully(p)}i.cx.input.length>i.pos?(a==i.pos&&(a++,o=0),i.recoverByDelete(o,a),v&&console.log(s+i+" (via recover-delete "+i.cx.parser.getName(o)+")"),this.putStack(i)):i.cx.parent||n&&!(n.recovered>i.recovered)||(n=i)}return n},e.prototype.forceFinish=function(){return this.stacks[0].split().forceAll().toTree()},Object.defineProperty(e.prototype,"badness",{get:function(){return 2*this.stacks[0].recovered/this.tokenCount},enumerable:!0,configurable:!0}),e.prototype.scanForNestEnd=function(e,t,n){for(var r=e.cx.input,i=e.pos;i<r.length;i++)if(R.start=i,R.value=-1,t.token(r,R,e),R.value>-1&&(!n||n(r.read(i,R.end))))return i;return r.length},e}(),E=function(){function e(e,t,n,r,i,o,a,s,c,u,f,h){void 0===h&&(h=null),this.states=e,this.data=t,this.goto=n,this.group=r,this.minRepeatTerm=i,this.tokenizers=o,this.topRules=a,this.nested=s,this.specializeTable=c,this.specializations=u,this.tokenPrecTable=f,this.termNames=h,this.nextStateCache=[],this.maxNode=this.group.types.length-1,this.maxRepeatWrap=this.group.types.length+(this.group.types.length-i)-1;for(var d=0,l=this.states.length/6;d<l;d++)this.nextStateCache[d]=null}return e.prototype.parse=function(e,t){"string"==typeof e&&(e=new h(e));for(var n=new T(this,e,t);;){var r=n.advance();if(r)return r}},e.prototype.startParse=function(e,t){return"string"==typeof e&&(e=new h(e)),new T(this,e,t)},e.prototype.getGoto=function(e,t,n){void 0===n&&(n=!1);var r=this.goto;if(t>=r[0])return-1;for(var i=r[t+1];;){var o=r[i++],a=1&o,s=r[i++];if(a&&n)return s;for(var c=i+(o>>1);i<c;i++)if(r[i]==e)return s;if(a)return-1}},e.prototype.hasAction=function(e,t){for(var n=this.data,r=0;r<2;r++)for(var i=this.stateSlot(e,r?2:1),o=void 0;65535!=(o=n[i]);i+=3)if(o==t||0==o)return n[i+1]|n[i+2]<<16;return 0},e.prototype.stateSlot=function(e,t){return this.states[6*e+t]},e.prototype.stateFlag=function(e,t){return(this.stateSlot(e,0)&t)>0},e.prototype.startNested=function(e){var t=this.stateSlot(e,0);return 4&t?t>>10:-1},e.prototype.validAction=function(e,t){if(t==this.stateSlot(e,4))return!0;for(var n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n])return!1;if(t==(this.data[n+1]|this.data[n+2]<<16))return!0}},e.prototype.nextStates=function(e){var t=this.nextStateCache[e];if(t)return t;for(var n=[],r=this.stateSlot(e,1);65535!=this.data[r];r+=3)0!=(1&this.data[r+2])||n.includes(this.data[r+1])||n.push(this.data[r+1]);for(var i=this.goto,o=i[0],a=0;a<o;a++)for(var s=i[a+1];;){for(var c=i[s++],u=i[s++],f=s+(c>>1);s<f;s++)i[s]!=e||n.includes(u)||n.push(u);if(1&c)break}return this.nextStateCache[e]=n},e.prototype.overrides=function(e,t){var n=P(this.data,this.tokenPrecTable,t);return n<0||P(this.data,this.tokenPrecTable,e)<n},e.prototype.withNested=function(t){return new e(this.states,this.data,this.goto,this.group,this.minRepeatTerm,this.tokenizers,this.topRules,this.nested.map(function(e){return Object.prototype.hasOwnProperty.call(t,e.name)?{name:e.name,grammar:t[e.name],end:e.end,placeholder:e.placeholder}:e}),this.specializeTable,this.specializations,this.tokenPrecTable,this.termNames)},e.prototype.withProps=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new e(this.states,this.data,this.goto,(t=this.group).extend.apply(t,n),this.minRepeatTerm,this.tokenizers,this.topRules,this.nested,this.specializeTable,this.specializations,this.tokenPrecTable,this.termNames)},e.prototype.getName=function(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.group.types[e].name||e)},Object.defineProperty(e.prototype,"eofTerm",{get:function(){return this.maxRepeatWrap+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNested",{get:function(){return this.nested.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultTop",{get:function(){return this.topRules[Object.keys(this.topRules)[0]]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topType",{get:function(){return this.group.types[this.defaultTop[1]]},enumerable:!0,configurable:!0}),e.deserialize=function(t){for(var n=g(t.tokenData),i=t.nodeNames.split(" "),o=i.length,a=0;a<t.repeatNodeCount;a++)i.push("");var s=[];for(a=0;a<i.length;a++)s.push(O);function c(e,t,n){s[e]==O&&(s[e]=Object.create(null)),t.set(s[e],t.deserialize(n))}if(c(0,r.NodeProp.error,""),t.nodeProps)for(var u=0,f=t.nodeProps;u<f.length;u++){var h=f[u],l=h[0];for(a=1;a<h.length;a+=2)c(h[a],l,h[a+1])}var p=new r.NodeGroup(i.map(function(e,t){return new r.NodeType(e,s[t],t)}));return new e(g(t.states,Uint32Array),g(t.stateData),g(t.goto),p,o,t.tokenizers.map(function(e){return"number"==typeof e?new d(n,e):e}),t.topRules,(t.nested||[]).map(function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return{name:t,grammar:n,end:new d(g(r),0),placeholder:i}}),t.specializeTable,(t.specializations||[]).map(k),t.tokenPrec,t.termNames)},e}(),O=Object.create(null);function P(e,t,n){for(var r=t,i=void 0;65535!=(i=e[r]);r++)if(i==n)return r-t;return-1}function k(e){if(!(e instanceof Object))return e;var t=Object.create(null);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function A(e){for(var t=null,n=0,r=e;n<r.length;n++){var i=r[n];i.pos==i.cx.input.length&&i.cx.parser.stateFlag(i.state,2)&&(!t||t.recovered>i.recovered)&&(t=i)}return t}function _(e){if(-2==e.cx.wrapType)return null;var t=e.cx.parent,n=e.forceAll().toTree(),i=t.cx.parser,o=i.nested[i.startNested(t.state)];return n=new r.Tree(n.type,n.children,n.positions.map(function(e){return e-t.pos}),e.pos-t.pos),e.cx.wrapType>-1&&(n=new r.Tree(i.group.types[e.cx.wrapType],[n],[0],n.length)),e.cx.wrapType=-2,t.useNode(n,i.getGoto(t.state,o.placeholder,!0)),v&&console.log(t+" (via unnest "+(e.cx.wrapType>-1?i.getName(e.cx.wrapType):n.type.name)+")"),t}t.NodeGroup=r.NodeGroup,t.NodeProp=r.NodeProp,t.NodeType=r.NodeType,t.Subtree=r.Subtree,t.Tree=r.Tree,t.ExternalTokenizer=l,t.ParseContext=T,t.Parser=E,t.Stack=s,t.Token=f,t.TokenGroup=d}).call(this,n("8oxByP"))}}]);